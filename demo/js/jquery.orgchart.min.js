"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});return"undefined"!=typeof MutationObserver&&this.triggerInitEvent(),"object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length&&this.attachExportButton(),this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},triggerInitEvent:function(){var t=this,i=new MutationObserver(function(n){i.disconnect();e:for(var s=0;s<n.length;s++)for(var a=0;a<n[s].addedNodes.length;a++)if(n[s].addedNodes[a].classList.contains("orgchart")&&t.options.initCompleted&&"function"==typeof t.options.initCompleted){t.options.initCompleted(t.$chart);var d=e.Event("init.orgchart");t.$chart.trigger(d);break e}});i.observe(this.$chartContainer[0],{childList:!0})},attachExportButton:function(){var t=this,i=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),t.export()}});this.$chartContainer.append(i)},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var d=a.split(",");-1===a.indexOf("3d")?(n=parseInt(d[4]),s=parseInt(d[5])):(n=parseInt(d[12]),s=parseInt(d[13]))}var o=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)o=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else o=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-o,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-o,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",d=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(d=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(d=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t[0].id&&(n.id=t[0].id),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){return void 0===this.$chart?"Error: orgchart does not exist":this.$chart.find(".node").length?this.$chart.find(".node")[0].id?this.loopChart(this.$chart):"Error: Nodes of orghcart to be exported must have id attribute!":"Error: nodes do not exist"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return i.closest(".nodes").length&&i.closest(".nodes").is(".hidden")||i.closest("table").parent().length&&i.closest("table").parent().is(".hidden")||i.parent().is("li")&&(i.closest("ul").is(".hidden")||i.closest("verticalNodes").is(".hidden"))?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e),t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},isVisibleNode:function(t,i){return this.getNodeState(e(i)).visible},hideChildrenEnd:function(e){e.data.visibleNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.visibleNodes.closest("table").closest("tr").prevAll(".lines").removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},hideChildren:function(e){var t=e.closest("tr").siblings();this.stopAjax(t.last());var i=t.last().find(".node").filter(this.isVisibleNode.bind(this)),n=!!t.last().is(".verticalNodes");n||i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),this.repaint(i.get(0)),i.addClass("sliding slide-up").eq(0).one("transitionend",{visibleNodes:i,lowerLevel:t,isVerticalDesc:n,node:e},this.hideChildrenEnd.bind(this))},showChildren:function(e){var t=this,i=e.closest("tr").siblings(),n=!!i.is(".verticalNodes")?i.removeClass("hidden").find(".node").filter(this.isVisibleNode.bind(this)):i.removeClass("hidden").eq(2).children().find(".node:first").filter(this.isVisibleNode.bind(this));this.repaint(n.get(0)),n.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",function(){n.removeClass("sliding"),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},hideSiblingsEnd:function(e){var t=e.data.node,i=e.data.nodeContainer,n=e.data.direction;e.data.lines.removeAttr("style");var s=n?"left"===n?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,n?2*s.length+1:-1).addClass("hidden"),e.data.animatedNodes.removeClass("sliding"),s.find(".node:gt(0)").filter(this.isVisibleNode.bind(this)).removeClass("slide-left slide-right").addClass("slide-up"),s.find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),this.isInAction(t)&&this.switchHorizontalArrow(t)},hideSiblings:function(e,t){var i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"):i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"):(i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"),i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"));var n=i.siblings().find(".sliding"),s=n.closest(".nodes").prevAll(".lines").css("visibility","hidden");n.eq(0).one("transitionend",{node:e,nodeContainer:i,direction:t,animatedNodes:n,lines:s},this.hideSiblingsEnd.bind(this))},showSiblingsEnd:function(e){var t=e.data.node;e.data.visibleNodes.removeClass("sliding"),this.isInAction(t)&&(this.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))},showSiblings:function(t,i){var n=e();n=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var s=t.closest("table").closest("tr").siblings();if(i?s.eq(2).children(".hidden").slice(0,2*n.length).removeClass("hidden"):s.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){s.removeClass("hidden");var a=s.find(".node")[0];this.repaint(a),e(a).addClass("sliding").removeClass("slide-down").one("transitionend",function(){e(this).removeClass("sliding")})}var d=n.find(".node").filter(this.isVisibleNode.bind(this));this.repaint(d.get(0)),d.addClass("sliding").removeClass("slide-left slide-right"),d.eq(0).one("transitionend",{node:t,visibleNodes:d},this.showSiblingsEnd.bind(this))},startLoading:function(t){var i=this.$chart;return(void 0===i.data("inAjax")||!0!==i.data("inAjax"))&&(t.addClass("hidden"),t.parent().append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>').children().not(".spinner").css("opacity",.2),i.data("inAjax",!0),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t){var i=t.parent();t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),this.$chart.data("inAjax",!1),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},nodeEnterLeaveHandler:function(t){var i=e(t.delegateTarget),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),d=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=this.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=this.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),d.length&&this.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")},nodeClickHandler:function(t){this.$chart.find(".focused").removeClass("focused"),e(t.delegateTarget).addClass("focused")},loadNodes:function(t,i,n){var s=this,a=this.options;e.ajax({url:i,dataType:"json"}).done(function(i){s.$chart.data("inAjax")&&("parent"===t?e.isEmptyObject(i)||s.addParent(n.parent(),i,a):"children"===t?i.children.length&&s.addChildren(n.parent(),i,e.extend({},a,{depth:0})):(i.siblings||i.children)&&s.addSiblings(n.parent(),i,a))}).fail(function(){console.log("Failed to get "+t+" data")}).always(function(){s.endLoading(n)})},topEdgeClickHandler:function(t){t.stopPropagation();var i=this,n=e(t.target),s=e(t.delegateTarget),a=this.getNodeState(s,"parent");if(a.exist){var d=s.closest("table").closest("tr").siblings(":first").find(".node");if(d.is(".sliding"))return;a.visible?(this.hideParent(s),d.one("transitionend",function(){i.isInAction(s)&&(i.switchVerticalArrow(n),i.switchHorizontalArrow(s))})):this.showParent(s)}else if(this.startLoading(n)){var o=this.options,r=e.isFunction(o.ajaxURL.parent)?o.ajaxURL.parent(t.data.nodeData):o.ajaxURL.parent+s[0].id;this.loadNodes("parent",r,n)}},bottomEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"children");if(s.exist){if(n.closest("tr").siblings(":last").find(".sliding").length)return;s.visible?this.hideChildren(n):this.showChildren(n)}else if(this.startLoading(i)){var a=this.options,d=e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(t.data.nodeData):a.ajaxURL.children+n[0].id;this.loadNodes("children",d,i)}},hEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.options,a=this.getNodeState(n,"siblings");if(a.exist){if(n.closest("table").parent().siblings().find(".sliding").length)return;if(s.toggleSiblingsResp){var d=n.closest("table").parent().prev(),o=n.closest("table").parent().next();i.is(".leftEdge")?d.is(".hidden")?this.showSiblings(n,"left"):this.hideSiblings(n,"left"):o.is(".hidden")?this.showSiblings(n,"right"):this.hideSiblings(n,"right")}else a.visible?this.hideSiblings(n):this.showSiblings(n)}else if(this.startLoading(i)){var r=n[0].id,l=this.getNodeState(n,"parent").exist?e.isFunction(s.ajaxURL.siblings)?s.ajaxURL.siblings(t.data.nodeData):s.ajaxURL.siblings+r:e.isFunction(s.ajaxURL.families)?s.ajaxURL.families(t.data.nodeData):s.ajaxURL.families+r;this.loadNodes("siblings",l,i)}},createNode:function(n,s,a){var d=this;n.children||(n.children=[]),e.each(n.children,function(e,t){t.parentId=n.id});var o=e.Deferred(),r=e("<div"+(a.draggable?' draggable="true"':"")+(n[a.nodeId]?' id="'+n[a.nodeId]+'"':"")+(n.parentId?' data-parent="'+n.parentId+'"':"")+">").addClass("node "+(n.className||"")+(s>=a.depth?" slide-up":""));a.nodeTemplate?r.append(a.nodeTemplate(n)):r.append('<div class="title">'+n[a.nodeTitle]+"</div>").append(void 0!==a.nodeContent?'<div class="content">'+(n[a.nodeContent]||"")+"</div>":"");var l=n.relationship||"";if(a.verticalDepth&&s+2>a.verticalDepth){if(s+1>=a.verticalDepth&&Number(l.substr(2,1))){var h=s+1>=a.depth?"plus":"minus";r.append('<i class="toggleBtn fa fa-'+h+'-square"></i>')}}else Number(l.substr(0,1))&&r.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(l.substr(1,1))&&r.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(l.substr(2,1))&&r.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+a.parentNodeSymbol+' symbol"></i>');return r.on("mouseenter mouseleave",this.nodeEnterLeaveHandler.bind(this)),r.on("click",this.nodeClickHandler.bind(this)),r.on("click",".topEdge",{nodeData:n},this.topEdgeClickHandler.bind(this)),r.on("click",".bottomEdge",{nodeData:n},this.bottomEdgeClickHandler.bind(this)),r.on("click",".leftEdge, .rightEdge",{nodeData:n},this.hEdgeClickHandler.bind(this)),r.on("click",".toggleBtn",function(t){var i=e(this),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),d.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",function(){a.removeClass("sliding")})):(s.addClass("sliding slide-up").eq(0).one("transitionend",function(){s.removeClass("sliding"),s.closest("ul").addClass("hidden")}),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))}),a.draggable&&r.on("dragstart",function(n){var s=n.originalEvent,d=/firefox/.test(t.navigator.userAgent.toLowerCase());if(d&&s.dataTransfer.setData("text/html","hack for firefox"),"none"!==r.closest(".orgchart").css("transform")){var o,l;i.querySelector(".ghost-node")?(o=r.closest(".orgchart").children(".ghost-node").get(0),l=e(o).children().get(0)):((o=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),o.appendChild(l),r.closest(".orgchart").append(o));var h=r.closest(".orgchart").css("transform").split(","),c=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?h[0].slice(h[0].indexOf("(")+1):h[1]));o.setAttribute("width",r.outerWidth(!1)),o.setAttribute("height",r.outerHeight(!1)),l.setAttribute("x",5*c),l.setAttribute("y",5*c),l.setAttribute("width",120*c),l.setAttribute("height",40*c),l.setAttribute("rx",4*c),l.setAttribute("ry",4*c),l.setAttribute("stroke-width",1*c);var g=s.offsetX*c,p=s.offsetY*c;if("l2r"===a.direction?(g=s.offsetY*c,p=s.offsetX*c):"r2l"===a.direction?(g=r.outerWidth(!1)-s.offsetY*c,p=s.offsetX*c):"b2t"===a.direction&&(g=r.outerWidth(!1)-s.offsetX*c,p=r.outerHeight(!1)-s.offsetY*c),d){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var f=i.createElement("img");f.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(o),s.dataTransfer.setDragImage(f,g,p)}else s.dataTransfer.setDragImage(o,g,p)}var v=e(this),u=v.closest(".nodes").siblings().eq(0).find(".node:first"),b=v.closest("table").find(".node");v.closest(".orgchart").data("dragged",v).find(".node").each(function(t,i){-1===b.index(i)&&(a.dropCriteria?a.dropCriteria(v,u,e(i))&&e(i).addClass("allowedDrop"):e(i).addClass("allowedDrop"))})}).on("dragover",function(t){t.preventDefault(),e(this).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")}).on("dragend",function(t){e(this).closest(".orgchart").find(".allowedDrop").removeClass("allowedDrop")}).on("drop",function(t){var i=e(this),n=i.closest(".orgchart"),s=n.data("dragged"),a=s.closest(".nodes").siblings().eq(0).children(),d=e.Event("nodedrop.orgchart");if(n.trigger(d,{draggedNode:s,dragZone:a.children(),dropZone:i}),!d.isDefaultPrevented()){if(i.closest("tr").siblings().length){var o=parseInt(i.parent().attr("colspan"))+2,r='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",o),s.find(".horizontalEdge").length||s.append(r),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>').end().next().append(s.closest("table").parent());var l=s.closest("table").parent().siblings().find(".node:first");1===l.length&&l.append(r)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr><tr class="nodes"></tr>').siblings(":last").append(s.find(".horizontalEdge").remove().end().closest("table").parent());var h=parseInt(a.attr("colspan"));if(h>2){a.attr("colspan",h-2).parent().next().children().attr("colspan",h-2).end().next().children().slice(1,3).remove();var c=a.parent().siblings(".nodes").children().find(".node:first");1===c.length&&c.find(".horizontalEdge").remove()}else a.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}}),a.createNode&&a.createNode(r,n),o.resolve(r),o.promise()},buildHierarchy:function(t,i,n,s,a){var d,o=this,r=i.children,l=!!r&&r.length,h=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(d=h?t:e("<table>"),h||t.append(d),e.when(this.createNode(i,n,s)).done(function(e){h?d.append(e):d.append(e.wrap("<tr><td"+(l?' colspan="'+2*r.length+'"':"")+"></td></tr>").closest("tr")),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(d=t);var c=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||d.append('<tr class="lines'+c+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var p='<tr class="lines'+c+'"><td class="rightLine">&nbsp;</td>',f=1;f<r.length;f++)p+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';p+='<td class="leftLine">&nbsp;</td></tr>';var v;g?(v=e("<ul>"),c&&s.depth+1!==s.verticalDepth&&v.addClass(c),n+2===s.verticalDepth?d.append('<tr class="verticalNodes'+c+'"><td></td></tr>').find(".verticalNodes").children().append(v):d.append(v)):(v=e('<tr class="nodes'+c+'">'),d.append(p).append(v)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');v.append(t),o.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,d=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(e){d.append(e.removeClass("slide-up").addClass("slide-down").wrap('<tr class="hidden"><td colspan="2"></td></tr>').closest("tr")),d.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');d.append('<tr class="lines hidden"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr>');var t=a.$chart;t.prepend(d).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(t.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),d=i.siblings?i.siblings.length:i.children.length,o=t.parent().is("td")?t.closest("tr").children().length:1,r=o+d,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var h=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++h===d){var e=t.parent().closest("table").children("tr:last").children("td");o>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,o),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var c=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++c===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var d=this.$chartContainer,o=d.find(".mask");o.length?o.removeClass("hidden"):d.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=d.addClass("canvasContainer").find('.orgchart:not(".hidden")').get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find('.orgchart:not(".hidden"):first').css("transform","")},onrendered:function(e){if(d.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var o={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(o=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),o.save(n+".pdf")}else{var h="WebkitAppearance"in i.documentElement.style,c=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!h&&!c||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var p=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");d.find(p).length||d.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),d.find(p).attr("href",e.toDataURL())[0].click()}}}}).then(function(){d.removeClass("canvasContainer")},function(){d.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2pxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsInRyaWdnZXJJbml0RXZlbnQiLCJ0eXBlIiwiYnVpbGRIaWVyYXJjaHkiLCJidWlsZEpzb25EUyIsImNoaWxkcmVuIiwiYWpheFVSTCIsImF0dGFjaFJlbCIsImFwcGVuZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiYXR0YWNoRXhwb3J0QnV0dG9uIiwiYmluZFBhbiIsImJpbmRab29tIiwibW8iLCJtdXRhdGlvbnMiLCJkaXNjb25uZWN0IiwiaW5pdFRpbWUiLCJpIiwiaiIsImFkZGVkTm9kZXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImluaXRDb21wbGV0ZWQiLCJpbml0RXZlbnQiLCJFdmVudCIsInRyaWdnZXIiLCJvYnNlcnZlIiwiY2hpbGRMaXN0IiwiJGV4cG9ydEJ0biIsInRleHQiLCJlIiwicHJldmVudERlZmF1bHQiLCJleHBvcnQiLCJzZXRPcHRpb25zIiwidmFsIiwidW5iaW5kUGFuIiwidW5iaW5kWm9vbSIsInBhblN0YXJ0SGFuZGxlciIsImRlbGVnYXRlVGFyZ2V0IiwidG91Y2hlcyIsImNzcyIsImxhc3RYIiwibGFzdFkiLCJsYXN0VGYiLCJ0ZW1wIiwic3BsaXQiLCJpbmRleE9mIiwicGFyc2VJbnQiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRUb3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsIm9uIiwibmV3WCIsIm5ld1kiLCJtYXRyaXgiLCJqb2luIiwicGFuRW5kSGFuZGxlciIsImNoYXJ0Iiwib2ZmIiwiem9vbVdoZWVsSGFuZGxlciIsIm9jIiwibmV3U2NhbGUiLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwic2V0Q2hhcnRTY2FsZSIsInpvb21TdGFydEhhbmRsZXIiLCJkaXN0IiwiZ2V0UGluY2hEaXN0Iiwiem9vbWluZ0hhbmRsZXIiLCJ6b29tRW5kSGFuZGxlciIsImRpZmYiLCJNYXRoIiwic3FydCIsImNsaWVudFgiLCJjbGllbnRZIiwidGFyZ2V0U2NhbGUiLCJhYnMiLCJwYXJzZUZsb2F0IiwiJGxpIiwic3ViT2JqIiwibmFtZSIsImNvbnRlbnRzIiwiZXEiLCJ0cmltIiwicmVsYXRpb25zaGlwIiwicGFyZW50IiwiaXMiLCJzaWJsaW5ncyIsImlkIiwiZWFjaCIsInB1c2giLCJmbGFncyIsImZvckVhY2giLCJpdGVtIiwibG9vcENoYXJ0IiwiJHRyIiwiZ2V0SGllcmFyY2h5IiwiZ2V0Tm9kZVN0YXRlIiwiJG5vZGUiLCJyZWxhdGlvbiIsIiR0YXJnZXQiLCJleGlzdCIsInZpc2libGUiLCJnZXRSZWxhdGVkTm9kZXMiLCJoaWRlUGFyZW50RW5kIiwidXBwZXJMZXZlbCIsImFkZENsYXNzIiwic2xpY2UiLCJyZW1vdmVBdHRyIiwiaGlkZVBhcmVudCIsIiR1cHBlckxldmVsIiwiaGlkZVNpYmxpbmdzIiwiJHBhcmVudCIsIm9uZSIsInNob3dQYXJlbnRFbmQiLCJub2RlIiwiaXNJbkFjdGlvbiIsInN3aXRjaFZlcnRpY2FsQXJyb3ciLCJzaG93UGFyZW50IiwicmVwYWludCIsImJpbmQiLCJzdG9wQWpheCIsIiRub2RlTGV2ZWwiLCJpc1Zpc2libGVOb2RlIiwiaW5kZXgiLCJoaWRlQ2hpbGRyZW5FbmQiLCJ2aXNpYmxlTm9kZXMiLCJpc1ZlcnRpY2FsRGVzYyIsImxvd2VyTGV2ZWwiLCJwcmV2QWxsIiwibGFzdCIsImhpZGVDaGlsZHJlbiIsIiRsb3dlckxldmVsIiwiJHZpc2libGVOb2RlcyIsImZpbHRlciIsImdldCIsInNob3dDaGlsZHJlbiIsIiRsZXZlbHMiLCIkZGVzY2VuZGFudHMiLCJoaWRlU2libGluZ3NFbmQiLCIkbm9kZUNvbnRhaW5lciIsIm5vZGVDb250YWluZXIiLCJsaW5lcyIsIiRzaWJsaW5ncyIsIm5leHRBbGwiLCJwcmV2IiwiYW5pbWF0ZWROb2RlcyIsImVuZCIsInN3aXRjaEhvcml6b250YWxBcnJvdyIsIiRhbmltYXRlZE5vZGVzIiwiJGxpbmVzIiwic2hvd1NpYmxpbmdzRW5kIiwic2hvd1NpYmxpbmdzIiwic3RhcnRMb2FkaW5nIiwiJGVkZ2UiLCJub3QiLCJwcm9wIiwiZW5kTG9hZGluZyIsImF0dHIiLCIkYXJyb3ciLCJ0b2dnbGVDbGFzcyIsIiRwcmV2U2liIiwiJG5leHRTaWIiLCJuZXh0IiwiJHNpYnMiLCJzaWJzVmlzaWJsZSIsInN0eWxlIiwib2Zmc2V0V2lkdGgiLCJub2RlRW50ZXJMZWF2ZUhhbmRsZXIiLCJmbGFnIiwiJHRvcEVkZ2UiLCIkYm90dG9tRWRnZSIsIiRsZWZ0RWRnZSIsIm5vZGVDbGlja0hhbmRsZXIiLCJsb2FkTm9kZXMiLCJyZWwiLCJpc0VtcHR5T2JqZWN0IiwiYWRkUGFyZW50IiwiYWRkQ2hpbGRyZW4iLCJhZGRTaWJsaW5ncyIsInRvcEVkZ2VDbGlja0hhbmRsZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJwYXJlbnRTdGF0ZSIsImlzRnVuY3Rpb24iLCJub2RlRGF0YSIsImJvdHRvbUVkZ2VDbGlja0hhbmRsZXIiLCJjaGlsZHJlblN0YXRlIiwiaEVkZ2VDbGlja0hhbmRsZXIiLCIkaEVkZ2UiLCJzaWJsaW5nc1N0YXRlIiwiZmFtaWxpZXMiLCJjcmVhdGVOb2RlIiwibGV2ZWwiLCJjaGlsZCIsInBhcmVudElkIiwiZHRkIiwiRGVmZXJyZWQiLCIkbm9kZURpdiIsImNsYXNzTmFtZSIsIm5vZGVUZW1wbGF0ZSIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsImljb24iLCJwcmVwZW5kIiwiJHRoaXMiLCIkZGVzY1dyYXBwZXIiLCIkY2hpbGRyZW4iLCJvcmlnRXZlbnQiLCJpc0ZpcmVmb3giLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZ2hvc3ROb2RlIiwibm9kZUNvdmVyIiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnROUyIsImFkZCIsImFwcGVuZENoaWxkIiwidHJhbnNWYWx1ZXMiLCJzY2FsZSIsInNldEF0dHJpYnV0ZSIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsInhPZmZzZXQiLCJvZmZzZXRYIiwieU9mZnNldCIsIm9mZnNldFkiLCJnaG9zdE5vZGVXcmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInNldERyYWdJbWFnZSIsIiRkcmFnZ2VkIiwiJGRyYWdab25lIiwiJGRyYWdIaWVyIiwiZHJvcENyaXRlcmlhIiwiZHJvcEVmZmVjdCIsIiRkcm9wWm9uZSIsIiRvcmdjaGFydCIsImRyb3BFdmVudCIsImRyYWdnZWROb2RlIiwiZHJhZ1pvbmUiLCJkcm9wWm9uZSIsImlzRGVmYXVsdFByZXZlbnRlZCIsImRyb3BDb2xzcGFuIiwiaG9yaXpvbnRhbEVkZ2VzIiwiYWRkQmFjayIsImJlZm9yZSIsIiRkcm9wU2licyIsImFmdGVyIiwiZHJhZ0NvbHNwYW4iLCIkZHJhZ1NpYnMiLCJyZXNvbHZlIiwicHJvbWlzZSIsIiRhcHBlbmRUbyIsImNhbGxiYWNrIiwiJG5vZGVXcmFwcGVyIiwiJGNoaWxkTm9kZXMiLCJoYXNDaGlsZHJlbiIsImlzVmVydGljYWxOb2RlIiwiT2JqZWN0Iiwia2V5cyIsIndoZW4iLCJ3cmFwIiwiaXNIaWRkZW4iLCJjb2xsYXBzZWQiLCJpc1ZlcnRpY2FsTGF5ZXIiLCJsaW5lTGF5ZXIiLCIkbm9kZUxheWVyIiwiJG5vZGVDZWxsIiwiYnVpbGRDaGlsZE5vZGUiLCJjb3VudCIsImJ1aWxkUGFyZW50Tm9kZSIsIiRjdXJyZW50Um9vdCIsIiR0YWJsZSIsImNvbXBsZW1lbnRMaW5lIiwiJG9uZVNpYmxpbmciLCJzaWJsaW5nQ291bnQiLCJleGlzdGluZ1NpYmxpZ0NvdW50IiwiYnVpbGRTaWJsaW5nTm9kZSIsIiRub2RlQ2hhcnQiLCJuZXdTaWJsaW5nQ291bnQiLCJpbnNlcnRQb3N0aW9uIiwiZmxvb3IiLCJjaGlsZENvdW50IiwiJHNpYmxpbmdUZHMiLCJ1bndyYXAiLCJub2RlQ291bnQiLCJyZW1vdmVOb2RlcyIsIiRtYXNrIiwic291cmNlQ2hhcnQiLCJodG1sMmNhbnZhcyIsIndpZHRoIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJvbnJlbmRlcmVkIiwiY2FudmFzIiwiZG9jIiwiZG9jV2lkdGgiLCJkb2NIZWlnaHQiLCJqc1BERiIsImFkZEltYWdlIiwidG9EYXRhVVJMIiwic2F2ZSIsImlzV2Via2l0IiwiZG9jdW1lbnRFbGVtZW50IiwiaXNGZiIsInNpZGViYXIiLCJpc0VkZ2UiLCJhcHBOYW1lIiwiYXBwVmVyc2lvbiIsIm1zU2F2ZUJsb2IiLCJtc1RvQmxvYiIsInNlbGVjdG9yIiwidGhlbiIsImZuIiwib3JnY2hhcnQiXSwibWFw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QkFBc0I5VyxFQUFTK1csZ0JBQWdCcEosTUFDMURxSixJQUFTalgsRUFBT2tYLFFBQ2hCQyxFQUErQixnQ0FBdEJ6RyxVQUFVMEcsU0FBb0UsYUFBdEIxRyxVQUFVMEcsU0FBMEIxRyxVQUFVMkcsV0FBV25SLFFBQVEsU0FBVyxFQUVqSixJQUFNNlEsSUFBYUUsR0FBU0UsRUFDMUJuWCxFQUFPMFEsVUFBVTRHLFdBQVdmLEVBQU9nQixXQUFZdFcsRUFBaUIsWUFDM0QsQ0FDTCxJQUFJdVcsRUFBVyxvQkFBa0QsS0FBNUI1VixFQUFLQyxRQUFRZCxXQUFvQixJQUFNYSxFQUFLQyxRQUFRZCxXQUFhLElBQ2pHTixFQUFnQitCLEtBQUtnVixHQUFValYsUUFDbEM5QixFQUFnQnlDLE9BQU8sNkJBQTJELEtBQTVCdEIsRUFBS0MsUUFBUWQsV0FBb0IsSUFBTWEsRUFBS0MsUUFBUWQsV0FBYSxJQUFNLGVBQ3pHRSxFQUFpQixjQUV2Q1IsRUFBZ0IrQixLQUFLZ1YsR0FBVXBLLEtBQUssT0FBUW1KLEVBQU9NLGFBQWEsR0FBRzFVLGFBSzFFc1YsS0FBSyxXQUNKaFgsRUFBZ0JnQyxZQUFZLG9CQUMzQixXQUNEaEMsRUFBZ0JnQyxZQUFZLHVCQUtsQ3RDLEVBQUV1WCxHQUFHQyxTQUFXLFNBQVVwWCxHQUN4QixPQUFPLElBQUlGLEVBQVNHLEtBQU1ELEdBQU1vQiIsImZpbGUiOiJqcXVlcnkub3JnY2hhcnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIGpRdWVyeSBPcmdDaGFydCBQbHVnaW5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWJlbmcvT3JnQ2hhcnRcbiAqXG4gKiBDb3B5cmlnaHQgMjAxNiwgZGFiZW5nXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFiZW5nXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLCB3aW5kb3csIGRvY3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBmYWN0b3J5KGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG4gIH1cbn0oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuICB2YXIgT3JnQ2hhcnQgPSBmdW5jdGlvbiAoZWxlbSwgb3B0cykge1xuICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyID0gJChlbGVtKTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAnbm9kZVRpdGxlJzogJ25hbWUnLFxuICAgICAgJ25vZGVJZCc6ICdpZCcsXG4gICAgICAndG9nZ2xlU2libGluZ3NSZXNwJzogZmFsc2UsXG4gICAgICAnZGVwdGgnOiA5OTksXG4gICAgICAnY2hhcnRDbGFzcyc6ICcnLFxuICAgICAgJ2V4cG9ydEJ1dHRvbic6IGZhbHNlLFxuICAgICAgJ2V4cG9ydEZpbGVuYW1lJzogJ09yZ0NoYXJ0JyxcbiAgICAgICdleHBvcnRGaWxlZXh0ZW5zaW9uJzogJ3BuZycsXG4gICAgICAncGFyZW50Tm9kZVN5bWJvbCc6ICdmYS11c2VycycsXG4gICAgICAnZHJhZ2dhYmxlJzogZmFsc2UsXG4gICAgICAnZGlyZWN0aW9uJzogJ3QyYicsXG4gICAgICAncGFuJzogZmFsc2UsXG4gICAgICAnem9vbSc6IGZhbHNlLFxuICAgICAgJ3pvb21pbkxpbWl0JzogNyxcbiAgICAgICd6b29tb3V0TGltaXQnOiAwLjVcbiAgICB9O1xuICB9O1xuICAvL1xuICBPcmdDaGFydC5wcm90b3R5cGUgPSB7XG4gICAgLy9cbiAgICBpbml0OiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMuZGVmYXVsdE9wdGlvbnMsIHRoaXMub3B0cywgb3B0cyk7XG4gICAgICAvLyBidWlsZCB0aGUgb3JnLWNoYXJ0XG4gICAgICB2YXIgJGNoYXJ0Q29udGFpbmVyID0gdGhpcy4kY2hhcnRDb250YWluZXI7XG4gICAgICBpZiAodGhpcy4kY2hhcnQpIHtcbiAgICAgICAgdGhpcy4kY2hhcnQucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICB2YXIgZGF0YSA9IHRoaXMub3B0aW9ucy5kYXRhO1xuICAgICAgdmFyICRjaGFydCA9IHRoaXMuJGNoYXJ0ID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICdkYXRhJzogeyAnb3B0aW9ucyc6IHRoaXMub3B0aW9ucyB9LFxuICAgICAgICAnY2xhc3MnOiAnb3JnY2hhcnQnICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gIT09ICd0MmInID8gJyAnICsgdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA6ICcnKSxcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoISQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgJGNoYXJ0LmZpbmQoJy5ub2RlLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlckluaXRFdmVudCgpO1xuICAgICAgfVxuICAgICAgaWYgKCQudHlwZShkYXRhKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiAkKSB7IC8vIHVsIGRhdGFzb3VyY2VcbiAgICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhpcy5idWlsZEpzb25EUyhkYXRhLmNoaWxkcmVuKCkpLCAwLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9IGVsc2UgeyAvLyBsb2NhbCBqc29uIGRhdGFzb3VyY2VcbiAgICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhpcy5vcHRpb25zLmFqYXhVUkwgPyBkYXRhIDogdGhpcy5hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDAsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRjaGFydC5hcHBlbmQoJzxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPicpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICd1cmwnOiBkYXRhLFxuICAgICAgICAgICdkYXRhVHlwZSc6ICdqc29uJ1xuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGF0Lm9wdGlvbnMuYWpheFVSTCA/IGRhdGEgOiB0aGF0LmF0dGFjaFJlbChkYXRhLCAnMDAnKSwgMCwgdGhhdC5vcHRpb25zKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuICAgICAgICB9KVxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRjaGFydC5jaGlsZHJlbignLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCRjaGFydCk7XG5cbiAgICAgIC8vIGFwcGVuZCB0aGUgZXhwb3J0IGJ1dHRvblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHBvcnRCdXR0b24gJiYgISRjaGFydENvbnRhaW5lci5maW5kKCcub2MtZXhwb3J0LWJ0bicpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmF0dGFjaEV4cG9ydEJ1dHRvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnBhbikge1xuICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tKSB7XG4gICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvL1xuICAgIHRyaWdnZXJJbml0RXZlbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcbiAgICAgICAgbW8uZGlzY29ubmVjdCgpO1xuICAgICAgICBpbml0VGltZTpcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAobXV0YXRpb25zW2ldLmFkZGVkTm9kZXNbal0uY2xhc3NMaXN0LmNvbnRhaW5zKCdvcmdjaGFydCcpKSB7XG4gICAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCAmJiB0eXBlb2YgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCh0aGF0LiRjaGFydCk7XG4gICAgICAgICAgICAgICAgdmFyIGluaXRFdmVudCA9ICQuRXZlbnQoJ2luaXQub3JnY2hhcnQnKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRjaGFydC50cmlnZ2VyKGluaXRFdmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWsgaW5pdFRpbWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbW8ub2JzZXJ2ZSh0aGlzLiRjaGFydENvbnRhaW5lclswXSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIGF0dGFjaEV4cG9ydEJ1dHRvbjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRleHBvcnRCdG4gPSAkKCc8YnV0dG9uPicsIHtcbiAgICAgICAgJ2NsYXNzJzogJ29jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpLFxuICAgICAgICAndGV4dCc6ICdFeHBvcnQnLFxuICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoYXQuZXhwb3J0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuYXBwZW5kKCRleHBvcnRCdG4pO1xuICAgIH0sXG4gICAgc2V0T3B0aW9uczogZnVuY3Rpb24gKG9wdHMsIHZhbCkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAob3B0cyA9PT0gJ3BhbicpIHtcbiAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmJpbmRQYW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMgPT09ICd6b29tJykge1xuICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChvcHRzLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmluaXQob3B0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLnBhbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnBhbikge1xuICAgICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy56b29tICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKG9wdHMuem9vbSkge1xuICAgICAgICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVuYmluZFpvb20oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvL1xuICAgIHBhblN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciAkY2hhcnQgPSAkKGUuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgaWYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoIHx8IChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpKSB7XG4gICAgICAgICRjaGFydC5kYXRhKCdwYW5uaW5nJywgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2hhcnQuY3NzKCdjdXJzb3InLCAnbW92ZScpLmRhdGEoJ3Bhbm5pbmcnLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHZhciBsYXN0WCA9IDA7XG4gICAgICB2YXIgbGFzdFkgPSAwO1xuICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgaWYgKGxhc3RUZiAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHZhciB0ZW1wID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICBsYXN0WCA9IHBhcnNlSW50KHRlbXBbNF0pO1xuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFs1XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzEyXSk7XG4gICAgICAgICAgbGFzdFkgPSBwYXJzZUludCh0ZW1wWzEzXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBzdGFydFggPSAwO1xuICAgICAgdmFyIHN0YXJ0WSA9IDA7XG4gICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcbiAgICAgICAgc3RhcnRYID0gZS5wYWdlWCAtIGxhc3RYO1xuICAgICAgICBzdGFydFkgPSBlLnBhZ2VZIC0gbGFzdFk7XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgICAgc3RhcnRYID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gbGFzdFg7XG4gICAgICAgIHN0YXJ0WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIGxhc3RZO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAkY2hhcnQub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCEkY2hhcnQuZGF0YSgncGFubmluZycpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdYID0gMDtcbiAgICAgICAgdmFyIG5ld1kgPSAwO1xuICAgICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcbiAgICAgICAgICBuZXdYID0gZS5wYWdlWCAtIHN0YXJ0WDtcbiAgICAgICAgICBuZXdZID0gZS5wYWdlWSAtIHN0YXJ0WTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXG4gICAgICAgICAgbmV3WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIHN0YXJ0WDtcbiAgICAgICAgICBuZXdZID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIC0gc3RhcnRZO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ21hdHJpeCgxLCAwLCAwLCAxLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJyknKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ21hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsICcgKyBuZXdYICsgJywgJyArIG5ld1kgKyAnLCAwLCAxKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgICAgbWF0cml4WzRdID0gJyAnICsgbmV3WDtcbiAgICAgICAgICAgIG1hdHJpeFs1XSA9ICcgJyArIG5ld1kgKyAnKSc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hdHJpeFsxMl0gPSAnICcgKyBuZXdYO1xuICAgICAgICAgICAgbWF0cml4WzEzXSA9ICcgJyArIG5ld1k7XG4gICAgICAgICAgfVxuICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIG1hdHJpeC5qb2luKCcsJykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgcGFuRW5kSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycpKSB7XG4gICAgICAgIGUuZGF0YS5jaGFydC5kYXRhKCdwYW5uaW5nJywgZmFsc2UpLmNzcygnY3Vyc29yJywgJ2RlZmF1bHQnKS5vZmYoJ21vdXNlbW92ZScpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBiaW5kUGFuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgdGhpcy4kY2hhcnQub24oJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgdGhpcy5wYW5TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ21vdXNldXAgdG91Y2hlbmQnLCB7ICdjaGFydCc6IHRoaXMuJGNoYXJ0IH0sIHRoaXMucGFuRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIHVuYmluZFBhbjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdhdXRvJyk7XG4gICAgICB0aGlzLiRjaGFydC5vZmYoJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgdGhpcy5wYW5TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCdtb3VzZXVwIHRvdWNoZW5kJywgdGhpcy5wYW5FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgem9vbVdoZWVsSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBuZXdTY2FsZSAgPSAxICsgKGUub3JpZ2luYWxFdmVudC5kZWx0YVkgPiAwID8gLTAuMiA6IDAuMik7XG4gICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgbmV3U2NhbGUpO1xuICAgIH0sXG4gICAgLy9cbiAgICB6b29tU3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCB0cnVlKTtcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcsIGRpc3QpO1xuICAgICAgfVxuICAgIH0sXG4gICAgem9vbWluZ0hhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBpZihvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnKSkge1xuICAgICAgICB2YXIgZGlzdCA9IG9jLmdldFBpbmNoRGlzdChlKTtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdEVuZCcsIGRpc3QpO1xuICAgICAgfVxuICAgIH0sXG4gICAgem9vbUVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBpZihvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnKSkge1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCBmYWxzZSk7XG4gICAgICAgIHZhciBkaWZmID0gb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdEVuZCcpIC0gb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdFN0YXJ0Jyk7XG4gICAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAxLjIpO1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIDAuOCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYmluZFpvb206IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd3aGVlbCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21XaGVlbEhhbmRsZXIpO1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub24oJ3RvdWNoc3RhcnQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCd0b3VjaG1vdmUnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29taW5nSGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2hlbmQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICB1bmJpbmRab29tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3doZWVsJywgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9mZigndG91Y2hzdGFydCcsIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vZmYoJ3RvdWNobW92ZScsIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaGVuZCcsIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICBnZXRQaW5jaERpc3Q6IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSAqIChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSArXG4gICAgICAoZS50b3VjaGVzWzBdLmNsaWVudFkgLSBlLnRvdWNoZXNbMV0uY2xpZW50WSkgKiAoZS50b3VjaGVzWzBdLmNsaWVudFkgLSBlLnRvdWNoZXNbMV0uY2xpZW50WSkpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzZXRDaGFydFNjYWxlOiBmdW5jdGlvbiAoJGNoYXJ0LCBuZXdTY2FsZSkge1xuICAgICAgdmFyIG9wdHMgPSAkY2hhcnQuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgdmFyIG1hdHJpeCA9ICcnO1xuICAgICAgdmFyIHRhcmdldFNjYWxlID0gMTtcbiAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICB0YXJnZXRTY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KG1hdHJpeFszXSkgKiBuZXdTY2FsZSk7XG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbMV0pICogbmV3U2NhbGUpO1xuICAgICAgICAgIGlmICh0YXJnZXRTY2FsZSA+IG9wdHMuem9vbW91dExpbWl0ICYmIHRhcmdldFNjYWxlIDwgb3B0cy56b29taW5MaW1pdCkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZTNkKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJywgMSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYnVpbGRKc29uRFM6IGZ1bmN0aW9uICgkbGkpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBzdWJPYmogPSB7XG4gICAgICAgICduYW1lJzogJGxpLmNvbnRlbnRzKCkuZXEoMCkudGV4dCgpLnRyaW0oKSxcbiAgICAgICAgJ3JlbGF0aW9uc2hpcCc6ICgkbGkucGFyZW50KCkucGFyZW50KCkuaXMoJ2xpJykgPyAnMSc6ICcwJykgKyAoJGxpLnNpYmxpbmdzKCdsaScpLmxlbmd0aCA/IDE6IDApICsgKCRsaS5jaGlsZHJlbigndWwnKS5sZW5ndGggPyAxIDogMClcbiAgICAgIH07XG4gICAgICBpZiAoJGxpWzBdLmlkKSB7XG4gICAgICAgIHN1Yk9iai5pZCA9ICRsaVswXS5pZDtcbiAgICAgIH1cbiAgICAgICRsaS5jaGlsZHJlbigndWwnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQuYnVpbGRKc29uRFMoJCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViT2JqO1xuICAgIH0sXG4gICAgLy9cbiAgICBhdHRhY2hSZWw6IGZ1bmN0aW9uIChkYXRhLCBmbGFncykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgdGhhdC5hdHRhY2hSZWwoaXRlbSwgJzEnICsgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMSA/IDEgOiAwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvL1xuICAgIGxvb3BDaGFydDogZnVuY3Rpb24gKCRjaGFydCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0ciA9ICRjaGFydC5maW5kKCd0cjpmaXJzdCcpO1xuICAgICAgdmFyIHN1Yk9iaiA9IHsgJ2lkJzogJHRyLmZpbmQoJy5ub2RlJylbMF0uaWQgfTtcbiAgICAgICR0ci5zaWJsaW5ncygnOmxhc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQubG9vcENoYXJ0KCQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Yk9iajtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0SGllcmFyY2h5OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuJGNoYXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gJ0Vycm9yOiBvcmdjaGFydCBkb2VzIG5vdCBleGlzdCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBub2RlcyBkbyBub3QgZXhpc3QnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCF0aGlzLiRjaGFydC5maW5kKCcubm9kZScpWzBdLmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBOb2RlcyBvZiBvcmdoY2FydCB0byBiZSBleHBvcnRlZCBtdXN0IGhhdmUgaWQgYXR0cmlidXRlISc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sb29wQ2hhcnQodGhpcy4kY2hhcnQpO1xuICAgIH0sXG4gICAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICAgIGdldE5vZGVTdGF0ZTogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgdmFyICR0YXJnZXQgPSB7fTtcbiAgICAgIHZhciByZWxhdGlvbiA9IHJlbGF0aW9uIHx8ICdzZWxmJztcbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCR0YXJnZXQuaXMoJy5oaWRkZW4nKSB8fCAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAhJHRhcmdldC5wYXJlbnQoKS5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGU7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICghKCgkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmxlbmd0aCAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpIHx8XG4gICAgICAgICAgICAoJHRhcmdldC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLmxlbmd0aCAmJiAkdGFyZ2V0LmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuaXMoJy5oaWRkZW4nKSkgfHxcbiAgICAgICAgICAgICgkdGFyZ2V0LnBhcmVudCgpLmlzKCdsaScpICYmICgkdGFyZ2V0LmNsb3Nlc3QoJ3VsJykuaXMoJy5oaWRkZW4nKSB8fCAkdGFyZ2V0LmNsb3Nlc3QoJ3ZlcnRpY2FsTm9kZXMnKS5pcygnLmhpZGRlbicpKSlcbiAgICAgICAgICApKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4geyAnZXhpc3QnOiBmYWxzZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgIH0sXG4gICAgLy8gZmluZCB0aGUgcmVsYXRlZCBub2Rlc1xuICAgIGdldFJlbGF0ZWROb2RlczogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgaWYgKCEkbm9kZSB8fCAhKCRub2RlIGluc3RhbmNlb2YgJCkgfHwgISRub2RlLmlzKCcubm9kZScpKSB7XG4gICAgICAgIHJldHVybiAkKCk7XG4gICAgICB9XG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5wYXJlbnQoKS5jaGlsZHJlbignOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGhpZGVQYXJlbnRFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBldmVudC5kYXRhLnVwcGVyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpLnNsaWNlKDEpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBhbmNlc3RvciBub2RlIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKTtcbiAgICAgIGlmICgkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzXG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUpO1xuICAgICAgfVxuICAgICAgLy8gaGlkZSB0aGUgbGluZXNcbiAgICAgIHZhciAkbGluZXMgPSAkdXBwZXJMZXZlbC5zbGljZSgxKTtcbiAgICAgICRsaW5lcy5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAvLyBoaWRlIHRoZSBzdXBlcmlvciBub2RlcyB3aXRoIHRyYW5zaXRpb25cbiAgICAgIHZhciAkcGFyZW50ID0gJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLm5vZGUnKTtcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkcGFyZW50KS52aXNpYmxlKSB7XG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3VwcGVyTGV2ZWwnOiAkdXBwZXJMZXZlbCB9LCB0aGlzLmhpZGVQYXJlbnRFbmQpO1xuICAgICAgfVxuICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgbm9kZSBoYXMgdGhlIHBhcmVudCBub2RlLCBoaWRlIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJHBhcmVudCwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlUGFyZW50KCRwYXJlbnQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2hvd1BhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGUgPSBldmVudC5kYXRhLm5vZGU7XG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVmVydGljYWxBcnJvdygkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93UGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBzdXBlcmlvciBsZXZlbFxuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgbGluZVxuICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oKS5zbGljZSgxLCAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgLy8gc2hvdyBwYXJlbnQgbm9kZSB3aXRoIGFuaW1hdGlvblxuICAgICAgdmFyICRwYXJlbnQgPSAkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcubm9kZScpO1xuICAgICAgdGhpcy5yZXBhaW50KCRwYXJlbnRbMF0pO1xuICAgICAgJHBhcmVudC5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlIH0sIHRoaXMuc2hvd1BhcmVudEVuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIHN0b3BBamF4OiBmdW5jdGlvbiAoJG5vZGVMZXZlbCkge1xuICAgICAgaWYgKCRub2RlTGV2ZWwuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGVMZXZlbC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpc1Zpc2libGVOb2RlOiBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE5vZGVTdGF0ZSgkKGVsZW0pKS52aXNpYmxlO1xuICAgIH0sXG4gICAgLy9cbiAgICBoaWRlQ2hpbGRyZW5FbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuZGF0YS52aXNpYmxlTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGlmIChldmVudC5kYXRhLmlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgIGV2ZW50LmRhdGEubG93ZXJMZXZlbC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudC5kYXRhLnZpc2libGVOb2Rlcy5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykucHJldkFsbCgnLmxpbmVzJykucmVtb3ZlQXR0cignc3R5bGUnKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAuc2libGluZ3MoJy5ub2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgZXZlbnQuZGF0YS5sb3dlckxldmVsLmxhc3QoKS5maW5kKCcudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oZXZlbnQuZGF0YS5ub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coZXZlbnQuZGF0YS5ub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGRlc2NlbmRhbnQgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZUNoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciAkbG93ZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIHRoaXMuc3RvcEFqYXgoJGxvd2VyTGV2ZWwubGFzdCgpKTtcbiAgICAgIHZhciAkdmlzaWJsZU5vZGVzID0gJGxvd2VyTGV2ZWwubGFzdCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICRsb3dlckxldmVsLmxhc3QoKS5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIGlmICghaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgICAgJHZpc2libGVOb2Rlcy5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykucHJldkFsbCgnLmxpbmVzJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXBhaW50KCR2aXNpYmxlTm9kZXMuZ2V0KDApKTtcbiAgICAgICR2aXNpYmxlTm9kZXMuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd2aXNpYmxlTm9kZXMnOiAkdmlzaWJsZU5vZGVzLCAnbG93ZXJMZXZlbCc6ICRsb3dlckxldmVsLCAnaXNWZXJ0aWNhbERlc2MnOiBpc1ZlcnRpY2FsRGVzYywgJ25vZGUnOiAkbm9kZSB9LCB0aGlzLmhpZGVDaGlsZHJlbkVuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJGxldmVscyA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICRsZXZlbHMuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICB2YXIgJGRlc2NlbmRhbnRzID0gaXNWZXJ0aWNhbERlc2NcbiAgICAgICAgPyAkbGV2ZWxzLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSlcbiAgICAgICAgOiAkbGV2ZWxzLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5lcSgyKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0JykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKTtcbiAgICAgIC8vIHRoZSB0d28gZm9sbG93aW5nIHN0YXRlbWVudHMgYXJlIHVzZWQgdG8gZW5mb3JjZSBicm93c2VyIHRvIHJlcGFpbnRcbiAgICAgIHRoaXMucmVwYWludCgkZGVzY2VuZGFudHMuZ2V0KDApKTtcbiAgICAgICRkZXNjZW5kYW50cy5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkZGVzY2VuZGFudHMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICB0aGF0LnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgaGlkZVNpYmxpbmdzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcbiAgICAgIHZhciAkbm9kZUNvbnRhaW5lciA9IGV2ZW50LmRhdGEubm9kZUNvbnRhaW5lcjtcbiAgICAgIHZhciBkaXJlY3Rpb24gPSBldmVudC5kYXRhLmRpcmVjdGlvbjtcbiAgICAgIGV2ZW50LmRhdGEubGluZXMucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgIHZhciAkc2libGluZ3MgPSBkaXJlY3Rpb24gPyAoZGlyZWN0aW9uID09PSAnbGVmdCcgPyAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCc6bm90KC5oaWRkZW4pJykgOiAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCc6bm90KC5oaWRkZW4pJykpIDogJG5vZGVDb250YWluZXIuc2libGluZ3MoKTtcbiAgICAgICRub2RlQ29udGFpbmVyLmNsb3Nlc3QoJy5ub2RlcycpLnByZXYoKS5jaGlsZHJlbignOm5vdCguaGlkZGVuKScpXG4gICAgICAgIC5zbGljZSgxLCBkaXJlY3Rpb24gPyAkc2libGluZ3MubGVuZ3RoICogMiArIDEgOiAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICAkc2libGluZ3MuZmluZCgnLm5vZGU6Z3QoMCknKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpLmFkZENsYXNzKCdzbGlkZS11cCcpO1xuICAgICAgJHNpYmxpbmdzLmZpbmQoJy5saW5lcywgLm5vZGVzLCAudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAuZW5kKCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbm9kZUNvbnRhaW5lciA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XG4gICAgICBpZiAoJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRub2RlQ29udGFpbmVyLnByZXZBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1yaWdodCcpO1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWxlZnQnKTtcbiAgICAgIH1cbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9ICRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNsaWRpbmcnKTtcbiAgICAgIHZhciAkbGluZXMgPSAkYW5pbWF0ZWROb2Rlcy5jbG9zZXN0KCcubm9kZXMnKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAkYW5pbWF0ZWROb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUsICdub2RlQ29udGFpbmVyJzogJG5vZGVDb250YWluZXIsICdkaXJlY3Rpb24nOiBkaXJlY3Rpb24sICdhbmltYXRlZE5vZGVzJzogJGFuaW1hdGVkTm9kZXMsICdsaW5lcyc6ICRsaW5lcyB9LCB0aGlzLmhpZGVTaWJsaW5nc0VuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc2hvd1NpYmxpbmdzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcbiAgICAgIGV2ZW50LmRhdGEudmlzaWJsZU5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93U2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAvLyBmaXJzdGx5LCBzaG93IHRoZSBzaWJsaW5nIHRkIHRhZ3NcbiAgICAgIHZhciAkc2libGluZ3MgPSAkKCk7XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldkFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHRBbGwoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICAvLyBzZWNvbmRseSwgc2hvdyB0aGUgbGluZXNcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnNsaWNlKDAsICRzaWJsaW5ncy5sZW5ndGggKiAyKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXJkbHksIGRvIHNvbWUgY2xlYW5pbmcgc3R1ZmZcbiAgICAgIGlmICghdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlKSB7XG4gICAgICAgICR1cHBlckxldmVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgdmFyIHBhcmVudCA9ICR1cHBlckxldmVsLmZpbmQoJy5ub2RlJylbMF07XG4gICAgICAgIHRoaXMucmVwYWludChwYXJlbnQpO1xuICAgICAgICAkKHBhcmVudCkuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBsYXN0bHksIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgd2l0aCBhbmltYXRpb25cbiAgICAgIHZhciAkdmlzaWJsZU5vZGVzID0gJHNpYmxpbmdzLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMucmVwYWludCgkdmlzaWJsZU5vZGVzLmdldCgwKSk7XG4gICAgICAkdmlzaWJsZU5vZGVzLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWxlZnQgc2xpZGUtcmlnaHQnKTtcbiAgICAgICR2aXNpYmxlTm9kZXMuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAndmlzaWJsZU5vZGVzJzogJHZpc2libGVOb2RlcyB9LCB0aGlzLnNob3dTaWJsaW5nc0VuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICAgIHN0YXJ0TG9hZGluZzogZnVuY3Rpb24gKCRlZGdlKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gdGhpcy4kY2hhcnQ7XG4gICAgICBpZiAodHlwZW9mICRjaGFydC5kYXRhKCdpbkFqYXgnKSAhPT0gJ3VuZGVmaW5lZCcgJiYgJGNoYXJ0LmRhdGEoJ2luQWpheCcpID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgJGVkZ2UuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgJGVkZ2UucGFyZW50KCkuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKVxuICAgICAgICAuY2hpbGRyZW4oKS5ub3QoJy5zcGlubmVyJykuY3NzKCdvcGFjaXR5JywgMC4yKTtcbiAgICAgICRjaGFydC5kYXRhKCdpbkFqYXgnLCB0cnVlKTtcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgLy8gdGVybWluYXRlIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICAgIGVuZExvYWRpbmc6IGZ1bmN0aW9uICgkZWRnZSkge1xuICAgICAgdmFyICRub2RlID0gJGVkZ2UucGFyZW50KCk7XG4gICAgICAkZWRnZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkbm9kZS5maW5kKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgJG5vZGUuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgdGhpcy4kY2hhcnQuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9LFxuICAgIC8vIHdoZXRoZXIgdGhlIGN1cnNvciBpcyBob3ZlcmluZyBvdmVyIHRoZSBub2RlXG4gICAgaXNJbkFjdGlvbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICByZXR1cm4gJG5vZGUuY2hpbGRyZW4oJy5lZGdlJykuYXR0cignY2xhc3MnKS5pbmRleE9mKCdmYS0nKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0sXG4gICAgLy9cbiAgICBzd2l0Y2hWZXJ0aWNhbEFycm93OiBmdW5jdGlvbiAoJGFycm93KSB7XG4gICAgICAkYXJyb3cudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgfSxcbiAgICAvL1xuICAgIHN3aXRjaEhvcml6b250YWxBcnJvdzogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgb3B0cyA9ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCAmJiAodHlwZW9mIG9wdHMuYWpheFVSTCA9PT0gJ3VuZGVmaW5lZCcgfHwgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnKSkpIHtcbiAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XG4gICAgICAgIGlmICgkcHJldlNpYi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICBpZiAoJG5leHRTaWIubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgJHNpYnMgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIHZhciBzaWJzVmlzaWJsZSA9ICRzaWJzLmxlbmd0aCA/ICEkc2licy5pcygnLmhpZGRlbicpIDogZmFsc2U7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcsIHNpYnNWaXNpYmxlKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgcmVwYWludDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIG5vZGUuc3R5bGUub2Zmc2V0V2lkdGggPSBub2RlLm9mZnNldFdpZHRoO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBub2RlRW50ZXJMZWF2ZUhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCksIGZsYWcgPSBmYWxzZTtcbiAgICAgIHZhciAkdG9wRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpO1xuICAgICAgdmFyICRyaWdodEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpO1xuICAgICAgdmFyICRib3R0b21FZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJyk7XG4gICAgICB2YXIgJGxlZnRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpO1xuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuICAgICAgICBpZiAoJHRvcEVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgZmxhZyA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykudmlzaWJsZTtcbiAgICAgICAgICAkdG9wRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcsICFmbGFnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgZmxhZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRib3R0b21FZGdlLmxlbmd0aCkge1xuICAgICAgICAgIGZsYWcgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ2NoaWxkcmVuJykudmlzaWJsZTtcbiAgICAgICAgICAkYm90dG9tRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgZmxhZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRsZWZ0RWRnZS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcuZWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwIGZhLWNoZXZyb24tZG93biBmYS1jaGV2cm9uLXJpZ2h0IGZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBub2RlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGNoYXJ0LmZpbmQoJy5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgfSxcbiAgICAvLyBsb2FkIG5ldyBub2RlcyBieSBhamF4XG4gICAgbG9hZE5vZGVzOiBmdW5jdGlvbiAocmVsLCB1cmwsICRlZGdlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICQuYWpheCh7ICd1cmwnOiB1cmwsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKHRoYXQuJGNoYXJ0LmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgaWYgKHJlbCA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkUGFyZW50KCRlZGdlLnBhcmVudCgpLCBkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHJlbCA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICAgICAgaWYgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkQ2hpbGRyZW4oJGVkZ2UucGFyZW50KCksIGRhdGEsICQuZXh0ZW5kKHt9LCBvcHRzLCB7IGRlcHRoOiAwIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGRhdGEuc2libGluZ3MgfHwgZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICB0aGF0LmFkZFNpYmxpbmdzKCRlZGdlLnBhcmVudCgpLCBkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0ICcgKyByZWwgKyAnIGRhdGEnKTtcbiAgICAgIH0pXG4gICAgICAuYWx3YXlzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5lbmRMb2FkaW5nKCRlZGdlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICB0b3BFZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0b3BFZGdlID0gJChldmVudC50YXJnZXQpO1xuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICB2YXIgcGFyZW50U3RhdGUgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpO1xuICAgICAgaWYgKHBhcmVudFN0YXRlLmV4aXN0KSB7XG4gICAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xuICAgICAgICBpZiAoJHBhcmVudC5pcygnLnNsaWRpbmcnKSkgeyByZXR1cm47IH1cbiAgICAgICAgLy8gaGlkZSB0aGUgYW5jZXN0b3Igbm9kZXMgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICAgIGlmIChwYXJlbnRTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgdGhpcy5oaWRlUGFyZW50KCRub2RlKTtcbiAgICAgICAgICAkcGFyZW50Lm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICAgICAgdGhhdC5zd2l0Y2hWZXJ0aWNhbEFycm93KCR0b3BFZGdlKTtcbiAgICAgICAgICAgICAgdGhhdC5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBhbmNlc3RvcnMgYW5kIHNpYmxpbmdzXG4gICAgICAgICAgdGhpcy5zaG93UGFyZW50KCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXNcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRMb2FkaW5nKCR0b3BFZGdlKSkge1xuICAgICAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgIHZhciB1cmwgPSAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnBhcmVudCkgPyBvcHRzLmFqYXhVUkwucGFyZW50KGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnBhcmVudCArICRub2RlWzBdLmlkO1xuICAgICAgICAgIHRoaXMubG9hZE5vZGVzKCdwYXJlbnQnLCB1cmwsICR0b3BFZGdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBib3R0b21FZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdmFyICRib3R0b21FZGdlID0gJChldmVudC50YXJnZXQpO1xuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICB2YXIgY2hpbGRyZW5TdGF0ZSA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKTtcbiAgICAgIGlmIChjaGlsZHJlblN0YXRlLmV4aXN0KSB7XG4gICAgICAgIHZhciAkY2hpbGRyZW4gPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICBpZiAoJGNoaWxkcmVuLmZpbmQoJy5zbGlkaW5nJykubGVuZ3RoKSB7IHJldHVybjsgfVxuICAgICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgICBpZiAoY2hpbGRyZW5TdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgdGhpcy5oaWRlQ2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xuICAgICAgICAgIHRoaXMuc2hvd0NoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRMb2FkaW5nKCRib3R0b21FZGdlKSkge1xuICAgICAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgIHZhciB1cmwgPSAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmNoaWxkcmVuKSA/IG9wdHMuYWpheFVSTC5jaGlsZHJlbihldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5jaGlsZHJlbiArICRub2RlWzBdLmlkO1xuICAgICAgICAgIHRoaXMubG9hZE5vZGVzKCdjaGlsZHJlbicsIHVybCwgJGJvdHRvbUVkZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGhFZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdmFyICRoRWRnZSA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgIHZhciAkbm9kZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgc2libGluZ3NTdGF0ZSA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKTtcbiAgICAgIGlmIChzaWJsaW5nc1N0YXRlLmV4aXN0KSB7XG4gICAgICAgIHZhciAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIGlmICgkc2libGluZ3MuZmluZCgnLnNsaWRpbmcnKS5sZW5ndGgpIHsgcmV0dXJuOyB9XG4gICAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCkge1xuICAgICAgICAgIHZhciAkcHJldlNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldigpO1xuICAgICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICAgIGlmICgkaEVkZ2UuaXMoJy5sZWZ0RWRnZScpKSB7XG4gICAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncygkbm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzaWJsaW5nc1N0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3MoJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbG9hZCB0aGUgbmV3IHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICBpZiAodGhpcy5zdGFydExvYWRpbmcoJGhFZGdlKSkge1xuICAgICAgICAgIHZhciBub2RlSWQgPSAkbm9kZVswXS5pZDtcbiAgICAgICAgICB2YXIgdXJsID0gKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykuZXhpc3QpID9cbiAgICAgICAgICAgICgkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnNpYmxpbmdzKSA/IG9wdHMuYWpheFVSTC5zaWJsaW5ncyhldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5zaWJsaW5ncyArIG5vZGVJZCkgOlxuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuZmFtaWxpZXMpID8gb3B0cy5hamF4VVJMLmZhbWlsaWVzKGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLmZhbWlsaWVzICsgbm9kZUlkKTtcbiAgICAgICAgICB0aGlzLmxvYWROb2Rlcygnc2libGluZ3MnLCB1cmwsICRoRWRnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGNyZWF0ZSBub2RlXG4gICAgY3JlYXRlTm9kZTogZnVuY3Rpb24gKG5vZGVEYXRhLCBsZXZlbCwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgaWYgKCFub2RlRGF0YS5jaGlsZHJlbikgeyBub2RlRGF0YS5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAkLmVhY2gobm9kZURhdGEuY2hpbGRyZW4sIGZ1bmN0aW9uIChpbmRleCwgY2hpbGQpIHtcbiAgICAgICAgY2hpbGQucGFyZW50SWQgPSBub2RlRGF0YS5pZDtcbiAgICAgIH0pO1xuICAgICAgdmFyIGR0ZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgIC8vIGNvbnN0cnVjdCB0aGUgY29udGVudCBvZiBub2RlXG4gICAgICB2YXIgJG5vZGVEaXYgPSAkKCc8ZGl2JyArIChvcHRzLmRyYWdnYWJsZSA/ICcgZHJhZ2dhYmxlPVwidHJ1ZVwiJyA6ICcnKSArIChub2RlRGF0YVtvcHRzLm5vZGVJZF0gPyAnIGlkPVwiJyArIG5vZGVEYXRhW29wdHMubm9kZUlkXSArICdcIicgOiAnJykgKyAobm9kZURhdGEucGFyZW50SWQgPyAnIGRhdGEtcGFyZW50PVwiJyArIG5vZGVEYXRhLnBhcmVudElkICsgJ1wiJyA6ICcnKSArICc+JylcbiAgICAgICAgLmFkZENsYXNzKCdub2RlICcgKyAobm9kZURhdGEuY2xhc3NOYW1lIHx8ICcnKSArICAobGV2ZWwgPj0gb3B0cy5kZXB0aCA/ICcgc2xpZGUtdXAnIDogJycpKTtcbiAgICAgIGlmIChvcHRzLm5vZGVUZW1wbGF0ZSkge1xuICAgICAgICAkbm9kZURpdi5hcHBlbmQob3B0cy5ub2RlVGVtcGxhdGUobm9kZURhdGEpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGRpdiBjbGFzcz1cInRpdGxlXCI+JyArIG5vZGVEYXRhW29wdHMubm9kZVRpdGxlXSArICc8L2Rpdj4nKVxuICAgICAgICAgIC5hcHBlbmQodHlwZW9mIG9wdHMubm9kZUNvbnRlbnQgIT09ICd1bmRlZmluZWQnID8gJzxkaXYgY2xhc3M9XCJjb250ZW50XCI+JyArIChub2RlRGF0YVtvcHRzLm5vZGVDb250ZW50XSB8fCAnJykgKyAnPC9kaXY+JyA6ICcnKTtcbiAgICAgIH1cbiAgICAgIC8vIGFwcGVuZCA0IGRpcmVjdGlvbiBhcnJvd3Mgb3IgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvbnNcbiAgICAgIHZhciBmbGFncyA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnJztcbiAgICAgIGlmIChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPiBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgaWYgKChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCAmJiBOdW1iZXIoZmxhZ3Muc3Vic3RyKDIsMSkpKSB7XG4gICAgICAgICAgdmFyIGljb24gPSBsZXZlbCArIDEgID49IG9wdHMuZGVwdGggPyAncGx1cycgOiAnbWludXMnO1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJ0b2dnbGVCdG4gZmEgZmEtJyArIGljb24gKyAnLXNxdWFyZVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMCwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihOdW1iZXIoZmxhZ3Muc3Vic3RyKDEsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPicgK1xuICAgICAgICAgICAgJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihOdW1iZXIoZmxhZ3Muc3Vic3RyKDIsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+JylcbiAgICAgICAgICAgIC5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbm9kZURpdi5vbignbW91c2VlbnRlciBtb3VzZWxlYXZlJywgdGhpcy5ub2RlRW50ZXJMZWF2ZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCB0aGlzLm5vZGVDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvcEVkZ2UnLCB7ICdub2RlRGF0YSc6IG5vZGVEYXRhIH0sIHRoaXMudG9wRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcuYm90dG9tRWRnZScsIHsgJ25vZGVEYXRhJzogbm9kZURhdGEgfSwgdGhpcy5ib3R0b21FZGdlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5sZWZ0RWRnZSwgLnJpZ2h0RWRnZScsIHsgJ25vZGVEYXRhJzogbm9kZURhdGEgfSwgdGhpcy5oRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgICAgLy8gZXZlbnQgaGFuZGxlciBmb3IgdG9nZ2xlIGJ1dHRvbnMgaW4gSHlicmlkKGhvcml6b250YWwgKyB2ZXJ0aWNhbCkgT3JnQ2hhcnRcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9nZ2xlQnRuJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgdmFyICRkZXNjV3JhcHBlciA9ICR0aGlzLnBhcmVudCgpLm5leHQoKTtcbiAgICAgICAgdmFyICRkZXNjZW5kYW50cyA9ICRkZXNjV3JhcHBlci5maW5kKCcubm9kZScpO1xuICAgICAgICB2YXIgJGNoaWxkcmVuID0gJGRlc2NXcmFwcGVyLmNoaWxkcmVuKCkuY2hpbGRyZW4oJy5ub2RlJyk7XG4gICAgICAgIGlmICgkY2hpbGRyZW4uaXMoJy5zbGlkaW5nJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICR0aGlzLnRvZ2dsZUNsYXNzKCdmYS1wbHVzLXNxdWFyZSBmYS1taW51cy1zcXVhcmUnKTtcbiAgICAgICAgaWYgKCRkZXNjZW5kYW50cy5lcSgwKS5pcygnLnNsaWRlLXVwJykpIHtcbiAgICAgICAgICAkZGVzY1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIHRoYXQucmVwYWludCgkY2hpbGRyZW4uZ2V0KDApKTtcbiAgICAgICAgICAkY2hpbGRyZW4uYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRjaGlsZHJlbi5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRkZXNjZW5kYW50cy5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGRlc2NlbmRhbnRzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICAgICAgICAvLyAkZGVzY1dyYXBwZXIuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgJGRlc2NlbmRhbnRzLmNsb3Nlc3QoJ3VsJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgICRkZXNjZW5kYW50cy5maW5kKCcudG9nZ2xlQnRuJykucmVtb3ZlQ2xhc3MoJ2ZhLW1pbnVzLXNxdWFyZScpLmFkZENsYXNzKCdmYS1wbHVzLXNxdWFyZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKG9wdHMuZHJhZ2dhYmxlKSB7XG4gICAgICAgICRub2RlRGl2Lm9uKCdkcmFnc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciBvcmlnRXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xuICAgICAgICAgIHZhciBpc0ZpcmVmb3ggPSAvZmlyZWZveC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICBpZiAoaXNGaXJlZm94KSB7XG4gICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvaHRtbCcsICdoYWNrIGZvciBmaXJlZm94Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGlmIHVzZXJzIGVuYWJsZSB6b29tIG9yIGRpcmVjdGlvbiBvcHRpb25zXG4gICAgICAgICAgaWYgKCRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNzcygndHJhbnNmb3JtJykgIT09ICdub25lJykge1xuICAgICAgICAgICAgdmFyIGdob3N0Tm9kZSwgbm9kZUNvdmVyO1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2hvc3Qtbm9kZScpKSB7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICAgICAgICBnaG9zdE5vZGUuY2xhc3NMaXN0LmFkZCgnZ2hvc3Qtbm9kZScpO1xuICAgICAgICAgICAgICBub2RlQ292ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpO1xuICAgICAgICAgICAgICBnaG9zdE5vZGUuYXBwZW5kQ2hpbGQobm9kZUNvdmVyKTtcbiAgICAgICAgICAgICAgJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuYXBwZW5kKGdob3N0Tm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBnaG9zdE5vZGUgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jaGlsZHJlbignLmdob3N0LW5vZGUnKS5nZXQoMCk7XG4gICAgICAgICAgICAgIG5vZGVDb3ZlciA9ICQoZ2hvc3ROb2RlKS5jaGlsZHJlbigpLmdldCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFuc1ZhbHVlcyA9ICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNzcygndHJhbnNmb3JtJykuc3BsaXQoJywnKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KChvcHRzLmRpcmVjdGlvbiA9PT0gJ3QyYicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSA/IHRyYW5zVmFsdWVzWzBdLnNsaWNlKHRyYW5zVmFsdWVzWzBdLmluZGV4T2YoJygnKSArIDEpIDogdHJhbnNWYWx1ZXNbMV0pKTtcbiAgICAgICAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkpO1xuICAgICAgICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJG5vZGVEaXYub3V0ZXJIZWlnaHQoZmFsc2UpKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3gnLDUgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd5Jyw1ICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAxMjAgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCA0MCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J4JywgNCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J5JywgNCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIDEgKiBzY2FsZSk7XG4gICAgICAgICAgICB2YXIgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICB2YXIgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdsMnInKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICAgIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpIHtcbiAgICAgICAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgICAgeU9mZnNldCA9ICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNGaXJlZm94KSB7IC8vIGhhY2sgZm9yIG9sZCB2ZXJzaW9uIG9mIEZpcmVmb3goPCA0OC4wKVxuICAgICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xuICAgICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAncmdiKDE5MSwgMCwgMCknKTtcbiAgICAgICAgICAgICAgdmFyIGdob3N0Tm9kZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlV3JhcHBlci5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJyArIChuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhnaG9zdE5vZGUpO1xuICAgICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGVXcmFwcGVyLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZSwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciAkZHJhZ2dlZCA9ICQodGhpcyk7XG4gICAgICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICB2YXIgJGRyYWdIaWVyID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5maW5kKCcubm9kZScpO1xuICAgICAgICAgICRkcmFnZ2VkLmNsb3Nlc3QoJy5vcmdjaGFydCcpXG4gICAgICAgICAgICAuZGF0YSgnZHJhZ2dlZCcsICRkcmFnZ2VkKVxuICAgICAgICAgICAgLmZpbmQoJy5ub2RlJykuZWFjaChmdW5jdGlvbihpbmRleCwgbm9kZSkge1xuICAgICAgICAgICAgICBpZiAoJGRyYWdIaWVyLmluZGV4KG5vZGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSkge1xuICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKCRkcmFnZ2VkLCAkZHJhZ1pvbmUsICQobm9kZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoISQodGhpcykuaXMoJy5hbGxvd2VkRHJvcCcpKSB7XG4gICAgICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmZpbmQoJy5hbGxvd2VkRHJvcCcpLnJlbW92ZUNsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciAkZHJvcFpvbmUgPSAkKHRoaXMpO1xuICAgICAgICAgIHZhciAkb3JnY2hhcnQgPSAkZHJvcFpvbmUuY2xvc2VzdCgnLm9yZ2NoYXJ0Jyk7XG4gICAgICAgICAgdmFyICRkcmFnZ2VkID0gJG9yZ2NoYXJ0LmRhdGEoJ2RyYWdnZWQnKTtcbiAgICAgICAgICB2YXIgJGRyYWdab25lID0gJGRyYWdnZWQuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5lcSgwKS5jaGlsZHJlbigpO1xuICAgICAgICAgIHZhciBkcm9wRXZlbnQgPSAkLkV2ZW50KCdub2RlZHJvcC5vcmdjaGFydCcpO1xuICAgICAgICAgICRvcmdjaGFydC50cmlnZ2VyKGRyb3BFdmVudCwgeyAnZHJhZ2dlZE5vZGUnOiAkZHJhZ2dlZCwgJ2RyYWdab25lJzogJGRyYWdab25lLmNoaWxkcmVuKCksICdkcm9wWm9uZSc6ICRkcm9wWm9uZSB9KTtcbiAgICAgICAgICBpZiAoZHJvcEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZpcnN0bHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyb3Agem9uZVxuICAgICAgICAgIGlmICghJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5sZW5ndGgpIHsgLy8gaWYgdGhlIGRyb3Agem9uZSBpcyBhIGxlYWYgbm9kZVxuICAgICAgICAgICAgJGRyb3Bab25lLmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXG4gICAgICAgICAgICAgIC5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJywgMilcbiAgICAgICAgICAgICAgLnBhcmVudCgpLmFmdGVyKCc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nXG4gICAgICAgICAgICAgICsgJzx0ciBjbGFzcz1cImxpbmVzXCI+PHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+PC90cj4nXG4gICAgICAgICAgICAgICsgJzx0ciBjbGFzcz1cIm5vZGVzXCI+PC90cj4nKVxuICAgICAgICAgICAgICAuc2libGluZ3MoJzpsYXN0JykuYXBwZW5kKCRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpLmVuZCgpLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZHJvcENvbHNwYW4gPSBwYXJzZUludCgkZHJvcFpvbmUucGFyZW50KCkuYXR0cignY29sc3BhbicpKSArIDI7XG4gICAgICAgICAgICB2YXIgaG9yaXpvbnRhbEVkZ2VzID0gJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPic7XG4gICAgICAgICAgICAkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5uZXh0KCkuYWRkQmFjaygpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyb3BDb2xzcGFuKTtcbiAgICAgICAgICAgIGlmICghJGRyYWdnZWQuZmluZCgnLmhvcml6b250YWxFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICRkcmFnZ2VkLmFwcGVuZChob3Jpem9udGFsRWRnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgxKS5jaGlsZHJlbignOmxhc3QnKS5iZWZvcmUoJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD4nKVxuICAgICAgICAgICAgICAuZW5kKCkubmV4dCgpLmFwcGVuZCgkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcbiAgICAgICAgICAgIHZhciAkZHJvcFNpYnMgPSAkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICAgIGlmICgkZHJvcFNpYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICRkcm9wU2licy5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc2Vjb25kbHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyYWdnZWQgbm9kZVxuICAgICAgICAgIHZhciBkcmFnQ29sc3BhbiA9IHBhcnNlSW50KCRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJykpO1xuICAgICAgICAgIGlmIChkcmFnQ29sc3BhbiA+IDIpIHtcbiAgICAgICAgICAgICRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxuICAgICAgICAgICAgICAucGFyZW50KCkubmV4dCgpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcbiAgICAgICAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbigpLnNsaWNlKDEsIDMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyICRkcmFnU2licyA9ICRkcmFnWm9uZS5wYXJlbnQoKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgICAgICAgaWYgKCRkcmFnU2licy5sZW5ndGggPT09MSkge1xuICAgICAgICAgICAgICAkZHJhZ1NpYnMuZmluZCgnLmhvcml6b250YWxFZGdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRkcmFnWm9uZS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcbiAgICAgICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcbiAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGFsbG93IHVzZXIgdG8gYXBwZW5kIGRvbSBtb2RpZmljYXRpb24gYWZ0ZXIgZmluaXNoaW5nIG5vZGUgY3JlYXRlIG9mIG9yZ2NoYXJ0XG4gICAgICBpZiAob3B0cy5jcmVhdGVOb2RlKSB7XG4gICAgICAgIG9wdHMuY3JlYXRlTm9kZSgkbm9kZURpdiwgbm9kZURhdGEpO1xuICAgICAgfVxuICAgICAgZHRkLnJlc29sdmUoJG5vZGVEaXYpO1xuICAgICAgcmV0dXJuIGR0ZC5wcm9taXNlKCk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBidWlsZCB0aGUgdHJlZVxuICAgIGJ1aWxkSGllcmFyY2h5OiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgbGV2ZWwsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJG5vZGVXcmFwcGVyO1xuICAgICAgLy8gQ29uc3RydWN0IHRoZSBub2RlXG4gICAgICB2YXIgJGNoaWxkTm9kZXMgPSBub2RlRGF0YS5jaGlsZHJlbjtcbiAgICAgIHZhciBoYXNDaGlsZHJlbiA9ICRjaGlsZE5vZGVzID8gJGNoaWxkTm9kZXMubGVuZ3RoIDogZmFsc2U7XG4gICAgICB2YXIgaXNWZXJ0aWNhbE5vZGUgPSAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoT2JqZWN0LmtleXMobm9kZURhdGEpLmxlbmd0aCA+IDEpIHsgLy8gaWYgbm9kZURhdGEgaGFzIG5lc3RlZCBzdHJ1Y3R1cmVcbiAgICAgICAgJG5vZGVXcmFwcGVyID0gaXNWZXJ0aWNhbE5vZGUgPyAkYXBwZW5kVG8gOiAkKCc8dGFibGU+Jyk7XG4gICAgICAgIGlmICghaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICAkYXBwZW5kVG8uYXBwZW5kKCRub2RlV3JhcHBlcik7XG4gICAgICAgIH1cbiAgICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwsIG9wdHMpKVxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xuICAgICAgICAgIGlmIChpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdik7XG4gICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdi53cmFwKCc8dHI+PHRkJyArIChoYXNDaGlsZHJlbiA/ICcgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiJyA6ICcnKSArICc+PC90ZD48L3RyPicpLmNsb3Nlc3QoJ3RyJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0IG5vZGUnKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5mZXJpb3Igbm9kZXMgYW5kIGNvbm5lY3Rpb25nIGxpbmVzXG4gICAgICBpZiAoaGFzQ2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPT09IDEpIHsgLy8gaWYgbm9kZURhdGEgaXMganVzdCBhbiBhcnJheVxuICAgICAgICAgICRub2RlV3JhcHBlciA9ICRhcHBlbmRUbztcbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNIaWRkZW4gPSAobGV2ZWwgKyAxID49IG9wdHMuZGVwdGggfHwgbm9kZURhdGEuY29sbGFwc2VkKSA/ICcgaGlkZGVuJyA6ICcnO1xuICAgICAgICB2YXIgaXNWZXJ0aWNhbExheWVyID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIC8vIGRyYXcgdGhlIGxpbmUgY2xvc2UgdG8gcGFyZW50IG5vZGVcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lcyBjbG9zZSB0byBjaGlsZHJlbiBub2Rlc1xuICAgICAgICB2YXIgbGluZUxheWVyID0gJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgZm9yICh2YXIgaT0xOyBpPCRjaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgfVxuICAgICAgICBsaW5lTGF5ZXIgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD48L3RyPic7XG4gICAgICAgIHZhciAkbm9kZUxheWVyO1xuICAgICAgICBpZiAoaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgICAgJG5vZGVMYXllciA9ICQoJzx1bD4nKTtcbiAgICAgICAgICBpZiAoaXNIaWRkZW4gJiYgb3B0cy5kZXB0aCArIDEgIT09IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICAgICAgJG5vZGVMYXllci5hZGRDbGFzcyhpc0hpZGRlbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChsZXZlbCArIDIgPT09IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgnPHRyIGNsYXNzPVwidmVydGljYWxOb2RlcycgKyBpc0hpZGRlbiArICdcIj48dGQ+PC90ZD48L3RyPicpXG4gICAgICAgICAgICAgIC5maW5kKCcudmVydGljYWxOb2RlcycpLmNoaWxkcmVuKCkuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZUxheWVyID0gJCgnPHRyIGNsYXNzPVwibm9kZXMnICsgaXNIaWRkZW4gKyAnXCI+Jyk7XG4gICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZChsaW5lTGF5ZXIpLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWN1cnNlIHRocm91Z2ggY2hpbGRyZW4gbm9kZXNcbiAgICAgICAgJC5lYWNoKCRjaGlsZE5vZGVzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgJG5vZGVDZWxsID0gaXNWZXJ0aWNhbExheWVyID8gJCgnPGxpPicpIDogJCgnPHRkIGNvbHNwYW49XCIyXCI+Jyk7XG4gICAgICAgICAgJG5vZGVMYXllci5hcHBlbmQoJG5vZGVDZWxsKTtcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRub2RlQ2VsbCwgdGhpcywgbGV2ZWwgKyAxLCBvcHRzLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIGNoaWxkIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZENoaWxkTm9kZTogZnVuY3Rpb24gKCRhcHBlbmRUbywgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJGFwcGVuZFRvLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBkYXRhID0gbm9kZURhdGEuY2hpbGRyZW4gfHwgbm9kZURhdGEuc2libGluZ3M7XG4gICAgICAkYXBwZW5kVG8uZmluZCgndGQ6Zmlyc3QnKS5hdHRyKCdjb2xzcGFuJywgZGF0YS5sZW5ndGggKiAyKTtcbiAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGFwcGVuZFRvLCB7ICdjaGlsZHJlbic6IGRhdGEgfSwgMCwgb3B0cywgY2FsbGJhY2spO1xuICAgIH0sXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcbiAgICBhZGRDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlLCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgrK2NvdW50ID09PSBkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgIGlmICghJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkbm9kZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEkbm9kZS5maW5kKCcuc3ltYm9sJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhhdC5zaG93Q2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBwYXJlbnQgbm9kZSBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRQYXJlbnROb2RlOiBmdW5jdGlvbiAoJGN1cnJlbnRSb290LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkdGFibGUgPSAkKCc8dGFibGU+Jyk7XG4gICAgICBub2RlRGF0YS5yZWxhdGlvbnNoaXAgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJzAwMSc7XG4gICAgICAkLndoZW4odGhpcy5jcmVhdGVOb2RlKG5vZGVEYXRhLCAwLCBvcHRzIHx8ICRjdXJyZW50Um9vdC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJykpKVxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJG5vZGVEaXYucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuYWRkQ2xhc3MoJ3NsaWRlLWRvd24nKS53cmFwKCc8dHIgY2xhc3M9XCJoaWRkZW5cIj48dGQgY29sc3Bhbj1cIjJcIj48L3RkPjwvdHI+JykuY2xvc2VzdCgndHInKSk7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMgaGlkZGVuXCI+PHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPicpO1xuICAgICAgICAgIHZhciBsaW5lc1JvdyA9ICc8dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD4nO1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzIGhpZGRlblwiPicgKyBsaW5lc1JvdyArICc8L3RyPicpO1xuICAgICAgICAgIHZhciAkY2hhcnQgPSB0aGF0LiRjaGFydDtcbiAgICAgICAgICAkY2hhcnQucHJlcGVuZCgkdGFibGUpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RhYmxlOmZpcnN0JykuYXBwZW5kKCc8dHIgY2xhc3M9XCJub2Rlc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+PC90cj4nKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oKS5hcHBlbmQoJGNoYXJ0LmNoaWxkcmVuKCd0YWJsZScpLmxhc3QoKSk7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdGUgcGFyZW50IG5vZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBleHBvc2VkIG1ldGhvZFxuICAgIGFkZFBhcmVudDogZnVuY3Rpb24gKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5idWlsZFBhcmVudE5vZGUoJGN1cnJlbnRSb290LCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50b3BFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudGl0bGUnKS5hZnRlcignPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2hvd1BhcmVudCgkY3VycmVudFJvb3QpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzdWJzZXF1ZW50IHByb2Nlc3Npbmcgb2YgYnVpbGQgc2libGluZyBub2Rlc1xuICAgIGNvbXBsZW1lbnRMaW5lOiBmdW5jdGlvbiAoJG9uZVNpYmxpbmcsIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCkge1xuICAgICAgdmFyIGxpbmVzID0gJyc7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nU2libGlnQ291bnQ7IGkrKykge1xuICAgICAgICBsaW5lcyArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICB9XG4gICAgICAkb25lU2libGluZy5wYXJlbnQoKS5wcmV2QWxsKCd0cjpndCgwKScpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIHNpYmxpbmdDb3VudCAqIDIpXG4gICAgICAgIC5lbmQoKS5uZXh0KCkuY2hpbGRyZW4oJzpmaXJzdCcpLmFmdGVyKGxpbmVzKTtcbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZFNpYmxpbmdOb2RlOiBmdW5jdGlvbiAoJG5vZGVDaGFydCwgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGVDaGFydC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgbmV3U2libGluZ0NvdW50ID0gbm9kZURhdGEuc2libGluZ3MgPyBub2RlRGF0YS5zaWJsaW5ncy5sZW5ndGggOiBub2RlRGF0YS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgZXhpc3RpbmdTaWJsaWdDb3VudCA9ICRub2RlQ2hhcnQucGFyZW50KCkuaXMoJ3RkJykgPyAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykuY2hpbGRyZW4oKS5sZW5ndGggOiAxO1xuICAgICAgdmFyIHNpYmxpbmdDb3VudCA9IGV4aXN0aW5nU2libGlnQ291bnQgKyBuZXdTaWJsaW5nQ291bnQ7XG4gICAgICB2YXIgaW5zZXJ0UG9zdGlvbiA9IChzaWJsaW5nQ291bnQgPiAxKSA/IE1hdGguZmxvb3Ioc2libGluZ0NvdW50LzIgLSAxKSA6IDA7XG4gICAgICAvLyBqdXN0IGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGZvciB0aGUgc3BlY2lmaWMgbm9kZVxuICAgICAgaWYgKCRub2RlQ2hhcnQucGFyZW50KCkuaXMoJ3RkJykpIHtcbiAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykucHJldkFsbCgndHI6bGFzdCcpO1xuICAgICAgICAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykucHJldkFsbCgndHI6bHQoMiknKS5yZW1vdmUoKTtcbiAgICAgICAgdmFyIGNoaWxkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKSwgbm9kZURhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgrK2NoaWxkQ291bnQgPT09IG5ld1NpYmxpbmdDb3VudCkge1xuICAgICAgICAgICAgdmFyICRzaWJsaW5nVGRzID0gJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oJ3RkJyk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTaWJsaWdDb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkc2libGluZ1Rkcy5lcSgwKS5iZWZvcmUoJG5vZGVDaGFydC5jbG9zZXN0KCd0ZCcpLnNpYmxpbmdzKCkuYWRkQmFjaygpLnVud3JhcCgpKSwgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KTtcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMuYWRkQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJHNpYmxpbmdUZHMuZXEoaW5zZXJ0UG9zdGlvbikuYWZ0ZXIoJG5vZGVDaGFydC5jbG9zZXN0KCd0ZCcpLnVud3JhcCgpKSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMubm90KCc6ZXEoJyArIGluc2VydFBvc3Rpb24gKyAxICsgJyknKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxuICAgICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zbGljZShpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgeyAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBhbmQgcGFyZW50IG5vZGUgZm9yIHRoZSBzcGVjaWZpYyBuZG9lXG4gICAgICAgIHZhciBub2RlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JyksIG5vZGVEYXRhLCAwLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoKytub2RlQ291bnQgPT09IHNpYmxpbmdDb3VudCkge1xuICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkbm9kZUNoYXJ0Lm5leHQoKS5jaGlsZHJlbigndHI6bGFzdCcpXG4gICAgICAgICAgICAgIC5jaGlsZHJlbigpLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpXG4gICAgICAgICAgICAgIC5hcHBlbmQoJG5vZGVDaGFydCkpLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkuZXEoMCkuYWRkQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWRvd24nKTtcbiAgICAgICAgICAgICRub2RlQ2hhcnQucGFyZW50KCkuc2libGluZ3MoKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLXJpZ2h0JylcbiAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNsaWNlKGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYWRkU2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5idWlsZFNpYmxpbmdOb2RlKCRub2RlLmNsb3Nlc3QoJ3RhYmxlJyksIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcsIHRydWUpO1xuICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKS5hZnRlcignPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT48aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHJlbW92ZU5vZGVzOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcbiAgICAgIHZhciAkc2licyA9ICRwYXJlbnQucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgIGlmICgkcGFyZW50LmlzKCd0ZCcpKSB7XG4gICAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJykuZXhpc3QpIHtcbiAgICAgICAgICAkc2licy5lcSgyKS5jaGlsZHJlbignLnRvcExpbmU6bHQoMiknKS5yZW1vdmUoKTtcbiAgICAgICAgICAkc2licy5zbGljZSgwLCAyKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCAkc2licy5lcSgyKS5jaGlsZHJlbigpLmxlbmd0aCk7XG4gICAgICAgICAgJHBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2licy5lcSgwKS5jaGlsZHJlbigpLnJlbW92ZUF0dHIoJ2NvbHNwYW4nKVxuICAgICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcbiAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkcGFyZW50LmFkZCgkcGFyZW50LnNpYmxpbmdzKCkpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBleHBvcnQ6IGZ1bmN0aW9uIChleHBvcnRGaWxlbmFtZSwgZXhwb3J0RmlsZWV4dGVuc2lvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZXhwb3J0RmlsZW5hbWUgPSAodHlwZW9mIGV4cG9ydEZpbGVuYW1lICE9PSAndW5kZWZpbmVkJykgPyAgZXhwb3J0RmlsZW5hbWUgOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZW5hbWU7XG4gICAgICBleHBvcnRGaWxlZXh0ZW5zaW9uID0gKHR5cGVvZiBleHBvcnRGaWxlZXh0ZW5zaW9uICE9PSAndW5kZWZpbmVkJykgPyAgZXhwb3J0RmlsZWV4dGVuc2lvbiA6IHRoaXMub3B0aW9ucy5leHBvcnRGaWxlZXh0ZW5zaW9uO1xuICAgICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcbiAgICAgIHZhciAkbWFzayA9ICRjaGFydENvbnRhaW5lci5maW5kKCcubWFzaycpO1xuICAgICAgaWYgKCEkbWFzay5sZW5ndGgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1hc2tcIj48aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT48L2Rpdj4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRtYXNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIHZhciBzb3VyY2VDaGFydCA9ICRjaGFydENvbnRhaW5lci5hZGRDbGFzcygnY2FudmFzQ29udGFpbmVyJykuZmluZCgnLm9yZ2NoYXJ0Om5vdChcIi5oaWRkZW5cIiknKS5nZXQoMCk7XG4gICAgICB2YXIgZmxhZyA9IHRoYXQub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdsMnInIHx8IHRoYXQub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyMmwnO1xuICAgICAgaHRtbDJjYW52YXMoc291cmNlQ2hhcnQsIHtcbiAgICAgICAgJ3dpZHRoJzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCA6IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoLFxuICAgICAgICAnaGVpZ2h0JzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoIDogc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAnb25jbG9uZSc6IGZ1bmN0aW9uIChjbG9uZURvYykge1xuICAgICAgICAgICQoY2xvbmVEb2MpLmZpbmQoJy5jYW52YXNDb250YWluZXInKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKVxuICAgICAgICAgICAgLmZpbmQoJy5vcmdjaGFydDpub3QoXCIuaGlkZGVuXCIpOmZpcnN0JykuY3NzKCd0cmFuc2Zvcm0nLCAnJyk7XG4gICAgICAgIH0sXG4gICAgICAgICdvbnJlbmRlcmVkJzogZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICAgICRjaGFydENvbnRhaW5lci5maW5kKCcubWFzaycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICBpZiAoZXhwb3J0RmlsZWV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAncGRmJykge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHt9O1xuICAgICAgICAgICAgdmFyIGRvY1dpZHRoID0gTWF0aC5mbG9vcihjYW52YXMud2lkdGggKiAwLjI2NDYpO1xuICAgICAgICAgICAgdmFyIGRvY0hlaWdodCA9IE1hdGguZmxvb3IoY2FudmFzLmhlaWdodCAqIDAuMjY0Nik7XG4gICAgICAgICAgICBpZiAoZG9jV2lkdGggPiBkb2NIZWlnaHQpIHtcbiAgICAgICAgICAgICAgZG9jID0gbmV3IGpzUERGKCdsJywgJ21tJywgW2RvY1dpZHRoLCBkb2NIZWlnaHRdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERigncCcsICdtbScsIFtkb2NIZWlnaHQsIGRvY1dpZHRoXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2MuYWRkSW1hZ2UoY2FudmFzLnRvRGF0YVVSTCgpLCAncG5nJywgMCwgMCk7XG4gICAgICAgICAgICBkb2Muc2F2ZShleHBvcnRGaWxlbmFtZSArICcucGRmJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpc1dlYmtpdCA9ICdXZWJraXRBcHBlYXJhbmNlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XG4gICAgICAgICAgICB2YXIgaXNGZiA9ICEhd2luZG93LnNpZGViYXI7XG4gICAgICAgICAgICB2YXIgaXNFZGdlID0gbmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInIHx8IChuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gXCJOZXRzY2FwZVwiICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ0VkZ2UnKSA+IC0xKTtcblxuICAgICAgICAgICAgaWYgKCghaXNXZWJraXQgJiYgIWlzRmYpIHx8IGlzRWRnZSkge1xuICAgICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZUJsb2IoY2FudmFzLm1zVG9CbG9iKCksIGV4cG9ydEZpbGVuYW1lICsgJy5wbmcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICcub2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKTtcbiAgICAgICAgICAgICAgaWYgKCEkY2hhcnRDb250YWluZXIuZmluZChzZWxlY3RvcikubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGEgY2xhc3M9XCJvYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgJ1wiJ1xuICAgICAgICAgICAgICAgICAgKyAnIGRvd25sb2FkPVwiJyArIGV4cG9ydEZpbGVuYW1lICsgJy5wbmdcIj48L2E+Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmF0dHIoJ2hyZWYnLCBjYW52YXMudG9EYXRhVVJMKCkpWzBdLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQuZm4ub3JnY2hhcnQgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIHJldHVybiBuZXcgT3JnQ2hhcnQodGhpcywgb3B0cykuaW5pdCgpO1xuICB9O1xuXG59KSk7XG4iXX0=
