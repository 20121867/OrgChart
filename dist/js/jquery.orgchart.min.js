"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});if("undefined"!=typeof MutationObserver){var o=new MutationObserver(function(e){o.disconnect();e:for(var t=0;t<e.length;t++)for(var n=0;n<e[t].addedNodes.length;n++)if(e[t].addedNodes[n].classList.contains("orgchart")&&i.options.initCompleted&&"function"==typeof i.options.initCompleted){i.options.initCompleted(a),a.triggerHandler({type:"init.orgchart"});break e}});o.observe(n[0],{childList:!0})}if("object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length){var r=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),i.export()}});n.append(r)}return this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var o=a.split(",");-1===a.indexOf("3d")?(n=parseInt(o[4]),s=parseInt(o[5])):(n=parseInt(o[12]),s=parseInt(o[13]))}var r=0,d=0;if(t.targetTouches){if(1===t.targetTouches.length)r=t.targetTouches[0].pageX-n,d=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else r=t.pageX-n,d=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-r,n=e.targetTouches[0].pageY-d;else if(e.targetTouches.length>1)return}else t=e.pageX-r,n=e.pageY-d;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",o=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(o=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(o=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t[0].id&&(n.id=t[0].id),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){return void 0===this.$chart?"Error: orgchart does not exist":this.$chart.find(".node").length?this.$chart.find(".node")[0].id?this.loopChart(this.$chart):"Error: Nodes of orghcart to be exported must have id attribute!":"Error: nodes do not exist"},getNodeState:function(e,t){var i={};if("parent"===t){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(".nodes")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t&&(i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(e,t){return"parent"===t?e.closest(".nodes").parent().children(":first").find(".node"):"children"===t?e.closest("table").children(":last").children().find(".node:first"):"siblings"===t?e.closest("table").parent().siblings().find(".node:first"):void 0},hideParent:function(e){var t=e.closest("table").closest("tr").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e);var i=t.slice(1);i.css("visibility","hidden");var n=t.eq(0).find(".node"),s=this.getNodeState(n,"parent").visible;n.length&&n.is(":visible")&&n.addClass("slide slide-down").one("transitionend",function(){n.removeClass("slide"),i.removeAttr("style"),t.addClass("hidden")}),n.length&&s&&this.hideParent(n)},showParent:function(t){var i=this,n=t.closest("table").closest("tr").siblings().removeClass("hidden");n.eq(2).children().slice(1,-1).addClass("hidden");var s=n.eq(0).find(".node")[0];this.repaint(s),e(s).addClass("slide").removeClass("slide-down").one("transitionend",function(){e(s).removeClass("slide"),i.isInAction(t)&&i.switchVerticalArrow(t.children(".topEdge"))})},hideChildren:function(e){var t=this,i=e.closest("tr").siblings();i.last().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1);var n=i.last().find(".node:visible"),s=!!i.last().is(".verticalNodes");if(!s)var a=n.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden");n.addClass("slide slide-up").eq(0).one("transitionend",function(){n.removeClass("slide"),s?i.addClass("hidden"):(a.removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),i.last().find(".verticalNodes").addClass("hidden")),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},showChildren:function(e){var t=this,i=e.closest("tr").siblings(),n=!!i.is(".verticalNodes")?i.removeClass("hidden").find(".node:visible"):i.removeClass("hidden").eq(2).children().find(".node:first");this.repaint(n.get(0)),n.addClass("slide").removeClass("slide-up").eq(0).one("transitionend",function(){n.removeClass("slide"),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},hideSiblings:function(e,t){var i=this,n=e.closest("table").parent();n.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?n.prevAll().find(".node:visible").addClass("slide slide-right"):n.nextAll().find(".node:visible").addClass("slide slide-left"):(n.prevAll().find(".node:visible").addClass("slide slide-right"),n.nextAll().find(".node:visible").addClass("slide slide-left"));var s=n.siblings().find(".slide"),a=s.closest(".nodes").prevAll(".lines").css("visibility","hidden");s.eq(0).one("transitionend",function(){a.removeAttr("style");var o=t?"left"===t?n.prevAll(":not(.hidden)"):n.nextAll(":not(.hidden)"):n.siblings();n.closest(".nodes").prev().children(":not(.hidden)").slice(1,t?2*o.length+1:-1).addClass("hidden"),s.removeClass("slide"),o.find(".node:visible:gt(0)").removeClass("slide-left slide-right").addClass("slide-up").end().find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),i.isInAction(e)&&i.switchHorizontalArrow(e)})},showSiblings:function(t,i){var n=this,s=e();s=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var a=t.closest("table").closest("tr").siblings();if(i?a.eq(2).children(".hidden").slice(0,2*s.length).removeClass("hidden"):a.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){a.removeClass("hidden");var o=a.find(".node")[0];this.repaint(o),e(o).addClass("slide").removeClass("slide-down").one("transitionend",function(){e(this).removeClass("slide")})}s.find(".node:visible").addClass("slide").removeClass("slide-left slide-right").eq(-1).one("transitionend",function(){s.find(".node:visible").removeClass("slide"),n.isInAction(t)&&(n.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})},startLoading:function(t,i,n){var s=i.closest(".orgchart");return(void 0===s.data("inAjax")||!0!==s.data("inAjax"))&&(t.addClass("hidden"),i.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),i.children().not(".spinner").css("opacity",.2),s.data("inAjax",!0),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t,i,n){var s=i.closest("div.orgchart");t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),s.data("inAjax",!1),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},createNode:function(n,s,a){var o=this;n.children||(n.children=[]),e.each(n.children,function(e,t){t.parentId=n.id});var r=e.Deferred(),d=e("<div"+(a.draggable?' draggable="true"':"")+(n[a.nodeId]?' id="'+n[a.nodeId]+'"':"")+(n.parentId?' data-parent="'+n.parentId+'"':"")+">").addClass("node "+(n.className||"")+(s>=a.depth?" slide-up":""));a.nodeTemplate?d.append(a.nodeTemplate(n)):d.append('<div class="title">'+n[a.nodeTitle]+"</div>").append(void 0!==a.nodeContent?'<div class="content">'+(n[a.nodeContent]||"")+"</div>":"");var l=n.relationship||"";if(a.verticalDepth&&s+2>a.verticalDepth){if(s+1>=a.verticalDepth&&Number(l.substr(2,1))){var c=s+1>=a.depth?"plus":"minus";d.append('<i class="toggleBtn fa fa-'+c+'-square"></i>')}}else Number(l.substr(0,1))&&d.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(l.substr(1,1))&&d.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(l.substr(2,1))&&d.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+a.parentNodeSymbol+' symbol"></i>');return d.on("mouseenter mouseleave",function(t){var i=e(this),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),r=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=o.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=o.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),r.length&&o.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")}),d.on("click",function(t){e(this).closest(".orgchart").find(".focused").removeClass("focused"),e(this).addClass("focused")}),d.on("click",".topEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),r=o.getNodeState(s,"parent");if(r.exist){var d=s.closest("table").closest("tr").siblings(":first").find(".node");if(d.is(".slide"))return;r.visible?(o.hideParent(s),d.one("transitionend",function(){o.isInAction(s)&&(o.switchVerticalArrow(i),o.switchHorizontalArrow(s))})):o.showParent(s)}else{var l=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.parent)?a.ajaxURL.parent(n):a.ajaxURL.parent+l,dataType:"json"}).done(function(t){s.closest(".orgchart").data("inAjax")&&(e.isEmptyObject(t)||o.addParent(s,t,a))}).fail(function(){console.log("Failed to get parent node data")}).always(function(){o.endLoading(i,s,a)})}}),d.on("click",".bottomEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),r=o.getNodeState(s,"children");if(r.exist){if(s.closest("tr").siblings(":last").find(".node:visible").is(".slide"))return;r.visible?o.hideChildren(s):o.showChildren(s)}else{var d=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(n):a.ajaxURL.children+d,dataType:"json"}).done(function(t,i,n){s.closest(".orgchart").data("inAjax")&&t.children.length&&o.addChildren(s,t,e.extend({},a,{depth:0}))}).fail(function(e,t,i){console.log("Failed to get children nodes data")}).always(function(){o.endLoading(i,s,a)})}}),d.on("click",".toggleBtn",function(t){var i=e(this),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".slide")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),o.repaint(a.get(0)),a.addClass("slide").removeClass("slide-up").eq(0).one("transitionend",function(){a.removeClass("slide")})):(s.addClass("slide slide-up").eq(0).one("transitionend",function(){s.removeClass("slide"),s.closest("ul").addClass("hidden")}),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))}),d.on("click",".leftEdge, .rightEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),r=o.getNodeState(s,"siblings");if(r.exist){if(s.closest("table").parent().siblings().find(".node:visible").is(".slide"))return;if(a.toggleSiblingsResp){var d=s.closest("table").parent().prev(),l=s.closest("table").parent().next();i.is(".leftEdge")?d.is(".hidden")?o.showSiblings(s,"left"):o.hideSiblings(s,"left"):l.is(".hidden")?o.showSiblings(s,"right"):o.hideSiblings(s,"right")}else r.visible?o.hideSiblings(s):o.showSiblings(s)}else{var c=i.parent()[0].id,h=o.getNodeState(s,"parent").exist?e.isFunction(a.ajaxURL.siblings)?a.ajaxURL.siblings(n):a.ajaxURL.siblings+c:e.isFunction(a.ajaxURL.families)?a.ajaxURL.families(n):a.ajaxURL.families+c;o.startLoading(i,s,a)&&e.ajax({url:h,dataType:"json"}).done(function(e,t,i){s.closest(".orgchart").data("inAjax")&&(e.siblings||e.children)&&o.addSiblings(s,e,a)}).fail(function(e,t,i){console.log("Failed to get sibling nodes data")}).always(function(){o.endLoading(i,s,a)})}}),a.draggable&&d.on("dragstart",function(n){var s=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());if(o&&s.dataTransfer.setData("text/html","hack for firefox"),"none"!==d.closest(".orgchart").css("transform")){var r,l;i.querySelector(".ghost-node")?(r=d.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),d.closest(".orgchart").append(r));var c=d.closest(".orgchart").css("transform").split(","),h=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?c[0].slice(c[0].indexOf("(")+1):c[1]));r.setAttribute("width",d.outerWidth(!1)),r.setAttribute("height",d.outerHeight(!1)),l.setAttribute("x",5*h),l.setAttribute("y",5*h),l.setAttribute("width",120*h),l.setAttribute("height",40*h),l.setAttribute("rx",4*h),l.setAttribute("ry",4*h),l.setAttribute("stroke-width",1*h);var p=s.offsetX*h,f=s.offsetY*h;if("l2r"===a.direction?(p=s.offsetY*h,f=s.offsetX*h):"r2l"===a.direction?(p=d.outerWidth(!1)-s.offsetY*h,f=s.offsetX*h):"b2t"===a.direction&&(p=d.outerWidth(!1)-s.offsetX*h,f=d.outerHeight(!1)-s.offsetY*h),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var g=i.createElement("img");g.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),s.dataTransfer.setDragImage(g,p,f)}else s.dataTransfer.setDragImage(r,p,f)}var v=e(this),u=v.closest(".nodes").siblings().eq(0).find(".node:first"),b=v.closest("table").find(".node");v.closest(".orgchart").data("dragged",v).find(".node").each(function(t,i){-1===b.index(i)&&(a.dropCriteria?a.dropCriteria(v,u,e(i))&&e(i).addClass("allowedDrop"):e(i).addClass("allowedDrop"))})}).on("dragover",function(t){t.preventDefault(),e(this).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")}).on("dragend",function(t){e(this).closest(".orgchart").find(".allowedDrop").removeClass("allowedDrop")}).on("drop",function(t){var i=e(this),n=i.closest(".orgchart"),s=n.data("dragged");n.find(".allowedDrop").removeClass("allowedDrop");var a=s.closest(".nodes").siblings().eq(0).children();if(i.closest("tr").siblings().length){var o=parseInt(i.parent().attr("colspan"))+2,r='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",o),s.find(".horizontalEdge").length||s.append(r),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>').end().next().append(s.closest("table").parent());var d=s.closest("table").parent().siblings().find(".node:first");1===d.length&&d.append(r)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr><tr class="nodes"></tr>').siblings(":last").append(s.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(a.attr("colspan"));if(l>2){a.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var c=a.parent().siblings(".nodes").children().find(".node:first");1===c.length&&c.find(".horizontalEdge").remove()}else a.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove();n.triggerHandler({type:"nodedropped.orgchart",draggedNode:s,dragZone:a.children(),dropZone:i})}),a.createNode&&a.createNode(d,n),r.resolve(d),r.promise()},buildHierarchy:function(t,i,n,s,a){var o,r=this,d=i.children,l=!!d&&d.length,c=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(o=c?t:e("<table>"),c||t.append(o),e.when(this.createNode(i,n,s)).done(function(e){c?o.append(e):o.append(e.wrap("<tr><td"+(l?' colspan="'+2*d.length+'"':"")+"></td></tr>").closest("tr")),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(o=t);var h=n+1>=s.depth||i.collapsed?" hidden":"",p=!!(s.verticalDepth&&n+2>=s.verticalDepth);p||o.append('<tr class="lines'+h+'"><td colspan="'+2*d.length+'"><div class="downLine"></div></td></tr>');for(var f='<tr class="lines'+h+'"><td class="rightLine">&nbsp;</td>',g=1;g<d.length;g++)f+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';f+='<td class="leftLine">&nbsp;</td></tr>';var v;p?(v=e("<ul>"),h&&v.addClass(h),n+2===s.verticalDepth?o.append('<tr class="verticalNodes'+h+'"><td></td></tr>').find(".verticalNodes").children().append(v):o.append(v)):(v=e('<tr class="nodes'+h+'">'),o.append(f).append(v)),e.each(d,function(){var t=e(p?"<li>":'<td colspan="2">');v.append(t),r.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,o=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(e){o.append(e.removeClass("slide-up").addClass("slide-down").wrap('<tr class="hidden"><td colspan="2"></td></tr>').closest("tr")),o.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');o.append('<tr class="lines hidden"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr>');var t=a.$chart;t.prepend(o).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(t.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),o=i.siblings?i.siblings.length:i.children.length,r=t.parent().is("td")?t.closest("tr").children().length:1,d=r+o,l=d>1?Math.floor(d/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var c=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++c===o){var e=t.parent().closest("table").children("tr:last").children("td");r>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),d,r),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),d,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var h=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++h===d&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),d,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var o=this.$chartContainer,r=o.find(".mask");r.length?r.removeClass("hidden"):o.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var d=o.addClass("canvasContainer").find(".orgchart:visible").get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(d,{width:l?d.clientHeight:d.clientWidth,height:l?d.clientWidth:d.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find(".orgchart:visible:first").css("transform","")},onrendered:function(e){if(o.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var r={},d=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(r=d>l?new jsPDF("l","mm",[d,l]):new jsPDF("p","mm",[l,d])).addImage(e.toDataURL(),"png",0,0),r.save(n+".pdf")}else{var c="WebkitAppearance"in i.documentElement.style,h=!!t.sidebar,p="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!c&&!h||p)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var f=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");o.find(f).length||o.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),o.find(f).attr("href",e.toDataURL())[0].click()}}}}).then(function(){o.removeClass("canvasContainer")},function(){o.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2pxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsIm1vIiwibXV0YXRpb25zIiwiZGlzY29ubmVjdCIsImluaXRUaW1lIiwiaSIsImoiLCJhZGRlZE5vZGVzIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbml0Q29tcGxldGVkIiwidHJpZ2dlckhhbmRsZXIiLCJ0eXBlIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsImJ1aWxkSGllcmFyY2h5IiwiYnVpbGRKc29uRFMiLCJjaGlsZHJlbiIsImFqYXhVUkwiLCJhdHRhY2hSZWwiLCJhcHBlbmQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwidGV4dFN0YXR1cyIsImpxWEhSIiwiZmFpbCIsImVycm9yVGhyb3duIiwiY29uc29sZSIsImxvZyIsImFsd2F5cyIsIiRleHBvcnRCdG4iLCJ0ZXh0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiZXhwb3J0IiwiYmluZFBhbiIsImJpbmRab29tIiwic2V0T3B0aW9ucyIsInZhbCIsInVuYmluZFBhbiIsInVuYmluZFpvb20iLCJwYW5TdGFydEhhbmRsZXIiLCJkZWxlZ2F0ZVRhcmdldCIsInRvdWNoZXMiLCJjc3MiLCJsYXN0WCIsImxhc3RZIiwibGFzdFRmIiwidGVtcCIsInNwbGl0IiwiaW5kZXhPZiIsInBhcnNlSW50Iiwic3RhcnRYIiwic3RhcnRZIiwidGFyZ2V0VG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJvbiIsIm5ld1giLCJuZXdZIiwibWF0cml4Iiwiam9pbiIsInBhbkVuZEhhbmRsZXIiLCJjaGFydCIsIm9mZiIsInpvb21XaGVlbEhhbmRsZXIiLCJvYyIsIm5ld1NjYWxlIiwib3JpZ2luYWxFdmVudCIsImRlbHRhWSIsInNldENoYXJ0U2NhbGUiLCJ6b29tU3RhcnRIYW5kbGVyIiwiZGlzdCIsImdldFBpbmNoRGlzdCIsInpvb21pbmdIYW5kbGVyIiwiem9vbUVuZEhhbmRsZXIiLCJkaWZmIiwiTWF0aCIsInNxcnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRhcmdldFNjYWxlIiwiYWJzIiwicGFyc2VGbG9hdCIsIiRsaSIsInN1Yk9iaiIsIm5hbWUiLCJjb250ZW50cyIsImVxIiwidHJpbSIsInJlbGF0aW9uc2hpcCIsInBhcmVudCIsImlzIiwic2libGluZ3MiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsImdldE5vZGVTdGF0ZSIsIiRub2RlIiwicmVsYXRpb24iLCIkdGFyZ2V0IiwiZXhpc3QiLCJ2aXNpYmxlIiwiZ2V0UmVsYXRlZE5vZGVzIiwiaGlkZVBhcmVudCIsIiR0ZW1wIiwiaGlkZVNpYmxpbmdzIiwiJGxpbmVzIiwic2xpY2UiLCIkcGFyZW50IiwiZ3JhbmRmYXRoZXJWaXNpYmxlIiwiYWRkQ2xhc3MiLCJvbmUiLCJyZW1vdmVBdHRyIiwic2hvd1BhcmVudCIsInJlcGFpbnQiLCJpc0luQWN0aW9uIiwic3dpdGNoVmVydGljYWxBcnJvdyIsImhpZGVDaGlsZHJlbiIsImxhc3QiLCIkdmlzaWJsZU5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJwcmV2QWxsIiwic2hvd0NoaWxkcmVuIiwiJGxldmVscyIsIiRkZXNjZW5kYW50cyIsImdldCIsIiRub2RlQ29udGFpbmVyIiwibmV4dEFsbCIsIiRhbmltYXRlZE5vZGVzIiwiJHNpYmxpbmdzIiwicHJldiIsImVuZCIsInN3aXRjaEhvcml6b250YWxBcnJvdyIsInNob3dTaWJsaW5ncyIsIiR1cHBlckxldmVsIiwic3RhcnRMb2FkaW5nIiwiJGFycm93Iiwibm90IiwicHJvcCIsImVuZExvYWRpbmciLCJhdHRyIiwidG9nZ2xlQ2xhc3MiLCIkcHJldlNpYiIsIiRuZXh0U2liIiwibmV4dCIsIiRzaWJzIiwic2lic1Zpc2libGUiLCJub2RlIiwic3R5bGUiLCJvZmZzZXRXaWR0aCIsImNyZWF0ZU5vZGUiLCJub2RlRGF0YSIsImxldmVsIiwiaW5kZXgiLCJjaGlsZCIsInBhcmVudElkIiwiZHRkIiwiRGVmZXJyZWQiLCIkbm9kZURpdiIsImNsYXNzTmFtZSIsIm5vZGVUZW1wbGF0ZSIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsImljb24iLCJwcmVwZW5kIiwiZmxhZyIsIiR0b3BFZGdlIiwiJGJvdHRvbUVkZ2UiLCIkbGVmdEVkZ2UiLCJzdG9wUHJvcGFnYXRpb24iLCIkdGhhdCIsInBhcmVudFN0YXRlIiwiaXNGdW5jdGlvbiIsImlzRW1wdHlPYmplY3QiLCJhZGRQYXJlbnQiLCJjaGlsZHJlblN0YXRlIiwiYWRkQ2hpbGRyZW4iLCIkdGhpcyIsIiRkZXNjV3JhcHBlciIsIiRjaGlsZHJlbiIsInNpYmxpbmdzU3RhdGUiLCJmYW1pbGllcyIsImFkZFNpYmxpbmdzIiwib3JpZ0V2ZW50IiwiaXNGaXJlZm94IiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImdob3N0Tm9kZSIsIm5vZGVDb3ZlciIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50TlMiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInRyYW5zVmFsdWVzIiwic2NhbGUiLCJzZXRBdHRyaWJ1dGUiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJ4T2Zmc2V0Iiwib2Zmc2V0WCIsInlPZmZzZXQiLCJvZmZzZXRZIiwiZ2hvc3ROb2RlV3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJzZXREcmFnSW1hZ2UiLCIkZHJhZ2dlZCIsIiRkcmFnWm9uZSIsIiRkcmFnSGllciIsImRyb3BDcml0ZXJpYSIsImRyb3BFZmZlY3QiLCIkZHJvcFpvbmUiLCIkb3JnY2hhcnQiLCJkcm9wQ29sc3BhbiIsImhvcml6b250YWxFZGdlcyIsImFkZEJhY2siLCJiZWZvcmUiLCIkZHJvcFNpYnMiLCJhZnRlciIsImRyYWdDb2xzcGFuIiwiJGRyYWdTaWJzIiwiZHJhZ2dlZE5vZGUiLCJkcmFnWm9uZSIsImRyb3Bab25lIiwicmVzb2x2ZSIsInByb21pc2UiLCIkYXBwZW5kVG8iLCJjYWxsYmFjayIsIiRub2RlV3JhcHBlciIsIiRjaGlsZE5vZGVzIiwiaGFzQ2hpbGRyZW4iLCJpc1ZlcnRpY2FsTm9kZSIsIk9iamVjdCIsImtleXMiLCJ3aGVuIiwid3JhcCIsImlzSGlkZGVuIiwiY29sbGFwc2VkIiwiaXNWZXJ0aWNhbExheWVyIiwibGluZUxheWVyIiwiJG5vZGVMYXllciIsIiRub2RlQ2VsbCIsImJ1aWxkQ2hpbGROb2RlIiwiY291bnQiLCJidWlsZFBhcmVudE5vZGUiLCIkY3VycmVudFJvb3QiLCIkdGFibGUiLCJjb21wbGVtZW50TGluZSIsIiRvbmVTaWJsaW5nIiwic2libGluZ0NvdW50IiwiZXhpc3RpbmdTaWJsaWdDb3VudCIsImxpbmVzIiwiYnVpbGRTaWJsaW5nTm9kZSIsIiRub2RlQ2hhcnQiLCJuZXdTaWJsaW5nQ291bnQiLCJpbnNlcnRQb3N0aW9uIiwiZmxvb3IiLCJjaGlsZENvdW50IiwiJHNpYmxpbmdUZHMiLCJ1bndyYXAiLCJub2RlQ291bnQiLCJyZW1vdmVOb2RlcyIsIiRtYXNrIiwic291cmNlQ2hhcnQiLCJodG1sMmNhbnZhcyIsIndpZHRoIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJvbnJlbmRlcmVkIiwiY2FudmFzIiwiZG9jIiwiZG9jV2lkdGgiLCJkb2NIZWlnaHQiLCJqc1BERiIsImFkZEltYWdlIiwidG9EYXRhVVJMIiwic2F2ZSIsImlzV2Via2l0IiwiZG9jdW1lbnRFbGVtZW50IiwiaXNGZiIsInNpZGViYXIiLCJpc0VkZ2UiLCJhcHBOYW1lIiwiYXBwVmVyc2lvbiIsIm1zU2F2ZUJsb2IiLCJtc1RvQmxvYiIsInNlbGVjdG9yIiwidGhlbiIsImZuIiwib3JnY2hhcnQiXSwibWFwcGluZ3MiOiJBQVVBLGNBRUMsU0FBVUEsR0FDYSxpQkFBWEMsUUFBaUQsaUJBQW5CQSxPQUFPQyxRQUM5Q0YsRUFBUUcsUUFBUSxVQUFXQyxPQUFRQyxVQUVuQ0wsRUFBUU0sT0FBUUYsT0FBUUMsVUFKNUIsQ0FNRSxTQUFVRSxFQUFHSCxFQUFRQyxFQUFVRyxHQUMvQixJQUFJQyxFQUFXLFNBQVVDLEVBQU1DLEdBQzdCQyxLQUFLQyxnQkFBa0JOLEVBQUVHLEdBQ3pCRSxLQUFLRCxLQUFPQSxFQUNaQyxLQUFLRSxnQkFDSEMsVUFBYSxPQUNiQyxPQUFVLEtBQ1ZDLG9CQUFzQixFQUN0QkMsTUFBUyxJQUNUQyxXQUFjLEdBQ2RDLGNBQWdCLEVBQ2hCQyxlQUFrQixXQUNsQkMsb0JBQXVCLE1BQ3ZCQyxpQkFBb0IsV0FDcEJDLFdBQWEsRUFDYkMsVUFBYSxNQUNiQyxLQUFPLEVBQ1BDLE1BQVEsRUFDUkMsWUFBZSxFQUNmQyxhQUFnQixLQUlwQnBCLEVBQVNxQixXQUVQQyxLQUFNLFNBQVVwQixHQUNkLElBQUlxQixFQUFPcEIsS0FDWEEsS0FBS3FCLFFBQVUxQixFQUFFMkIsVUFBV3RCLEtBQUtFLGVBQWdCRixLQUFLRCxLQUFNQSxHQUU1RCxJQUFJRSxFQUFrQkQsS0FBS0MsZ0JBQ3ZCRCxLQUFLdUIsUUFDUHZCLEtBQUt1QixPQUFPQyxTQUVkLElBQUlDLEVBQU96QixLQUFLcUIsUUFBUUksS0FDcEJGLEVBQVN2QixLQUFLdUIsT0FBUzVCLEVBQUUsU0FDM0I4QixNQUFVSixRQUFXckIsS0FBS3FCLFNBQzFCSyxNQUFTLFlBQTBDLEtBQTVCMUIsS0FBS3FCLFFBQVFkLFdBQW9CLElBQU1QLEtBQUtxQixRQUFRZCxXQUFhLEtBQWtDLFFBQTNCUCxLQUFLcUIsUUFBUVIsVUFBc0IsSUFBTWIsS0FBS3FCLFFBQVFSLFVBQVksSUFDaktjLE1BQVMsU0FBU0MsR0FDWGpDLEVBQUVpQyxFQUFNQyxRQUFRQyxRQUFRLFNBQVNDLFFBQ3BDUixFQUFPUyxLQUFLLGlCQUFpQkMsWUFBWSxjQUkvQyxHQUFnQyxvQkFBckJDLGlCQUFrQyxDQUMzQyxJQUFJQyxFQUFLLElBQUlELGlCQUFpQixTQUFVRSxHQUN0Q0QsRUFBR0UsYUFDSEMsRUFDQSxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUgsRUFBVUwsT0FBUVEsSUFDcEMsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlKLEVBQVVHLEdBQUdFLFdBQVdWLE9BQVFTLElBQ2xELEdBQUlKLEVBQVVHLEdBQUdFLFdBQVdELEdBQUdFLFVBQVVDLFNBQVMsYUFDNUN2QixFQUFLQyxRQUFRdUIsZUFBdUQsbUJBQS9CeEIsRUFBS0MsUUFBUXVCLGNBQThCLENBQ2xGeEIsRUFBS0MsUUFBUXVCLGNBQWNyQixHQUMzQkEsRUFBT3NCLGdCQUFpQkMsS0FBUSxrQkFDaEMsTUFBTVIsS0FNbEJILEVBQUdZLFFBQVE5QyxFQUFnQixJQUFNK0MsV0FBVyxJQTJCNUMsR0F6QnFCLFdBQWpCckQsRUFBRW1ELEtBQUtyQixHQUNMQSxhQUFnQjlCLEVBQ2xCSyxLQUFLaUQsZUFBZTFCLEVBQVF2QixLQUFLa0QsWUFBWXpCLEVBQUswQixZQUFhLEVBQUduRCxLQUFLcUIsU0FFdkVyQixLQUFLaUQsZUFBZTFCLEVBQVF2QixLQUFLcUIsUUFBUStCLFFBQVUzQixFQUFPekIsS0FBS3FELFVBQVU1QixFQUFNLE1BQU8sRUFBR3pCLEtBQUtxQixVQUdoR0UsRUFBTytCLE9BQU8sd0RBQ2QzRCxFQUFFNEQsTUFDQUMsSUFBTy9CLEVBQ1BnQyxTQUFZLFNBRWJDLEtBQUssU0FBU2pDLEVBQU1rQyxFQUFZQyxHQUMvQnhDLEVBQUs2QixlQUFlMUIsRUFBUUgsRUFBS0MsUUFBUStCLFFBQVUzQixFQUFPTCxFQUFLaUMsVUFBVTVCLEVBQU0sTUFBTyxFQUFHTCxFQUFLQyxXQUUvRndDLEtBQUssU0FBU0QsRUFBT0QsRUFBWUcsR0FDaENDLFFBQVFDLElBQUlGLEtBRWJHLE9BQU8sV0FDTjFDLEVBQU80QixTQUFTLFlBQVkzQixZQUdoQ3ZCLEVBQWdCcUQsT0FBTy9CLEdBR25CdkIsS0FBS3FCLFFBQVFiLGVBQWlCUCxFQUFnQitCLEtBQUssa0JBQWtCRCxPQUFRLENBQy9FLElBQUltQyxFQUFhdkUsRUFBRSxZQUNqQitCLE1BQVMsaUJBQStDLEtBQTVCMUIsS0FBS3FCLFFBQVFkLFdBQW9CLElBQU1QLEtBQUtxQixRQUFRZCxXQUFhLElBQzdGNEQsS0FBUSxTQUNSeEMsTUFBUyxTQUFTeUMsR0FDaEJBLEVBQUVDLGlCQUNGakQsRUFBS2tELFlBR1RyRSxFQUFnQnFELE9BQU9ZLEdBV3pCLE9BUklsRSxLQUFLcUIsUUFBUVAsS0FDZmQsS0FBS3VFLFVBR0h2RSxLQUFLcUIsUUFBUU4sTUFDZmYsS0FBS3dFLFdBR0F4RSxNQUdUeUUsV0FBWSxTQUFVMUUsRUFBTTJFLEdBc0MxQixNQXJDb0IsaUJBQVQzRSxJQUNJLFFBQVRBLElBQ0UyRSxFQUNGMUUsS0FBS3VFLFVBRUx2RSxLQUFLMkUsYUFHSSxTQUFUNUUsSUFDRTJFLEVBQ0YxRSxLQUFLd0UsV0FFTHhFLEtBQUs0RSxlQUlTLGlCQUFUN0UsSUFDTEEsRUFBSzBCLEtBQ1B6QixLQUFLbUIsS0FBS3BCLFNBRWMsSUFBYkEsRUFBS2UsTUFDVmYsRUFBS2UsSUFDUGQsS0FBS3VFLFVBRUx2RSxLQUFLMkUsa0JBR2dCLElBQWQ1RSxFQUFLZ0IsT0FDVmhCLEVBQUtnQixLQUNQZixLQUFLd0UsV0FFTHhFLEtBQUs0RSxnQkFNTjVFLE1BR1Q2RSxnQkFBaUIsU0FBVVQsR0FDekIsSUFBSTdDLEVBQVM1QixFQUFFeUUsRUFBRVUsZ0JBQ2pCLEdBQUluRixFQUFFeUUsRUFBRXZDLFFBQVFDLFFBQVEsU0FBU0MsUUFBV3FDLEVBQUVXLFNBQVdYLEVBQUVXLFFBQVFoRCxPQUFTLEVBQzFFUixFQUFPRSxLQUFLLFdBQVcsT0FEekIsQ0FJRUYsRUFBT3lELElBQUksU0FBVSxRQUFRdkQsS0FBSyxXQUFXLEdBRS9DLElBQUl3RCxFQUFRLEVBQ1JDLEVBQVEsRUFDUkMsRUFBUzVELEVBQU95RCxJQUFJLGFBQ3hCLEdBQWUsU0FBWEcsRUFBbUIsQ0FDckIsSUFBSUMsRUFBT0QsRUFBT0UsTUFBTSxNQUNNLElBQTFCRixFQUFPRyxRQUFRLE9BQ2pCTCxFQUFRTSxTQUFTSCxFQUFLLElBQ3RCRixFQUFRSyxTQUFTSCxFQUFLLE1BRXRCSCxFQUFRTSxTQUFTSCxFQUFLLEtBQ3RCRixFQUFRSyxTQUFTSCxFQUFLLE1BRzFCLElBQUlJLEVBQVMsRUFDVEMsRUFBUyxFQUNiLEdBQUtyQixFQUFFc0IsZUFHQSxHQUErQixJQUEzQnRCLEVBQUVzQixjQUFjM0QsT0FDekJ5RCxFQUFTcEIsRUFBRXNCLGNBQWMsR0FBR0MsTUFBUVYsRUFDcENRLEVBQVNyQixFQUFFc0IsY0FBYyxHQUFHRSxNQUFRVixPQUMvQixHQUFJZCxFQUFFc0IsY0FBYzNELE9BQVMsRUFDbEMsWUFOQXlELEVBQVNwQixFQUFFdUIsTUFBUVYsRUFDbkJRLEVBQVNyQixFQUFFd0IsTUFBUVYsRUFPckIzRCxFQUFPc0UsR0FBRyxzQkFBc0IsU0FBU3pCLEdBQ3ZDLEdBQUs3QyxFQUFPRSxLQUFLLFdBQWpCLENBR0EsSUFBSXFFLEVBQU8sRUFDUEMsRUFBTyxFQUNYLEdBQUszQixFQUFFc0IsZUFHQSxHQUErQixJQUEzQnRCLEVBQUVzQixjQUFjM0QsT0FDekIrRCxFQUFPMUIsRUFBRXNCLGNBQWMsR0FBR0MsTUFBUUgsRUFDbENPLEVBQU8zQixFQUFFc0IsY0FBYyxHQUFHRSxNQUFRSCxPQUM3QixHQUFJckIsRUFBRXNCLGNBQWMzRCxPQUFTLEVBQ2xDLFlBTkErRCxFQUFPMUIsRUFBRXVCLE1BQVFILEVBQ2pCTyxFQUFPM0IsRUFBRXdCLE1BQVFILEVBT25CLElBQUlOLEVBQVM1RCxFQUFPeUQsSUFBSSxhQUN4QixHQUFlLFNBQVhHLEdBQzRCLElBQTFCQSxFQUFPRyxRQUFRLE1BQ2pCL0QsRUFBT3lELElBQUksWUFBYSxzQkFBd0JjLEVBQU8sS0FBT0MsRUFBTyxLQUVyRXhFLEVBQU95RCxJQUFJLFlBQWEsZ0RBQWtEYyxFQUFPLEtBQU9DLEVBQU8sZUFFNUYsQ0FDTCxJQUFJQyxFQUFTYixFQUFPRSxNQUFNLE1BQ0ksSUFBMUJGLEVBQU9HLFFBQVEsT0FDakJVLEVBQU8sR0FBSyxJQUFNRixFQUNsQkUsRUFBTyxHQUFLLElBQU1ELEVBQU8sTUFFekJDLEVBQU8sSUFBTSxJQUFNRixFQUNuQkUsRUFBTyxJQUFNLElBQU1ELEdBRXJCeEUsRUFBT3lELElBQUksWUFBYWdCLEVBQU9DLEtBQUssWUFLMUNDLGNBQWUsU0FBVTlCLEdBQ25CQSxFQUFFM0MsS0FBSzBFLE1BQU0xRSxLQUFLLFlBQ3BCMkMsRUFBRTNDLEtBQUswRSxNQUFNMUUsS0FBSyxXQUFXLEdBQU91RCxJQUFJLFNBQVUsV0FBV29CLElBQUksY0FJckU3QixRQUFTLFdBQ1B2RSxLQUFLQyxnQkFBZ0IrRSxJQUFJLFdBQVksVUFDckNoRixLQUFLdUIsT0FBT3NFLEdBQUcsdUJBQXdCN0YsS0FBSzZFLGlCQUM1Q2xGLEVBQUVGLEdBQVVvRyxHQUFHLG9CQUFzQk0sTUFBU25HLEtBQUt1QixRQUFVdkIsS0FBS2tHLGdCQUdwRXZCLFVBQVcsV0FDVDNFLEtBQUtDLGdCQUFnQitFLElBQUksV0FBWSxRQUNyQ2hGLEtBQUt1QixPQUFPNkUsSUFBSSx1QkFBd0JwRyxLQUFLNkUsaUJBQzdDbEYsRUFBRUYsR0FBVTJHLElBQUksbUJBQW9CcEcsS0FBS2tHLGdCQUczQ0csaUJBQWtCLFNBQVVqQyxHQUMxQixJQUFJa0MsRUFBS2xDLEVBQUUzQyxLQUFLNkUsR0FDaEJsQyxFQUFFQyxpQkFDRixJQUFJa0MsRUFBWSxHQUFLbkMsRUFBRW9DLGNBQWNDLE9BQVMsR0FBSyxHQUFNLElBQ3pESCxFQUFHSSxjQUFjSixFQUFHL0UsT0FBUWdGLElBRzlCSSxpQkFBa0IsU0FBVXZDLEdBQzFCLEdBQUdBLEVBQUVXLFNBQWdDLElBQXJCWCxFQUFFVyxRQUFRaEQsT0FBYyxDQUN0QyxJQUFJdUUsRUFBS2xDLEVBQUUzQyxLQUFLNkUsR0FDaEJBLEVBQUcvRSxPQUFPRSxLQUFLLFlBQVksR0FDM0IsSUFBSW1GLEVBQU9OLEVBQUdPLGFBQWF6QyxHQUMzQmtDLEVBQUcvRSxPQUFPRSxLQUFLLGlCQUFrQm1GLEtBR3JDRSxlQUFnQixTQUFVMUMsR0FDeEIsSUFBSWtDLEVBQUtsQyxFQUFFM0MsS0FBSzZFLEdBQ2hCLEdBQUdBLEVBQUcvRSxPQUFPRSxLQUFLLFlBQWEsQ0FDN0IsSUFBSW1GLEVBQU9OLEVBQUdPLGFBQWF6QyxHQUMzQmtDLEVBQUcvRSxPQUFPRSxLQUFLLGVBQWdCbUYsS0FHbkNHLGVBQWdCLFNBQVUzQyxHQUN4QixJQUFJa0MsRUFBS2xDLEVBQUUzQyxLQUFLNkUsR0FDaEIsR0FBR0EsRUFBRy9FLE9BQU9FLEtBQUssWUFBYSxDQUM3QjZFLEVBQUcvRSxPQUFPRSxLQUFLLFlBQVksR0FDM0IsSUFBSXVGLEVBQU9WLEVBQUcvRSxPQUFPRSxLQUFLLGdCQUFrQjZFLEVBQUcvRSxPQUFPRSxLQUFLLGtCQUN2RHVGLEVBQU8sRUFDVFYsRUFBR0ksY0FBY0osRUFBRy9FLE9BQVEsS0FDbkJ5RixFQUFPLEdBQ2hCVixFQUFHSSxjQUFjSixFQUFHL0UsT0FBUSxNQUtsQ2lELFNBQVUsV0FDUnhFLEtBQUtDLGdCQUFnQjRGLEdBQUcsU0FBV1MsR0FBTXRHLE1BQVFBLEtBQUtxRyxrQkFDdERyRyxLQUFLQyxnQkFBZ0I0RixHQUFHLGNBQWdCUyxHQUFNdEcsTUFBUUEsS0FBSzJHLGtCQUMzRGhILEVBQUVGLEdBQVVvRyxHQUFHLGFBQWVTLEdBQU10RyxNQUFRQSxLQUFLOEcsZ0JBQ2pEbkgsRUFBRUYsR0FBVW9HLEdBQUcsWUFBY1MsR0FBTXRHLE1BQVFBLEtBQUsrRyxpQkFFbERuQyxXQUFZLFdBQ1Y1RSxLQUFLQyxnQkFBZ0JtRyxJQUFJLFFBQVNwRyxLQUFLcUcsa0JBQ3ZDckcsS0FBS0MsZ0JBQWdCbUcsSUFBSSxhQUFjcEcsS0FBSzJHLGtCQUM1Q2hILEVBQUVGLEdBQVUyRyxJQUFJLFlBQWFwRyxLQUFLOEcsZ0JBQ2xDbkgsRUFBRUYsR0FBVTJHLElBQUksV0FBWXBHLEtBQUsrRyxpQkFHbkNGLGFBQWMsU0FBVXpDLEdBQ3RCLE9BQU82QyxLQUFLQyxNQUFNOUMsRUFBRVcsUUFBUSxHQUFHb0MsUUFBVS9DLEVBQUVXLFFBQVEsR0FBR29DLFVBQVkvQyxFQUFFVyxRQUFRLEdBQUdvQyxRQUFVL0MsRUFBRVcsUUFBUSxHQUFHb0MsVUFDckcvQyxFQUFFVyxRQUFRLEdBQUdxQyxRQUFVaEQsRUFBRVcsUUFBUSxHQUFHcUMsVUFBWWhELEVBQUVXLFFBQVEsR0FBR3FDLFFBQVVoRCxFQUFFVyxRQUFRLEdBQUdxQyxXQUd2RlYsY0FBZSxTQUFVbkYsRUFBUWdGLEdBQy9CLElBQUl4RyxFQUFPd0IsRUFBT0UsS0FBSyxXQUNuQjBELEVBQVM1RCxFQUFPeUQsSUFBSSxhQUNwQmdCLEVBQVMsR0FDVHFCLEVBQWMsRUFDSCxTQUFYbEMsRUFDRjVELEVBQU95RCxJQUFJLFlBQWEsU0FBV3VCLEVBQVcsSUFBTUEsRUFBVyxNQUUvRFAsRUFBU2IsRUFBT0UsTUFBTSxNQUNRLElBQTFCRixFQUFPRyxRQUFRLE9BQ2pCK0IsRUFBY0osS0FBS0ssSUFBSTlILEVBQU8rSCxXQUFXdkIsRUFBTyxJQUFNTyxJQUNwQ3hHLEVBQUtrQixjQUFnQm9HLEVBQWN0SCxFQUFLaUIsYUFDeERPLEVBQU95RCxJQUFJLFlBQWFHLEVBQVMsVUFBWW9CLEVBQVcsSUFBTUEsRUFBVyxNQUczRWMsRUFBY0osS0FBS0ssSUFBSTlILEVBQU8rSCxXQUFXdkIsRUFBTyxJQUFNTyxJQUNwQ3hHLEVBQUtrQixjQUFnQm9HLEVBQWN0SCxFQUFLaUIsYUFDeERPLEVBQU95RCxJQUFJLFlBQWFHLEVBQVMsWUFBY29CLEVBQVcsSUFBTUEsRUFBVyxVQU1uRnJELFlBQWEsU0FBVXNFLEdBQ3JCLElBQUlwRyxFQUFPcEIsS0FDUHlILEdBQ0ZDLEtBQVFGLEVBQUlHLFdBQVdDLEdBQUcsR0FBR3pELE9BQU8wRCxPQUNwQ0MsY0FBaUJOLEVBQUlPLFNBQVNBLFNBQVNDLEdBQUcsTUFBUSxJQUFLLE1BQVFSLEVBQUlTLFNBQVMsTUFBTWxHLE9BQVMsRUFBRyxJQUFNeUYsRUFBSXJFLFNBQVMsTUFBTXBCLE9BQVMsRUFBSSxJQVN0SSxPQVBJeUYsRUFBSSxHQUFHVSxLQUNUVCxFQUFPUyxHQUFLVixFQUFJLEdBQUdVLElBRXJCVixFQUFJckUsU0FBUyxNQUFNQSxXQUFXZ0YsS0FBSyxXQUM1QlYsRUFBT3RFLFdBQVlzRSxFQUFPdEUsYUFDL0JzRSxFQUFPdEUsU0FBU2lGLEtBQUtoSCxFQUFLOEIsWUFBWXZELEVBQUVLLFVBRW5DeUgsR0FHVHBFLFVBQVcsU0FBVTVCLEVBQU00RyxHQUN6QixJQUFJakgsRUFBT3BCLEtBT1gsT0FOQXlCLEVBQUtxRyxhQUFlTyxHQUFTNUcsRUFBSzBCLFVBQVkxQixFQUFLMEIsU0FBU3BCLE9BQVMsRUFBSSxFQUFJLEdBQ3pFTixFQUFLMEIsVUFDUDFCLEVBQUswQixTQUFTbUYsUUFBUSxTQUFTQyxHQUM3Qm5ILEVBQUtpQyxVQUFVa0YsRUFBTSxLQUFPOUcsRUFBSzBCLFNBQVNwQixPQUFTLEVBQUksRUFBSSxNQUd4RE4sR0FHVCtHLFVBQVcsU0FBVWpILEdBQ25CLElBQUlILEVBQU9wQixLQUNQeUksRUFBTWxILEVBQU9TLEtBQUssWUFDbEJ5RixHQUFXUyxHQUFNTyxFQUFJekcsS0FBSyxTQUFTLEdBQUdrRyxJQUsxQyxPQUpBTyxFQUFJUixTQUFTLFNBQVM5RSxXQUFXZ0YsS0FBSyxXQUMvQlYsRUFBT3RFLFdBQVlzRSxFQUFPdEUsYUFDL0JzRSxFQUFPdEUsU0FBU2lGLEtBQUtoSCxFQUFLb0gsVUFBVTdJLEVBQUVLLFVBRWpDeUgsR0FHVGlCLGFBQWMsV0FDWixZQUEyQixJQUFoQjFJLEtBQUt1QixPQUNQLGlDQUVGdkIsS0FBS3VCLE9BQU9TLEtBQUssU0FBU0QsT0FHeEIvQixLQUFLdUIsT0FBT1MsS0FBSyxTQUFTLEdBQUdrRyxHQUsvQmxJLEtBQUt3SSxVQUFVeEksS0FBS3VCLFFBSmQsa0VBSEYsNkJBVWJvSCxhQUFjLFNBQVVDLEVBQU9DLEdBQzdCLElBQUlDLEtBQ0osR0FBaUIsV0FBYkQsR0FFRixJQURBQyxFQUFVRixFQUFNOUcsUUFBUSxVQUFVbUcsU0FBUyxXQUMvQmxHLE9BQ1YsT0FBSStHLEVBQVFkLEdBQUcsYUFBZ0JjLEVBQVFkLEdBQUcsWUFBY2MsRUFBUWhILFFBQVEsVUFBVWtHLEdBQUcsWUFDMUVlLE9BQVMsRUFBTUMsU0FBVyxJQUU1QkQsT0FBUyxFQUFNQyxTQUFXLFFBRWhDLEdBQWlCLGFBQWJILEdBRVQsSUFEQUMsRUFBVUYsRUFBTTlHLFFBQVEsTUFBTW1HLFNBQVMsV0FDM0JsRyxPQUNWLE9BQUsrRyxFQUFRZCxHQUFHLFlBR1BlLE9BQVMsRUFBTUMsU0FBVyxJQUZ4QkQsT0FBUyxFQUFNQyxTQUFXLFFBSWxDLEdBQWlCLGFBQWJILElBQ1RDLEVBQVVGLEVBQU05RyxRQUFRLFNBQVNpRyxTQUFTRSxZQUM5QmxHLE9BQ1YsT0FBSytHLEVBQVFkLEdBQUcsWUFBZWMsRUFBUWYsU0FBU0MsR0FBRyxZQUcxQ2UsT0FBUyxFQUFNQyxTQUFXLElBRnhCRCxPQUFTLEVBQU1DLFNBQVcsR0FLekMsT0FBU0QsT0FBUyxFQUFPQyxTQUFXLElBR3RDQyxnQkFBaUIsU0FBVUwsRUFBT0MsR0FDaEMsTUFBaUIsV0FBYkEsRUFDS0QsRUFBTTlHLFFBQVEsVUFBVWlHLFNBQVM1RSxTQUFTLFVBQVVuQixLQUFLLFNBQzFDLGFBQWI2RyxFQUNGRCxFQUFNOUcsUUFBUSxTQUFTcUIsU0FBUyxTQUFTQSxXQUFXbkIsS0FBSyxlQUMxQyxhQUFiNkcsRUFDRkQsRUFBTTlHLFFBQVEsU0FBU2lHLFNBQVNFLFdBQVdqRyxLQUFLLG9CQURsRCxHQUtUa0gsV0FBWSxTQUFVTixHQUNwQixJQUFJTyxFQUFRUCxFQUFNOUcsUUFBUSxTQUFTQSxRQUFRLE1BQU1tRyxXQUM3Q2tCLEVBQU12QixHQUFHLEdBQUc1RixLQUFLLFlBQVlELFFBQy9CNkcsRUFBTTlHLFFBQVEsYUFBYUwsS0FBSyxVQUFVLEdBR3hDekIsS0FBSzJJLGFBQWFDLEVBQU8sWUFBWUksU0FDdkNoSixLQUFLb0osYUFBYVIsR0FHcEIsSUFBSVMsRUFBU0YsRUFBTUcsTUFBTSxHQUN6QkQsRUFBT3JFLElBQUksYUFBYyxVQUV6QixJQUFJdUUsRUFBVUosRUFBTXZCLEdBQUcsR0FBRzVGLEtBQUssU0FDM0J3SCxFQUFxQnhKLEtBQUsySSxhQUFhWSxFQUFTLFVBQVVQLFFBQzFETyxFQUFReEgsUUFBVXdILEVBQVF2QixHQUFHLGFBQy9CdUIsRUFBUUUsU0FBUyxvQkFBb0JDLElBQUksZ0JBQWlCLFdBQ3hESCxFQUFRdEgsWUFBWSxTQUNwQm9ILEVBQU9NLFdBQVcsU0FDbEJSLEVBQU1NLFNBQVMsWUFJZkYsRUFBUXhILFFBQVV5SCxHQUNwQnhKLEtBQUtrSixXQUFXSyxJQUlwQkssV0FBWSxTQUFVaEIsR0FDcEIsSUFBSXhILEVBQU9wQixLQUVQbUosRUFBUVAsRUFBTTlHLFFBQVEsU0FBU0EsUUFBUSxNQUFNbUcsV0FBV2hHLFlBQVksVUFFeEVrSCxFQUFNdkIsR0FBRyxHQUFHekUsV0FBV21HLE1BQU0sR0FBSSxHQUFHRyxTQUFTLFVBRTdDLElBQUkxQixFQUFTb0IsRUFBTXZCLEdBQUcsR0FBRzVGLEtBQUssU0FBUyxHQUN2Q2hDLEtBQUs2SixRQUFROUIsR0FDYnBJLEVBQUVvSSxHQUFRMEIsU0FBUyxTQUFTeEgsWUFBWSxjQUFjeUgsSUFBSSxnQkFBaUIsV0FDekUvSixFQUFFb0ksR0FBUTlGLFlBQVksU0FDbEJiLEVBQUswSSxXQUFXbEIsSUFDbEJ4SCxFQUFLMkksb0JBQW9CbkIsRUFBTXpGLFNBQVMsZ0JBSzlDNkcsYUFBYyxTQUFVcEIsR0FDdEIsSUFBSXhILEVBQU9wQixLQUNQbUosRUFBUVAsRUFBTTlHLFFBQVEsTUFBTW1HLFdBQzVCa0IsRUFBTWMsT0FBT2pJLEtBQUssWUFBWUQsUUFDaEM2RyxFQUFNOUcsUUFBUSxhQUFhTCxLQUFLLFVBQVUsR0FFNUMsSUFBSXlJLEVBQWdCZixFQUFNYyxPQUFPakksS0FBSyxpQkFDbENtSSxJQUFpQmhCLEVBQU1jLE9BQU9qQyxHQUFHLGtCQUNyQyxJQUFLbUMsRUFDSCxJQUFJZCxFQUFTYSxFQUFjcEksUUFBUSxTQUFTQSxRQUFRLE1BQU1zSSxRQUFRLFVBQVVwRixJQUFJLGFBQWMsVUFFaEdrRixFQUFjVCxTQUFTLGtCQUFrQjdCLEdBQUcsR0FBRzhCLElBQUksZ0JBQWlCLFdBQ2xFUSxFQUFjakksWUFBWSxTQUN0QmtJLEVBQ0ZoQixFQUFNTSxTQUFTLFdBRWZKLEVBQU9NLFdBQVcsU0FBU0YsU0FBUyxVQUFVeEIsU0FBUyxVQUFVd0IsU0FBUyxVQUMxRU4sRUFBTWMsT0FBT2pJLEtBQUssa0JBQWtCeUgsU0FBUyxXQUUzQ3JJLEVBQUswSSxXQUFXbEIsSUFDbEJ4SCxFQUFLMkksb0JBQW9CbkIsRUFBTXpGLFNBQVMsbUJBSzlDa0gsYUFBYyxTQUFVekIsR0FDdEIsSUFBSXhILEVBQU9wQixLQUNQc0ssRUFBVTFCLEVBQU05RyxRQUFRLE1BQU1tRyxXQUU5QnNDLElBRGlCRCxFQUFRdEMsR0FBRyxrQkFFNUJzQyxFQUFRckksWUFBWSxVQUFVRCxLQUFLLGlCQUNuQ3NJLEVBQVFySSxZQUFZLFVBQVUyRixHQUFHLEdBQUd6RSxXQUFXbkIsS0FBSyxlQUV4RGhDLEtBQUs2SixRQUFRVSxFQUFhQyxJQUFJLElBQzlCRCxFQUFhZCxTQUFTLFNBQVN4SCxZQUFZLFlBQVkyRixHQUFHLEdBQUc4QixJQUFJLGdCQUFpQixXQUNoRmEsRUFBYXRJLFlBQVksU0FDckJiLEVBQUswSSxXQUFXbEIsSUFDbEJ4SCxFQUFLMkksb0JBQW9CbkIsRUFBTXpGLFNBQVMsbUJBSzlDaUcsYUFBYyxTQUFVUixFQUFPL0gsR0FDN0IsSUFBSU8sRUFBT3BCLEtBQ1B5SyxFQUFpQjdCLEVBQU05RyxRQUFRLFNBQVNpRyxTQUN4QzBDLEVBQWV4QyxXQUFXakcsS0FBSyxZQUFZRCxRQUM3QzZHLEVBQU05RyxRQUFRLGFBQWFMLEtBQUssVUFBVSxHQUV4Q1osRUFDZ0IsU0FBZEEsRUFDRjRKLEVBQWVMLFVBQVVwSSxLQUFLLGlCQUFpQnlILFNBQVMscUJBRXhEZ0IsRUFBZUMsVUFBVTFJLEtBQUssaUJBQWlCeUgsU0FBUyxxQkFHMURnQixFQUFlTCxVQUFVcEksS0FBSyxpQkFBaUJ5SCxTQUFTLHFCQUN4RGdCLEVBQWVDLFVBQVUxSSxLQUFLLGlCQUFpQnlILFNBQVMscUJBRTFELElBQUlrQixFQUFpQkYsRUFBZXhDLFdBQVdqRyxLQUFLLFVBQ2hEcUgsRUFBU3NCLEVBQWU3SSxRQUFRLFVBQVVzSSxRQUFRLFVBQVVwRixJQUFJLGFBQWMsVUFDbEYyRixFQUFlL0MsR0FBRyxHQUFHOEIsSUFBSSxnQkFBaUIsV0FDeENMLEVBQU9NLFdBQVcsU0FDbEIsSUFBSWlCLEVBQVkvSixFQUEyQixTQUFkQSxFQUF1QjRKLEVBQWVMLFFBQVEsaUJBQW1CSyxFQUFlQyxRQUFRLGlCQUFvQkQsRUFBZXhDLFdBQ3hKd0MsRUFBZTNJLFFBQVEsVUFBVStJLE9BQU8xSCxTQUFTLGlCQUM5Q21HLE1BQU0sRUFBR3pJLEVBQStCLEVBQW5CK0osRUFBVTdJLE9BQWEsR0FBSyxHQUFHMEgsU0FBUyxVQUNoRWtCLEVBQWUxSSxZQUFZLFNBQzNCMkksRUFBVTVJLEtBQUssdUJBQXVCQyxZQUFZLDBCQUEwQndILFNBQVMsWUFDbEZxQixNQUFNOUksS0FBSyxrQ0FBa0N5SCxTQUFTLFVBQ3REcUIsTUFBTXJCLFNBQVMsVUFFZHJJLEVBQUswSSxXQUFXbEIsSUFDbEJ4SCxFQUFLMkosc0JBQXNCbkMsTUFLakNvQyxhQUFjLFNBQVVwQyxFQUFPL0gsR0FDN0IsSUFBSU8sRUFBT3BCLEtBRVA0SyxFQUFZakwsSUFHWmlMLEVBRkEvSixFQUNnQixTQUFkQSxFQUNVK0gsRUFBTTlHLFFBQVEsU0FBU2lHLFNBQVNxQyxVQUFVbkksWUFBWSxVQUV0RDJHLEVBQU05RyxRQUFRLFNBQVNpRyxTQUFTMkMsVUFBVXpJLFlBQVksVUFHeEQyRyxFQUFNOUcsUUFBUSxTQUFTaUcsU0FBU0UsV0FBV2hHLFlBQVksVUFHckUsSUFBSWdKLEVBQWNyQyxFQUFNOUcsUUFBUSxTQUFTQSxRQUFRLE1BQU1tRyxXQU92RCxHQU5JcEgsRUFDRm9LLEVBQVlyRCxHQUFHLEdBQUd6RSxTQUFTLFdBQVdtRyxNQUFNLEVBQXNCLEVBQW5Cc0IsRUFBVTdJLFFBQVlFLFlBQVksVUFFakZnSixFQUFZckQsR0FBRyxHQUFHekUsU0FBUyxXQUFXbEIsWUFBWSxXQUcvQ2pDLEtBQUsySSxhQUFhQyxFQUFPLFVBQVVJLFFBQVMsQ0FDL0NpQyxFQUFZaEosWUFBWSxVQUN4QixJQUFJOEYsRUFBU2tELEVBQVlqSixLQUFLLFNBQVMsR0FDdkNoQyxLQUFLNkosUUFBUTlCLEdBQ2JwSSxFQUFFb0ksR0FBUTBCLFNBQVMsU0FBU3hILFlBQVksY0FBY3lILElBQUksZ0JBQWlCLFdBQ3pFL0osRUFBRUssTUFBTWlDLFlBQVksV0FJeEIySSxFQUFVNUksS0FBSyxpQkFBaUJ5SCxTQUFTLFNBQVN4SCxZQUFZLDBCQUEwQjJGLElBQUksR0FBRzhCLElBQUksZ0JBQWlCLFdBQ2xIa0IsRUFBVTVJLEtBQUssaUJBQWlCQyxZQUFZLFNBQ3hDYixFQUFLMEksV0FBV2xCLEtBQ2xCeEgsRUFBSzJKLHNCQUFzQm5DLEdBQzNCQSxFQUFNekYsU0FBUyxZQUFZbEIsWUFBWSxpQkFBaUJ3SCxTQUFTLHVCQUt2RXlCLGFBQWMsU0FBVUMsRUFBUXZDLEVBQU92SCxHQUNyQyxJQUFJRSxFQUFTcUgsRUFBTTlHLFFBQVEsYUFDM0IsWUFBcUMsSUFBMUJQLEVBQU9FLEtBQUssWUFBdUQsSUFBMUJGLEVBQU9FLEtBQUssYUFJaEUwSixFQUFPMUIsU0FBUyxVQUNoQmIsRUFBTXRGLE9BQU8sd0RBQ2JzRixFQUFNekYsV0FBV2lJLElBQUksWUFBWXBHLElBQUksVUFBVyxJQUNoRHpELEVBQU9FLEtBQUssVUFBVSxHQUN0QjlCLEVBQUUsa0JBQTJDLEtBQXZCMEIsRUFBUWQsV0FBb0IsSUFBTWMsRUFBUWQsV0FBYSxLQUFLOEssS0FBSyxZQUFZLElBQzVGLElBR1RDLFdBQVksU0FBVUgsRUFBUXZDLEVBQU92SCxHQUNuQyxJQUFJRSxFQUFTcUgsRUFBTTlHLFFBQVEsZ0JBQzNCcUosRUFBT2xKLFlBQVksVUFDbkIyRyxFQUFNNUcsS0FBSyxZQUFZUixTQUN2Qm9ILEVBQU16RixXQUFXd0csV0FBVyxTQUM1QnBJLEVBQU9FLEtBQUssVUFBVSxHQUN0QjlCLEVBQUUsa0JBQTJDLEtBQXZCMEIsRUFBUWQsV0FBb0IsSUFBTWMsRUFBUWQsV0FBYSxLQUFLOEssS0FBSyxZQUFZLElBR3JHdkIsV0FBWSxTQUFVbEIsR0FDcEIsT0FBT0EsRUFBTXpGLFNBQVMsU0FBU29JLEtBQUssU0FBU2pHLFFBQVEsUUFBVSxHQUdqRXlFLG9CQUFxQixTQUFVb0IsR0FDN0JBLEVBQU9LLFlBQVksaUJBQWlCQSxZQUFZLG9CQUdsRFQsc0JBQXVCLFNBQVVuQyxHQUMvQixJQUFJN0ksRUFBTzZJLEVBQU05RyxRQUFRLGFBQWFMLEtBQUssV0FDM0MsR0FBSTFCLEVBQUtNLDBCQUErQyxJQUFqQk4sRUFBS3FELFNBQTJCd0YsRUFBTTlHLFFBQVEsVUFBVUwsS0FBSyxtQkFBb0IsQ0FDdEgsSUFBSWdLLEVBQVc3QyxFQUFNOUcsUUFBUSxTQUFTaUcsU0FBUzhDLE9BQzNDWSxFQUFTMUosU0FDUDBKLEVBQVN6RCxHQUFHLFdBQ2RZLEVBQU16RixTQUFTLGFBQWFzRyxTQUFTLG1CQUFtQnhILFlBQVksb0JBRXBFMkcsRUFBTXpGLFNBQVMsYUFBYXNHLFNBQVMsb0JBQW9CeEgsWUFBWSxvQkFHekUsSUFBSXlKLEVBQVc5QyxFQUFNOUcsUUFBUSxTQUFTaUcsU0FBUzRELE9BQzNDRCxFQUFTM0osU0FDUDJKLEVBQVMxRCxHQUFHLFdBQ2RZLEVBQU16RixTQUFTLGNBQWNzRyxTQUFTLG9CQUFvQnhILFlBQVksbUJBRXRFMkcsRUFBTXpGLFNBQVMsY0FBY3NHLFNBQVMsbUJBQW1CeEgsWUFBWSx5QkFHcEUsQ0FDTCxJQUFJMkosRUFBUWhELEVBQU05RyxRQUFRLFNBQVNpRyxTQUFTRSxXQUN4QzRELElBQWNELEVBQU03SixTQUFVNkosRUFBTTVELEdBQUcsV0FDM0NZLEVBQU16RixTQUFTLGFBQWFxSSxZQUFZLG1CQUFvQkssR0FBYUwsWUFBWSxtQkFBb0JLLEdBQ3pHakQsRUFBTXpGLFNBQVMsY0FBY3FJLFlBQVksa0JBQW1CSyxHQUFhTCxZQUFZLG9CQUFxQkssS0FJOUdoQyxRQUFTLFNBQVVpQyxHQUNiQSxJQUNGQSxFQUFLQyxNQUFNQyxZQUFjRixFQUFLRSxjQUlsQ0MsV0FBWSxTQUFVQyxFQUFVQyxFQUFPcE0sR0FDckMsSUFBSXFCLEVBQU9wQixLQUNOa00sRUFBUy9JLFdBQVkrSSxFQUFTL0ksYUFDbkN4RCxFQUFFd0ksS0FBSytELEVBQVMvSSxTQUFVLFNBQVVpSixFQUFPQyxHQUN6Q0EsRUFBTUMsU0FBV0osRUFBU2hFLEtBRTVCLElBQUlxRSxFQUFNNU0sRUFBRTZNLFdBRVJDLEVBQVc5TSxFQUFFLFFBQVVJLEVBQUthLFVBQVksb0JBQXNCLEtBQU9zTCxFQUFTbk0sRUFBS0ssUUFBVSxRQUFVOEwsRUFBU25NLEVBQUtLLFFBQVUsSUFBTSxLQUFPOEwsRUFBU0ksU0FBVyxpQkFBbUJKLEVBQVNJLFNBQVcsSUFBTSxJQUFNLEtBQ3BON0MsU0FBUyxTQUFXeUMsRUFBU1EsV0FBYSxLQUFRUCxHQUFTcE0sRUFBS08sTUFBUSxZQUFjLEtBQ3JGUCxFQUFLNE0sYUFDUEYsRUFBU25KLE9BQU92RCxFQUFLNE0sYUFBYVQsSUFFbENPLEVBQVNuSixPQUFPLHNCQUF3QjRJLEVBQVNuTSxFQUFLSSxXQUFhLFVBQ2hFbUQsWUFBbUMsSUFBckJ2RCxFQUFLNk0sWUFBOEIseUJBQTJCVixFQUFTbk0sRUFBSzZNLGNBQWdCLElBQU0sU0FBVyxJQUdoSSxJQUFJdkUsRUFBUTZELEVBQVNwRSxjQUFnQixHQUNyQyxHQUFJL0gsRUFBSzhNLGVBQWtCVixFQUFRLEVBQUtwTSxFQUFLOE0sZUFDM0MsR0FBS1YsRUFBUSxHQUFNcE0sRUFBSzhNLGVBQWlCQyxPQUFPekUsRUFBTTBFLE9BQU8sRUFBRSxJQUFLLENBQ2xFLElBQUlDLEVBQU9iLEVBQVEsR0FBTXBNLEVBQUtPLE1BQVEsT0FBUyxRQUMvQ21NLEVBQVNuSixPQUFPLDZCQUErQjBKLEVBQU8sdUJBR3BERixPQUFPekUsRUFBTTBFLE9BQU8sRUFBRSxLQUN4Qk4sRUFBU25KLE9BQU8sZ0RBRWZ3SixPQUFPekUsRUFBTTBFLE9BQU8sRUFBRSxLQUN2Qk4sRUFBU25KLE9BQU8sbUdBR2Z3SixPQUFPekUsRUFBTTBFLE9BQU8sRUFBRSxLQUN2Qk4sRUFBU25KLE9BQU8sbURBQ2JILFNBQVMsVUFBVThKLFFBQVEsZ0JBQWlCbE4sRUFBS1ksaUJBQW1CLGlCQWdVM0UsT0E1VEE4TCxFQUFTNUcsR0FBRyx3QkFBeUIsU0FBU2pFLEdBQzVDLElBQUlnSCxFQUFRakosRUFBRUssTUFBT2tOLEdBQU8sRUFDeEJDLEVBQVd2RSxFQUFNekYsU0FBUyxZQUUxQmlLLEdBRGF4RSxFQUFNekYsU0FBUyxjQUNkeUYsRUFBTXpGLFNBQVMsZ0JBQzdCa0ssRUFBWXpFLEVBQU16RixTQUFTLGFBQ1osZUFBZnZCLEVBQU1rQixNQUNKcUssRUFBU3BMLFNBQ1htTCxFQUFPOUwsRUFBS3VILGFBQWFDLEVBQU8sVUFBVUksUUFDMUNtRSxFQUFTM0IsWUFBWSxpQkFBa0IwQixHQUFNMUIsWUFBWSxrQkFBbUIwQixJQUUxRUUsRUFBWXJMLFNBQ2RtTCxFQUFPOUwsRUFBS3VILGFBQWFDLEVBQU8sWUFBWUksUUFDNUNvRSxFQUFZNUIsWUFBWSxtQkFBb0IwQixHQUFNMUIsWUFBWSxnQkFBaUIwQixJQUU3RUcsRUFBVXRMLFFBQ1pYLEVBQUsySixzQkFBc0JuQyxJQUc3QkEsRUFBTXpGLFNBQVMsU0FBU2xCLFlBQVksb0VBS3hDd0ssRUFBUzVHLEdBQUcsUUFBUyxTQUFTakUsR0FDNUJqQyxFQUFFSyxNQUFNOEIsUUFBUSxhQUFhRSxLQUFLLFlBQVlDLFlBQVksV0FDMUR0QyxFQUFFSyxNQUFNeUosU0FBUyxhQUluQmdELEVBQVM1RyxHQUFHLFFBQVMsV0FBWSxTQUFTakUsR0FDeENBLEVBQU0wTCxrQkFDTixJQUFJQyxFQUFRNU4sRUFBRUssTUFDVjRJLEVBQVEyRSxFQUFNeEYsU0FDZHlGLEVBQWNwTSxFQUFLdUgsYUFBYUMsRUFBTyxVQUMzQyxHQUFJNEUsRUFBWXpFLE1BQU8sQ0FDckIsSUFBSVEsRUFBVVgsRUFBTTlHLFFBQVEsU0FBU0EsUUFBUSxNQUFNbUcsU0FBUyxVQUFVakcsS0FBSyxTQUMzRSxHQUFJdUgsRUFBUXZCLEdBQUcsVUFBYSxPQUV4QndGLEVBQVl4RSxTQUNkNUgsRUFBSzhILFdBQVdOLEdBQ2hCVyxFQUFRRyxJQUFJLGdCQUFpQixXQUN2QnRJLEVBQUswSSxXQUFXbEIsS0FDbEJ4SCxFQUFLMkksb0JBQW9Cd0QsR0FDekJuTSxFQUFLMkosc0JBQXNCbkMsT0FJL0J4SCxFQUFLd0ksV0FBV2hCLE9BRWIsQ0FFTCxJQUFJeEksRUFBU21OLEVBQU14RixTQUFTLEdBQUdHLEdBRTNCOUcsRUFBSzhKLGFBQWFxQyxFQUFPM0UsRUFBTzdJLElBRWxDSixFQUFFNEQsTUFBT0MsSUFBTzdELEVBQUU4TixXQUFXMU4sRUFBS3FELFFBQVEyRSxRQUFVaEksRUFBS3FELFFBQVEyRSxPQUFPbUUsR0FBWW5NLEVBQUtxRCxRQUFRMkUsT0FBUzNILEVBQVFxRCxTQUFZLFNBQzdIQyxLQUFLLFNBQVNqQyxHQUNUbUgsRUFBTTlHLFFBQVEsYUFBYUwsS0FBSyxZQUM3QjlCLEVBQUUrTixjQUFjak0sSUFDbkJMLEVBQUt1TSxVQUFVL0UsRUFBT25ILEVBQU0xQixNQUlqQzhELEtBQUssV0FBYUUsUUFBUUMsSUFBSSxvQ0FDOUJDLE9BQU8sV0FBYTdDLEVBQUtrSyxXQUFXaUMsRUFBTzNFLEVBQU83SSxRQU16RDBNLEVBQVM1RyxHQUFHLFFBQVMsY0FBZSxTQUFTakUsR0FDM0NBLEVBQU0wTCxrQkFDTixJQUFJQyxFQUFRNU4sRUFBRUssTUFDVjRJLEVBQVEyRSxFQUFNeEYsU0FDZDZGLEVBQWdCeE0sRUFBS3VILGFBQWFDLEVBQU8sWUFDN0MsR0FBSWdGLEVBQWM3RSxNQUFPLENBRXZCLEdBRGdCSCxFQUFNOUcsUUFBUSxNQUFNbUcsU0FBUyxTQUMvQmpHLEtBQUssaUJBQWlCZ0csR0FBRyxVQUFhLE9BRWhENEYsRUFBYzVFLFFBQ2hCNUgsRUFBSzRJLGFBQWFwQixHQUVsQnhILEVBQUtpSixhQUFhekIsT0FFZixDQUNMLElBQUl4SSxFQUFTbU4sRUFBTXhGLFNBQVMsR0FBR0csR0FDM0I5RyxFQUFLOEosYUFBYXFDLEVBQU8zRSxFQUFPN0ksSUFDbENKLEVBQUU0RCxNQUFPQyxJQUFPN0QsRUFBRThOLFdBQVcxTixFQUFLcUQsUUFBUUQsVUFBWXBELEVBQUtxRCxRQUFRRCxTQUFTK0ksR0FBWW5NLEVBQUtxRCxRQUFRRCxTQUFXL0MsRUFBUXFELFNBQVksU0FDbklDLEtBQUssU0FBU2pDLEVBQU1rQyxFQUFZQyxHQUMzQmdGLEVBQU05RyxRQUFRLGFBQWFMLEtBQUssV0FDOUJBLEVBQUswQixTQUFTcEIsUUFDaEJYLEVBQUt5TSxZQUFZakYsRUFBT25ILEVBQU05QixFQUFFMkIsVUFBV3ZCLEdBQVFPLE1BQU8sT0FJL0R1RCxLQUFLLFNBQVNELEVBQU9ELEVBQVlHLEdBQ2hDQyxRQUFRQyxJQUFJLHVDQUViQyxPQUFPLFdBQ043QyxFQUFLa0ssV0FBV2lDLEVBQU8zRSxFQUFPN0ksUUFPdEMwTSxFQUFTNUcsR0FBRyxRQUFTLGFBQWMsU0FBU2pFLEdBQzFDLElBQUlrTSxFQUFRbk8sRUFBRUssTUFDVitOLEVBQWVELEVBQU0vRixTQUFTNEQsT0FDOUJwQixFQUFld0QsRUFBYS9MLEtBQUssU0FDakNnTSxFQUFZRCxFQUFhNUssV0FBV0EsU0FBUyxTQUM3QzZLLEVBQVVoRyxHQUFHLFlBQ2pCOEYsRUFBTXRDLFlBQVksa0NBQ2RqQixFQUFhM0MsR0FBRyxHQUFHSSxHQUFHLGNBQ3hCK0YsRUFBYTlMLFlBQVksVUFDekJiLEVBQUt5SSxRQUFRbUUsRUFBVXhELElBQUksSUFDM0J3RCxFQUFVdkUsU0FBUyxTQUFTeEgsWUFBWSxZQUFZMkYsR0FBRyxHQUFHOEIsSUFBSSxnQkFBaUIsV0FDN0VzRSxFQUFVL0wsWUFBWSxhQUd4QnNJLEVBQWFkLFNBQVMsa0JBQWtCN0IsR0FBRyxHQUFHOEIsSUFBSSxnQkFBaUIsV0FDakVhLEVBQWF0SSxZQUFZLFNBRXpCc0ksRUFBYXpJLFFBQVEsTUFBTTJILFNBQVMsWUFFdENjLEVBQWF2SSxLQUFLLGNBQWNDLFlBQVksbUJBQW1Cd0gsU0FBUyxzQkFLNUVnRCxFQUFTNUcsR0FBRyxRQUFTLHdCQUF5QixTQUFTakUsR0FDckRBLEVBQU0wTCxrQkFDTixJQUFJQyxFQUFRNU4sRUFBRUssTUFDVjRJLEVBQVEyRSxFQUFNeEYsU0FDZGtHLEVBQWdCN00sRUFBS3VILGFBQWFDLEVBQU8sWUFDN0MsR0FBSXFGLEVBQWNsRixNQUFPLENBRXZCLEdBRGdCSCxFQUFNOUcsUUFBUSxTQUFTaUcsU0FBU0UsV0FDbENqRyxLQUFLLGlCQUFpQmdHLEdBQUcsVUFBYSxPQUNwRCxHQUFJakksRUFBS00sbUJBQW9CLENBQzNCLElBQUlvTCxFQUFXN0MsRUFBTTlHLFFBQVEsU0FBU2lHLFNBQVM4QyxPQUMzQ2EsRUFBVzlDLEVBQU05RyxRQUFRLFNBQVNpRyxTQUFTNEQsT0FDM0M0QixFQUFNdkYsR0FBRyxhQUNQeUQsRUFBU3pELEdBQUcsV0FDZDVHLEVBQUs0SixhQUFhcEMsRUFBTyxRQUV6QnhILEVBQUtnSSxhQUFhUixFQUFPLFFBR3ZCOEMsRUFBUzFELEdBQUcsV0FDZDVHLEVBQUs0SixhQUFhcEMsRUFBTyxTQUV6QnhILEVBQUtnSSxhQUFhUixFQUFPLGNBSXpCcUYsRUFBY2pGLFFBQ2hCNUgsRUFBS2dJLGFBQWFSLEdBRWxCeEgsRUFBSzRKLGFBQWFwQyxPQUdqQixDQUVMLElBQUl4SSxFQUFTbU4sRUFBTXhGLFNBQVMsR0FBR0csR0FDM0IxRSxFQUFPcEMsRUFBS3VILGFBQWFDLEVBQU8sVUFBZSxNQUNoRGpKLEVBQUU4TixXQUFXMU4sRUFBS3FELFFBQVE2RSxVQUFZbEksRUFBS3FELFFBQVE2RSxTQUFTaUUsR0FBWW5NLEVBQUtxRCxRQUFRNkUsU0FBVzdILEVBQ2hHVCxFQUFFOE4sV0FBVzFOLEVBQUtxRCxRQUFROEssVUFBWW5PLEVBQUtxRCxRQUFROEssU0FBU2hDLEdBQVluTSxFQUFLcUQsUUFBUThLLFNBQVc5TixFQUMvRmdCLEVBQUs4SixhQUFhcUMsRUFBTzNFLEVBQU83SSxJQUNsQ0osRUFBRTRELE1BQU9DLElBQU9BLEVBQUtDLFNBQVksU0FDaENDLEtBQUssU0FBU2pDLEVBQU1rQyxFQUFZQyxHQUMzQmdGLEVBQU05RyxRQUFRLGFBQWFMLEtBQUssWUFDOUJBLEVBQUt3RyxVQUFZeEcsRUFBSzBCLFdBQ3hCL0IsRUFBSytNLFlBQVl2RixFQUFPbkgsRUFBTTFCLEtBSW5DOEQsS0FBSyxTQUFTRCxFQUFPRCxFQUFZRyxHQUNoQ0MsUUFBUUMsSUFBSSxzQ0FFYkMsT0FBTyxXQUNON0MsRUFBS2tLLFdBQVdpQyxFQUFPM0UsRUFBTzdJLFFBS2xDQSxFQUFLYSxXQUNQNkwsRUFBUzVHLEdBQUcsWUFBYSxTQUFTakUsR0FDaEMsSUFBSXdNLEVBQVl4TSxFQUFNNEUsY0FDbEI2SCxFQUFZLFVBQVVDLEtBQUs5TyxFQUFPK08sVUFBVUMsVUFBVUMsZUFLMUQsR0FKSUosR0FDRkQsRUFBVU0sYUFBYUMsUUFBUSxZQUFhLG9CQUdTLFNBQW5EbEMsRUFBUzNLLFFBQVEsYUFBYWtELElBQUksYUFBeUIsQ0FDN0QsSUFBSTRKLEVBQVdDLEVBQ1ZwUCxFQUFTcVAsY0FBYyxnQkFPMUJGLEVBQVluQyxFQUFTM0ssUUFBUSxhQUFhcUIsU0FBUyxlQUFlcUgsSUFBSSxHQUN0RXFFLEVBQVlsUCxFQUFFaVAsR0FBV3pMLFdBQVdxSCxJQUFJLE1BUHhDb0UsRUFBWW5QLEVBQVNzUCxnQkFBZ0IsNkJBQThCLFFBQ3pEck0sVUFBVXNNLElBQUksY0FDeEJILEVBQVlwUCxFQUFTc1AsZ0JBQWdCLDZCQUE2QixRQUNsRUgsRUFBVUssWUFBWUosR0FDdEJwQyxFQUFTM0ssUUFBUSxhQUFhd0IsT0FBT3NMLElBS3ZDLElBQUlNLEVBQWN6QyxFQUFTM0ssUUFBUSxhQUFha0QsSUFBSSxhQUFhSyxNQUFNLEtBQ25FOEosRUFBUWxJLEtBQUtLLElBQUk5SCxFQUFPK0gsV0FBK0IsUUFBbkJ4SCxFQUFLYyxXQUEwQyxRQUFuQmQsRUFBS2MsVUFBdUJxTyxFQUFZLEdBQUc1RixNQUFNNEYsRUFBWSxHQUFHNUosUUFBUSxLQUFPLEdBQUs0SixFQUFZLEtBQ3BLTixFQUFVUSxhQUFhLFFBQVMzQyxFQUFTNEMsWUFBVyxJQUNwRFQsRUFBVVEsYUFBYSxTQUFVM0MsRUFBUzZDLGFBQVksSUFDdERULEVBQVVPLGFBQWEsSUFBSSxFQUFJRCxHQUMvQk4sRUFBVU8sYUFBYSxJQUFJLEVBQUlELEdBQy9CTixFQUFVTyxhQUFhLFFBQVMsSUFBTUQsR0FDdENOLEVBQVVPLGFBQWEsU0FBVSxHQUFLRCxHQUN0Q04sRUFBVU8sYUFBYSxLQUFNLEVBQUlELEdBQ2pDTixFQUFVTyxhQUFhLEtBQU0sRUFBSUQsR0FDakNOLEVBQVVPLGFBQWEsZUFBZ0IsRUFBSUQsR0FDM0MsSUFBSUksRUFBVW5CLEVBQVVvQixRQUFVTCxFQUM5Qk0sRUFBVXJCLEVBQVVzQixRQUFVUCxFQVdsQyxHQVZ1QixRQUFuQnBQLEVBQUtjLFdBQ1AwTyxFQUFVbkIsRUFBVXNCLFFBQVVQLEVBQzlCTSxFQUFVckIsRUFBVW9CLFFBQVVMLEdBQ0YsUUFBbkJwUCxFQUFLYyxXQUNkME8sRUFBVTlDLEVBQVM0QyxZQUFXLEdBQVNqQixFQUFVc0IsUUFBVVAsRUFDM0RNLEVBQVVyQixFQUFVb0IsUUFBVUwsR0FDRixRQUFuQnBQLEVBQUtjLFlBQ2QwTyxFQUFVOUMsRUFBUzRDLFlBQVcsR0FBU2pCLEVBQVVvQixRQUFVTCxFQUMzRE0sRUFBVWhELEVBQVM2QyxhQUFZLEdBQVNsQixFQUFVc0IsUUFBVVAsR0FFMURkLEVBQVcsQ0FDYlEsRUFBVU8sYUFBYSxPQUFRLHNCQUMvQlAsRUFBVU8sYUFBYSxTQUFVLGtCQUNqQyxJQUFJTyxFQUFtQmxRLEVBQVNtUSxjQUFjLE9BQzlDRCxFQUFpQkUsSUFBTSw0QkFBNkIsSUFBS0MsZUFBaUJDLGtCQUFrQm5CLEdBQzVGUixFQUFVTSxhQUFhc0IsYUFBYUwsRUFBa0JKLEVBQVNFLFFBRS9EckIsRUFBVU0sYUFBYXNCLGFBQWFwQixFQUFXVyxFQUFTRSxHQUc1RCxJQUFJUSxFQUFXdFEsRUFBRUssTUFDYmtRLEVBQVlELEVBQVNuTyxRQUFRLFVBQVVtRyxXQUFXTCxHQUFHLEdBQUc1RixLQUFLLGVBQzdEbU8sRUFBWUYsRUFBU25PLFFBQVEsU0FBU0UsS0FBSyxTQUMvQ2lPLEVBQVNuTyxRQUFRLGFBQ2RMLEtBQUssVUFBV3dPLEdBQ2hCak8sS0FBSyxTQUFTbUcsS0FBSyxTQUFTaUUsRUFBT04sSUFDSCxJQUEzQnFFLEVBQVUvRCxNQUFNTixLQUNkL0wsRUFBS3FRLGFBQ0hyUSxFQUFLcVEsYUFBYUgsRUFBVUMsRUFBV3ZRLEVBQUVtTSxLQUMzQ25NLEVBQUVtTSxHQUFNckMsU0FBUyxlQUduQjlKLEVBQUVtTSxHQUFNckMsU0FBUyxvQkFLMUI1RCxHQUFHLFdBQVksU0FBU2pFLEdBQ3ZCQSxFQUFNeUMsaUJBQ0QxRSxFQUFFSyxNQUFNZ0ksR0FBRyxrQkFDZHBHLEVBQU00RSxjQUFja0ksYUFBYTJCLFdBQWEsVUFHakR4SyxHQUFHLFVBQVcsU0FBU2pFLEdBQ3RCakMsRUFBRUssTUFBTThCLFFBQVEsYUFBYUUsS0FBSyxnQkFBZ0JDLFlBQVksaUJBRS9ENEQsR0FBRyxPQUFRLFNBQVNqRSxHQUNuQixJQUFJME8sRUFBWTNRLEVBQUVLLE1BQ2R1USxFQUFZRCxFQUFVeE8sUUFBUSxhQUM5Qm1PLEVBQVdNLEVBQVU5TyxLQUFLLFdBQzlCOE8sRUFBVXZPLEtBQUssZ0JBQWdCQyxZQUFZLGVBQzNDLElBQUlpTyxFQUFZRCxFQUFTbk8sUUFBUSxVQUFVbUcsV0FBV0wsR0FBRyxHQUFHekUsV0FFNUQsR0FBS21OLEVBQVV4TyxRQUFRLE1BQU1tRyxXQUFXbEcsT0FPakMsQ0FDTCxJQUFJeU8sRUFBY2pMLFNBQVMrSyxFQUFVdkksU0FBU3dELEtBQUssWUFBYyxFQUM3RGtGLEVBQWtCLGtHQUN0QkgsRUFBVXhPLFFBQVEsTUFBTTZKLE9BQU8rRSxVQUFVdk4sV0FBV29JLEtBQUssVUFBV2lGLEdBQy9EUCxFQUFTak8sS0FBSyxtQkFBbUJELFFBQ3BDa08sRUFBUzNNLE9BQU9tTixHQUVsQkgsRUFBVXhPLFFBQVEsTUFBTW1HLFdBQVdMLEdBQUcsR0FBR3pFLFNBQVMsU0FBU3dOLE9BQU8scUZBQy9EN0YsTUFBTWEsT0FBT3JJLE9BQU8yTSxFQUFTbk8sUUFBUSxTQUFTaUcsVUFDakQsSUFBSTZJLEVBQVlYLEVBQVNuTyxRQUFRLFNBQVNpRyxTQUFTRSxXQUFXakcsS0FBSyxlQUMxQyxJQUFyQjRPLEVBQVU3TyxRQUNaNk8sRUFBVXROLE9BQU9tTixRQWpCbkJILEVBQVVoTixPQUFPLG1EQUNkeUUsU0FBU3dELEtBQUssVUFBVyxHQUN6QnhELFNBQVM4SSxNQUFNLDJMQUdmNUksU0FBUyxTQUFTM0UsT0FBTzJNLEVBQVNqTyxLQUFLLG1CQUFtQlIsU0FBU3NKLE1BQU1oSixRQUFRLFNBQVNpRyxVQWdCL0YsSUFBSStJLEVBQWN2TCxTQUFTMkssRUFBVTNFLEtBQUssWUFDMUMsR0FBSXVGLEVBQWMsRUFBRyxDQUNuQlosRUFBVTNFLEtBQUssVUFBV3VGLEVBQWMsR0FDckMvSSxTQUFTNEQsT0FBT3hJLFdBQVdvSSxLQUFLLFVBQVd1RixFQUFjLEdBQ3pEaEcsTUFBTWEsT0FBT3hJLFdBQVdtRyxNQUFNLEVBQUcsR0FBRzlILFNBQ3ZDLElBQUl1UCxFQUFZYixFQUFVbkksU0FBU0UsU0FBUyxVQUFVOUUsV0FBV25CLEtBQUssZUFDOUMsSUFBcEIrTyxFQUFVaFAsUUFDWmdQLEVBQVUvTyxLQUFLLG1CQUFtQlIsY0FHcEMwTyxFQUFVdkcsV0FBVyxXQUNsQjNILEtBQUssZUFBZVIsU0FDcEJzSixNQUFNQSxNQUFNN0MsV0FBV3pHLFNBRTVCK08sRUFBVTFOLGdCQUFpQkMsS0FBUSx1QkFBd0JrTyxZQUFlZixFQUFVZ0IsU0FBWWYsRUFBVS9NLFdBQVkrTixTQUFZWixNQUlsSXZRLEVBQUtrTSxZQUNQbE0sRUFBS2tNLFdBQVdRLEVBQVVQLEdBRTVCSyxFQUFJNEUsUUFBUTFFLEdBQ0xGLEVBQUk2RSxXQUdibk8sZUFBZ0IsU0FBVW9PLEVBQVduRixFQUFVQyxFQUFPcE0sRUFBTXVSLEdBQzFELElBQ0lDLEVBREFuUSxFQUFPcEIsS0FHUHdSLEVBQWN0RixFQUFTL0ksU0FDdkJzTyxJQUFjRCxHQUFjQSxFQUFZelAsT0FDeEMyUCxLQUFrQjNSLEVBQUs4TSxlQUFrQlYsRUFBUSxHQUFNcE0sRUFBSzhNLGVBc0JoRSxHQXJCSThFLE9BQU9DLEtBQUsxRixHQUFVbkssT0FBUyxJQUNqQ3dQLEVBQWVHLEVBQWlCTCxFQUFZMVIsRUFBRSxXQUN6QytSLEdBQ0hMLEVBQVUvTixPQUFPaU8sR0FFbkI1UixFQUFFa1MsS0FBSzdSLEtBQUtpTSxXQUFXQyxFQUFVQyxFQUFPcE0sSUFDdkMyRCxLQUFLLFNBQVMrSSxHQUNUaUYsRUFDRkgsRUFBYWpPLE9BQU9tSixHQUVwQjhFLEVBQWFqTyxPQUFPbUosRUFBU3FGLEtBQUssV0FBYUwsRUFBYyxhQUFvQyxFQUFyQkQsRUFBWXpQLE9BQWEsSUFBTSxJQUFNLGVBQWVELFFBQVEsT0FFdEl3UCxHQUNGQSxNQUdIek4sS0FBSyxXQUNKRSxRQUFRQyxJQUFJLDJCQUlaeU4sRUFBYSxDQUNzQixJQUFqQ0UsT0FBT0MsS0FBSzFGLEdBQVVuSyxTQUN4QndQLEVBQWVGLEdBRWpCLElBQUlVLEVBQVk1RixFQUFRLEdBQUtwTSxFQUFLTyxPQUFTNEwsRUFBUzhGLFVBQWEsVUFBWSxHQUN6RUMsS0FBbUJsUyxFQUFLOE0sZUFBa0JWLEVBQVEsR0FBTXBNLEVBQUs4TSxlQUc1RG9GLEdBQ0hWLEVBQWFqTyxPQUFPLG1CQUFxQnlPLEVBQVcsa0JBQXlDLEVBQXJCUCxFQUFZelAsT0FBYSw0Q0FJbkcsSUFBSyxJQUREbVEsRUFBWSxtQkFBcUJILEVBQVcsc0NBQ3ZDeFAsRUFBRSxFQUFHQSxFQUFFaVAsRUFBWXpQLE9BQVFRLElBQ2xDMlAsR0FBYSxvRkFFZkEsR0FBYSx3Q0FDYixJQUFJQyxFQUNBRixHQUNGRSxFQUFheFMsRUFBRSxRQUNYb1MsR0FDRkksRUFBVzFJLFNBQVNzSSxHQUVsQjVGLEVBQVEsSUFBTXBNLEVBQUs4TSxjQUNyQjBFLEVBQWFqTyxPQUFPLDJCQUE2QnlPLEVBQVcsb0JBQ3pEL1AsS0FBSyxrQkFBa0JtQixXQUFXRyxPQUFPNk8sR0FFNUNaLEVBQWFqTyxPQUFPNk8sS0FHdEJBLEVBQWF4UyxFQUFFLG1CQUFxQm9TLEVBQVcsTUFDL0NSLEVBQWFqTyxPQUFPNE8sR0FBVzVPLE9BQU82TyxJQUd4Q3hTLEVBQUV3SSxLQUFLcUosRUFBYSxXQUNsQixJQUFJWSxFQUE4QnpTLEVBQWxCc1MsRUFBb0IsT0FBWSxvQkFDaERFLEVBQVc3TyxPQUFPOE8sR0FDbEJoUixFQUFLNkIsZUFBZW1QLEVBQVdwUyxLQUFNbU0sRUFBUSxFQUFHcE0sRUFBTXVSLE9BSzVEZSxlQUFnQixTQUFVaEIsRUFBV25GLEVBQVVuTSxFQUFNdVIsR0FDbkQsSUFBSXZSLEVBQU9BLEdBQVFzUixFQUFVdlAsUUFBUSxhQUFhTCxLQUFLLFdBQ25EQSxFQUFPeUssRUFBUy9JLFVBQVkrSSxFQUFTakUsU0FDekNvSixFQUFVclAsS0FBSyxZQUFZdUosS0FBSyxVQUF5QixFQUFkOUosRUFBS00sUUFDaEQvQixLQUFLaUQsZUFBZW9PLEdBQWFsTyxTQUFZMUIsR0FBUSxFQUFHMUIsRUFBTXVSLElBR2hFekQsWUFBYSxTQUFVakYsRUFBT25ILEVBQU0xQixHQUNsQyxJQUFJcUIsRUFBT3BCLEtBQ1BELEVBQU9BLEdBQVE2SSxFQUFNOUcsUUFBUSxhQUFhTCxLQUFLLFdBQy9DNlEsRUFBUSxFQUNadFMsS0FBS3FTLGVBQWV6SixFQUFNOUcsUUFBUSxTQUFVTCxFQUFNMUIsRUFBTSxhQUNoRHVTLElBQVU3USxFQUFLMEIsU0FBU3BCLFNBQ3ZCNkcsRUFBTXpGLFNBQVMsZUFBZXBCLFFBQ2pDNkcsRUFBTXRGLE9BQU8sbURBRVZzRixFQUFNNUcsS0FBSyxXQUFXRCxRQUN6QjZHLEVBQU16RixTQUFTLFVBQVU4SixRQUFRLGdCQUFpQmxOLEVBQUtZLGlCQUFtQixpQkFFNUVTLEVBQUtpSixhQUFhekIsT0FLeEIySixnQkFBaUIsU0FBVUMsRUFBY3RHLEVBQVVuTSxFQUFNdVIsR0FDdkQsSUFBSWxRLEVBQU9wQixLQUNQeVMsRUFBUzlTLEVBQUUsV0FDZnVNLEVBQVNwRSxhQUFlb0UsRUFBU3BFLGNBQWdCLE1BQ2pEbkksRUFBRWtTLEtBQUs3UixLQUFLaU0sV0FBV0MsRUFBVSxFQUFHbk0sR0FBUXlTLEVBQWExUSxRQUFRLGFBQWFMLEtBQUssYUFDaEZpQyxLQUFLLFNBQVMrSSxHQUNiZ0csRUFBT25QLE9BQU9tSixFQUFTeEssWUFBWSxZQUFZd0gsU0FBUyxjQUFjcUksS0FBSyxpREFBaURoUSxRQUFRLE9BQ3BJMlEsRUFBT25QLE9BQU8sbUZBRWRtUCxFQUFPblAsT0FBTyxtR0FDZCxJQUFJL0IsRUFBU0gsRUFBS0csT0FDbEJBLEVBQU8wTCxRQUFRd0YsR0FDWnRQLFNBQVMsZUFBZUcsT0FBTyxnREFDL0JILFNBQVMsV0FBV0EsV0FBV0csT0FBTy9CLEVBQU80QixTQUFTLFNBQVM4RyxRQUNsRXFILE1BRUR6TixLQUFLLFdBQ0pFLFFBQVFDLElBQUksbUNBSWxCMkosVUFBVyxTQUFVNkUsRUFBYy9RLEVBQU0xQixHQUN2QyxJQUFJcUIsRUFBT3BCLEtBQ1hBLEtBQUt1UyxnQkFBZ0JDLEVBQWMvUSxFQUFNMUIsRUFBTSxXQUN4Q3lTLEVBQWFyUCxTQUFTLFlBQVlwQixRQUNyQ3lRLEVBQWFyUCxTQUFTLFVBQVUwTixNQUFNLGdEQUV4Q3pQLEVBQUt3SSxXQUFXNEksTUFJcEJFLGVBQWdCLFNBQVVDLEVBQWFDLEVBQWNDLEdBRW5ELElBQUssSUFEREMsRUFBUSxHQUNIdlEsRUFBSSxFQUFHQSxFQUFJc1EsRUFBcUJ0USxJQUN2Q3VRLEdBQVMsb0ZBRVhILEVBQVk1SyxTQUFTcUMsUUFBUSxZQUFZakgsV0FBV29JLEtBQUssVUFBMEIsRUFBZnFILEdBQ2pFOUgsTUFBTWEsT0FBT3hJLFNBQVMsVUFBVTBOLE1BQU1pQyxJQUczQ0MsaUJBQWtCLFNBQVVDLEVBQVk5RyxFQUFVbk0sRUFBTXVSLEdBQ3RELElBQUlsUSxFQUFPcEIsS0FDUEQsRUFBT0EsR0FBUWlULEVBQVdsUixRQUFRLGFBQWFMLEtBQUssV0FDcER3UixFQUFrQi9HLEVBQVNqRSxTQUFXaUUsRUFBU2pFLFNBQVNsRyxPQUFTbUssRUFBUy9JLFNBQVNwQixPQUNuRjhRLEVBQXNCRyxFQUFXakwsU0FBU0MsR0FBRyxNQUFRZ0wsRUFBV2xSLFFBQVEsTUFBTXFCLFdBQVdwQixPQUFTLEVBQ2xHNlEsRUFBZUMsRUFBc0JJLEVBQ3JDQyxFQUFpQk4sRUFBZSxFQUFLM0wsS0FBS2tNLE1BQU1QLEVBQWEsRUFBSSxHQUFLLEVBRTFFLEdBQUlJLEVBQVdqTCxTQUFTQyxHQUFHLE1BQU8sQ0FDbEJnTCxFQUFXbFIsUUFBUSxNQUFNc0ksUUFBUSxXQUMvQzRJLEVBQVdsUixRQUFRLE1BQU1zSSxRQUFRLFlBQVk1SSxTQUM3QyxJQUFJNFIsRUFBYSxFQUNqQnBULEtBQUtxUyxlQUFlVyxFQUFXakwsU0FBU2pHLFFBQVEsU0FBVW9LLEVBQVVuTSxFQUFNLFdBQ3hFLEtBQU1xVCxJQUFlSCxFQUFpQixDQUNwQyxJQUFJSSxFQUFjTCxFQUFXakwsU0FBU2pHLFFBQVEsU0FBU3FCLFNBQVMsV0FBV0EsU0FBUyxNQUNoRjBQLEVBQXNCLEdBQ3hCelIsRUFBS3NSLGVBQWVXLEVBQVl6TCxHQUFHLEdBQUcrSSxPQUFPcUMsRUFBV2xSLFFBQVEsTUFBTW1HLFdBQVd5SSxVQUFVNEMsVUFBV1YsRUFBY0MsR0FDcEhRLEVBQVk1SixTQUFTLFVBQVV6SCxLQUFLLFNBQVN5SCxTQUFTLGdCQUV0RHJJLEVBQUtzUixlQUFlVyxFQUFZekwsR0FBR3NMLEdBQWVyQyxNQUFNbUMsRUFBV2xSLFFBQVEsTUFBTXdSLFVBQVdWLEVBQWMsR0FDMUdTLEVBQVlqSSxJQUFJLE9BQVM4SCxFQUFnQixNQUFTekosU0FBUyxVQUN4REgsTUFBTSxFQUFHNEosR0FBZWxSLEtBQUssU0FBU3lILFNBQVMsZUFDL0NxQixNQUFNQSxNQUFNeEIsTUFBTTRKLEdBQWVsUixLQUFLLFNBQVN5SCxTQUFTLGVBRTdENkgsV0FHQyxDQUNMLElBQUlpQyxFQUFZLEVBQ2hCdlQsS0FBS2lELGVBQWUrUCxFQUFXbFIsUUFBUSxhQUFjb0ssRUFBVSxFQUFHbk0sRUFBTSxhQUNoRXdULElBQWNYLElBQ2xCeFIsRUFBS3NSLGVBQWVNLEVBQVdySCxPQUFPeEksU0FBUyxXQUM1Q0EsV0FBV3lFLEdBQUdzTCxHQUFlckMsTUFBTWxSLEVBQUUsb0JBQ3JDMkQsT0FBTzBQLElBQWNKLEVBQWMsR0FDdENJLEVBQVdsUixRQUFRLE1BQU1tRyxXQUFXTCxHQUFHLEdBQUc2QixTQUFTLFVBQVV6SCxLQUFLLFNBQVN5SCxTQUFTLGNBQ3BGdUosRUFBV2pMLFNBQVNFLFdBQVd3QixTQUFTLFVBQ3JDSCxNQUFNLEVBQUc0SixHQUFlbFIsS0FBSyxTQUFTeUgsU0FBUyxlQUMvQ3FCLE1BQU1BLE1BQU14QixNQUFNNEosR0FBZWxSLEtBQUssU0FBU3lILFNBQVMsY0FDM0Q2SCxTQU1SbkQsWUFBYSxTQUFVdkYsRUFBT25ILEVBQU0xQixHQUNsQyxJQUFJcUIsRUFBT3BCLEtBQ1hBLEtBQUsrUyxpQkFBaUJuSyxFQUFNOUcsUUFBUSxTQUFVTCxFQUFNMUIsRUFBTSxXQUN4RDZJLEVBQU05RyxRQUFRLFVBQVVMLEtBQUssa0JBQWtCLEdBQzFDbUgsRUFBTXpGLFNBQVMsYUFBYXBCLFFBQy9CNkcsRUFBTXpGLFNBQVMsWUFBWTBOLE1BQU0sbUdBRW5DelAsRUFBSzRKLGFBQWFwQyxNQUl0QjRLLFlBQWEsU0FBVTVLLEdBQ3JCLElBQUlXLEVBQVVYLEVBQU05RyxRQUFRLFNBQVNpRyxTQUNqQzZELEVBQVFyQyxFQUFReEIsU0FBU0UsV0FDekJzQixFQUFRdkIsR0FBRyxNQUNUaEksS0FBSzJJLGFBQWFDLEVBQU8sWUFBWUcsT0FDdkM2QyxFQUFNaEUsR0FBRyxHQUFHekUsU0FBUyxrQkFBa0IzQixTQUN2Q29LLEVBQU10QyxNQUFNLEVBQUcsR0FBR25HLFdBQVdvSSxLQUFLLFVBQVdLLEVBQU1oRSxHQUFHLEdBQUd6RSxXQUFXcEIsUUFDcEV3SCxFQUFRL0gsVUFFUm9LLEVBQU1oRSxHQUFHLEdBQUd6RSxXQUFXd0csV0FBVyxXQUMvQjNILEtBQUssZUFBZVIsU0FDcEJzSixNQUFNQSxNQUFNN0MsV0FBV3pHLFNBRzVCK0gsRUFBUXlGLElBQUl6RixFQUFRdEIsWUFBWXpHLFVBSXBDOEMsT0FBUSxTQUFVN0QsRUFBZ0JDLEdBQ2hDLElBQUlVLEVBQU9wQixLQUdYLEdBRkFTLE9BQTRDLElBQW5CQSxFQUFtQ0EsRUFBaUJULEtBQUtxQixRQUFRWixlQUMxRkMsT0FBc0QsSUFBeEJBLEVBQXdDQSxFQUFzQlYsS0FBS3FCLFFBQVFYLG9CQUNyR2YsRUFBRUssTUFBTW1ELFNBQVMsWUFBWXBCLE9BQy9CLE9BQU8sRUFFVCxJQUFJOUIsRUFBa0JELEtBQUtDLGdCQUN2QndULEVBQVF4VCxFQUFnQitCLEtBQUssU0FDNUJ5UixFQUFNMVIsT0FHVDBSLEVBQU14UixZQUFZLFVBRmxCaEMsRUFBZ0JxRCxPQUFPLGdGQUl6QixJQUFJb1EsRUFBY3pULEVBQWdCd0osU0FBUyxtQkFBbUJ6SCxLQUFLLHFCQUFxQndJLElBQUksR0FDeEYwQyxFQUFrQyxRQUEzQjlMLEVBQUtDLFFBQVFSLFdBQWtELFFBQTNCTyxFQUFLQyxRQUFRUixVQUM1RDhTLFlBQVlELEdBQ1ZFLE1BQVMxRyxFQUFPd0csRUFBWUcsYUFBZUgsRUFBWUksWUFDdkRDLE9BQVU3RyxFQUFPd0csRUFBWUksWUFBY0osRUFBWUcsYUFDdkRHLFFBQVcsU0FBVUMsR0FDbkJ0VSxFQUFFc1UsR0FBVWpTLEtBQUssb0JBQW9CZ0QsSUFBSSxXQUFZLFdBQ2xEaEQsS0FBSywyQkFBMkJnRCxJQUFJLFlBQWEsS0FFdERrUCxXQUFjLFNBQVVDLEdBRXRCLEdBREFsVSxFQUFnQitCLEtBQUssU0FBU3lILFNBQVMsVUFDRyxRQUF0Qy9JLEVBQW9CK04sY0FBeUIsQ0FDL0MsSUFBSTJGLEtBQ0FDLEVBQVdwTixLQUFLa00sTUFBcUIsTUFBZmdCLEVBQU9QLE9BQzdCVSxFQUFZck4sS0FBS2tNLE1BQXNCLE1BQWhCZ0IsRUFBT0osU0FFaENLLEVBREVDLEVBQVdDLEVBQ1AsSUFBSUMsTUFBTSxJQUFLLE1BQU9GLEVBQVVDLElBRWhDLElBQUlDLE1BQU0sSUFBSyxNQUFPRCxFQUFXRCxLQUVyQ0csU0FBU0wsRUFBT00sWUFBYSxNQUFPLEVBQUcsR0FDM0NMLEVBQUlNLEtBQUtqVSxFQUFpQixZQUNyQixDQUNMLElBQUlrVSxFQUFXLHFCQUFzQmxWLEVBQVNtVixnQkFBZ0I3SSxNQUMxRDhJLElBQVNyVixFQUFPc1YsUUFDaEJDLEVBQStCLGdDQUF0QnhHLFVBQVV5RyxTQUFvRSxhQUF0QnpHLFVBQVV5RyxTQUEwQnpHLFVBQVUwRyxXQUFXM1AsUUFBUSxTQUFXLEVBRWpKLElBQU1xUCxJQUFhRSxHQUFTRSxFQUMxQnZWLEVBQU8rTyxVQUFVMkcsV0FBV2YsRUFBT2dCLFdBQVkxVSxFQUFpQixZQUMzRCxDQUNMLElBQUkyVSxFQUFXLG9CQUFrRCxLQUE1QmhVLEVBQUtDLFFBQVFkLFdBQW9CLElBQU1hLEVBQUtDLFFBQVFkLFdBQWEsSUFDakdOLEVBQWdCK0IsS0FBS29ULEdBQVVyVCxRQUNsQzlCLEVBQWdCcUQsT0FBTyw2QkFBMkQsS0FBNUJsQyxFQUFLQyxRQUFRZCxXQUFvQixJQUFNYSxFQUFLQyxRQUFRZCxXQUFhLElBQU0sZUFDekdFLEVBQWlCLGNBRXZDUixFQUFnQitCLEtBQUtvVCxHQUFVN0osS0FBSyxPQUFRNEksRUFBT00sYUFBYSxHQUFHOVMsYUFLMUUwVCxLQUFLLFdBQ0pwVixFQUFnQmdDLFlBQVksb0JBQzNCLFdBQ0RoQyxFQUFnQmdDLFlBQVksdUJBS2xDdEMsRUFBRTJWLEdBQUdDLFNBQVcsU0FBVXhWLEdBQ3hCLE9BQU8sSUFBSUYsRUFBU0csS0FBTUQsR0FBTW9CIiwiZmlsZSI6ImpxdWVyeS5vcmdjaGFydC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogalF1ZXJ5IE9yZ0NoYXJ0IFBsdWdpblxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZy9PcmdDaGFydFxuICpcbiAqIENvcHlyaWdodCAyMDE2LCBkYWJlbmdcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWJlbmdcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHdpbmRvdywgZG9jdW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGZhY3RvcnkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbiAgfVxufShmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG4gIHZhciBPcmdDaGFydCA9IGZ1bmN0aW9uIChlbGVtLCBvcHRzKSB7XG4gICAgdGhpcy4kY2hhcnRDb250YWluZXIgPSAkKGVsZW0pO1xuICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgdGhpcy5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICdub2RlVGl0bGUnOiAnbmFtZScsXG4gICAgICAnbm9kZUlkJzogJ2lkJyxcbiAgICAgICd0b2dnbGVTaWJsaW5nc1Jlc3AnOiBmYWxzZSxcbiAgICAgICdkZXB0aCc6IDk5OSxcbiAgICAgICdjaGFydENsYXNzJzogJycsXG4gICAgICAnZXhwb3J0QnV0dG9uJzogZmFsc2UsXG4gICAgICAnZXhwb3J0RmlsZW5hbWUnOiAnT3JnQ2hhcnQnLFxuICAgICAgJ2V4cG9ydEZpbGVleHRlbnNpb24nOiAncG5nJyxcbiAgICAgICdwYXJlbnROb2RlU3ltYm9sJzogJ2ZhLXVzZXJzJyxcbiAgICAgICdkcmFnZ2FibGUnOiBmYWxzZSxcbiAgICAgICdkaXJlY3Rpb24nOiAndDJiJyxcbiAgICAgICdwYW4nOiBmYWxzZSxcbiAgICAgICd6b29tJzogZmFsc2UsXG4gICAgICAnem9vbWluTGltaXQnOiA3LFxuICAgICAgJ3pvb21vdXRMaW1pdCc6IDAuNVxuICAgIH07XG4gIH07XG4gIC8vXG4gIE9yZ0NoYXJ0LnByb3RvdHlwZSA9IHtcbiAgICAvL1xuICAgIGluaXQ6IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgdGhpcy5vcHRzLCBvcHRzKTtcbiAgICAgIC8vIGJ1aWxkIHRoZSBvcmctY2hhcnRcbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcbiAgICAgIGlmICh0aGlzLiRjaGFydCkge1xuICAgICAgICB0aGlzLiRjaGFydC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRhID0gdGhpcy5vcHRpb25zLmRhdGE7XG4gICAgICB2YXIgJGNoYXJ0ID0gdGhpcy4kY2hhcnQgPSAkKCc8ZGl2PicsIHtcbiAgICAgICAgJ2RhdGEnOiB7ICdvcHRpb25zJzogdGhpcy5vcHRpb25zIH0sXG4gICAgICAgICdjbGFzcyc6ICdvcmdjaGFydCcgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykgKyAodGhpcy5vcHRpb25zLmRpcmVjdGlvbiAhPT0gJ3QyYicgPyAnICcgKyB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uIDogJycpLFxuICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGlmICghJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkY2hhcnQuZmluZCgnLm5vZGUuZm9jdXNlZCcpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xuICAgICAgICAgIG1vLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICBpbml0VGltZTpcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBpZiAobXV0YXRpb25zW2ldLmFkZGVkTm9kZXNbal0uY2xhc3NMaXN0LmNvbnRhaW5zKCdvcmdjaGFydCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkICYmIHR5cGVvZiB0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQoJGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICRjaGFydC50cmlnZ2VySGFuZGxlcih7ICd0eXBlJzogJ2luaXQub3JnY2hhcnQnIH0pO1xuICAgICAgICAgICAgICAgICAgYnJlYWsgaW5pdFRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIG1vLm9ic2VydmUoJGNoYXJ0Q29udGFpbmVyWzBdLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgkLnR5cGUoZGF0YSkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgJCkgeyAvLyB1bCBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMuYnVpbGRKc29uRFMoZGF0YS5jaGlsZHJlbigpKSwgMCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gbG9jYWwganNvbiBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoaXMuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2hhcnQuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAndXJsJzogZGF0YSxcbiAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbidcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhhdC5vcHRpb25zLmFqYXhVUkwgPyBkYXRhIDogdGhhdC5hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDAsIHRoYXQub3B0aW9ucyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAkY2hhcnQuY2hpbGRyZW4oJy5zcGlubmVyJykucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkY2hhcnQpO1xuXG4gICAgICAvLyBhcHBlbmQgdGhlIGV4cG9ydCBidXR0b25cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhwb3J0QnV0dG9uICYmICEkY2hhcnRDb250YWluZXIuZmluZCgnLm9jLWV4cG9ydC1idG4nKS5sZW5ndGgpIHtcbiAgICAgICAgdmFyICRleHBvcnRCdG4gPSAkKCc8YnV0dG9uPicsIHtcbiAgICAgICAgICAnY2xhc3MnOiAnb2MtZXhwb3J0LWJ0bicgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJyksXG4gICAgICAgICAgJ3RleHQnOiAnRXhwb3J0JyxcbiAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGF0LmV4cG9ydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJGV4cG9ydEJ0bik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFuKSB7XG4gICAgICAgIHRoaXMuYmluZFBhbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnpvb20pIHtcbiAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8vXG4gICAgc2V0T3B0aW9uczogZnVuY3Rpb24gKG9wdHMsIHZhbCkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAob3B0cyA9PT0gJ3BhbicpIHtcbiAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmJpbmRQYW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMgPT09ICd6b29tJykge1xuICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChvcHRzLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmluaXQob3B0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLnBhbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnBhbikge1xuICAgICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy56b29tICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKG9wdHMuem9vbSkge1xuICAgICAgICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVuYmluZFpvb20oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvL1xuICAgIHBhblN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciAkY2hhcnQgPSAkKGUuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgaWYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoIHx8IChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpKSB7XG4gICAgICAgICRjaGFydC5kYXRhKCdwYW5uaW5nJywgZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2hhcnQuY3NzKCdjdXJzb3InLCAnbW92ZScpLmRhdGEoJ3Bhbm5pbmcnLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHZhciBsYXN0WCA9IDA7XG4gICAgICB2YXIgbGFzdFkgPSAwO1xuICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgaWYgKGxhc3RUZiAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHZhciB0ZW1wID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICBsYXN0WCA9IHBhcnNlSW50KHRlbXBbNF0pO1xuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFs1XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzEyXSk7XG4gICAgICAgICAgbGFzdFkgPSBwYXJzZUludCh0ZW1wWzEzXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBzdGFydFggPSAwO1xuICAgICAgdmFyIHN0YXJ0WSA9IDA7XG4gICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcbiAgICAgICAgc3RhcnRYID0gZS5wYWdlWCAtIGxhc3RYO1xuICAgICAgICBzdGFydFkgPSBlLnBhZ2VZIC0gbGFzdFk7XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgICAgc3RhcnRYID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gbGFzdFg7XG4gICAgICAgIHN0YXJ0WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIGxhc3RZO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAkY2hhcnQub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCEkY2hhcnQuZGF0YSgncGFubmluZycpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdYID0gMDtcbiAgICAgICAgdmFyIG5ld1kgPSAwO1xuICAgICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcbiAgICAgICAgICBuZXdYID0gZS5wYWdlWCAtIHN0YXJ0WDtcbiAgICAgICAgICBuZXdZID0gZS5wYWdlWSAtIHN0YXJ0WTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXG4gICAgICAgICAgbmV3WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIHN0YXJ0WDtcbiAgICAgICAgICBuZXdZID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIC0gc3RhcnRZO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ21hdHJpeCgxLCAwLCAwLCAxLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJyknKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ21hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsICcgKyBuZXdYICsgJywgJyArIG5ld1kgKyAnLCAwLCAxKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgICAgbWF0cml4WzRdID0gJyAnICsgbmV3WDtcbiAgICAgICAgICAgIG1hdHJpeFs1XSA9ICcgJyArIG5ld1kgKyAnKSc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hdHJpeFsxMl0gPSAnICcgKyBuZXdYO1xuICAgICAgICAgICAgbWF0cml4WzEzXSA9ICcgJyArIG5ld1k7XG4gICAgICAgICAgfVxuICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIG1hdHJpeC5qb2luKCcsJykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgcGFuRW5kSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycpKSB7XG4gICAgICAgIGUuZGF0YS5jaGFydC5kYXRhKCdwYW5uaW5nJywgZmFsc2UpLmNzcygnY3Vyc29yJywgJ2RlZmF1bHQnKS5vZmYoJ21vdXNlbW92ZScpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBiaW5kUGFuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgdGhpcy4kY2hhcnQub24oJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgdGhpcy5wYW5TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ21vdXNldXAgdG91Y2hlbmQnLCB7ICdjaGFydCc6IHRoaXMuJGNoYXJ0IH0sIHRoaXMucGFuRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIHVuYmluZFBhbjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdhdXRvJyk7XG4gICAgICB0aGlzLiRjaGFydC5vZmYoJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgdGhpcy5wYW5TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCdtb3VzZXVwIHRvdWNoZW5kJywgdGhpcy5wYW5FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgem9vbVdoZWVsSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBuZXdTY2FsZSAgPSAxICsgKGUub3JpZ2luYWxFdmVudC5kZWx0YVkgPiAwID8gLTAuMiA6IDAuMik7XG4gICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgbmV3U2NhbGUpO1xuICAgIH0sXG4gICAgLy9cbiAgICB6b29tU3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCB0cnVlKTtcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcsIGRpc3QpO1xuICAgICAgfVxuICAgIH0sXG4gICAgem9vbWluZ0hhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBpZihvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnKSkge1xuICAgICAgICB2YXIgZGlzdCA9IG9jLmdldFBpbmNoRGlzdChlKTtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdEVuZCcsIGRpc3QpO1xuICAgICAgfVxuICAgIH0sXG4gICAgem9vbUVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBpZihvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnKSkge1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCBmYWxzZSk7XG4gICAgICAgIHZhciBkaWZmID0gb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdEVuZCcpIC0gb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdFN0YXJ0Jyk7XG4gICAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAxLjIpO1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIDAuOCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYmluZFpvb206IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd3aGVlbCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21XaGVlbEhhbmRsZXIpO1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub24oJ3RvdWNoc3RhcnQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCd0b3VjaG1vdmUnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29taW5nSGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2hlbmQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICB1bmJpbmRab29tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3doZWVsJywgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9mZigndG91Y2hzdGFydCcsIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vZmYoJ3RvdWNobW92ZScsIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaGVuZCcsIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICBnZXRQaW5jaERpc3Q6IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSAqIChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSArXG4gICAgICAoZS50b3VjaGVzWzBdLmNsaWVudFkgLSBlLnRvdWNoZXNbMV0uY2xpZW50WSkgKiAoZS50b3VjaGVzWzBdLmNsaWVudFkgLSBlLnRvdWNoZXNbMV0uY2xpZW50WSkpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzZXRDaGFydFNjYWxlOiBmdW5jdGlvbiAoJGNoYXJ0LCBuZXdTY2FsZSkge1xuICAgICAgdmFyIG9wdHMgPSAkY2hhcnQuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgdmFyIG1hdHJpeCA9ICcnO1xuICAgICAgdmFyIHRhcmdldFNjYWxlID0gMTtcbiAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICB0YXJnZXRTY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KG1hdHJpeFszXSkgKiBuZXdTY2FsZSk7XG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbMV0pICogbmV3U2NhbGUpO1xuICAgICAgICAgIGlmICh0YXJnZXRTY2FsZSA+IG9wdHMuem9vbW91dExpbWl0ICYmIHRhcmdldFNjYWxlIDwgb3B0cy56b29taW5MaW1pdCkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZTNkKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJywgMSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYnVpbGRKc29uRFM6IGZ1bmN0aW9uICgkbGkpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBzdWJPYmogPSB7XG4gICAgICAgICduYW1lJzogJGxpLmNvbnRlbnRzKCkuZXEoMCkudGV4dCgpLnRyaW0oKSxcbiAgICAgICAgJ3JlbGF0aW9uc2hpcCc6ICgkbGkucGFyZW50KCkucGFyZW50KCkuaXMoJ2xpJykgPyAnMSc6ICcwJykgKyAoJGxpLnNpYmxpbmdzKCdsaScpLmxlbmd0aCA/IDE6IDApICsgKCRsaS5jaGlsZHJlbigndWwnKS5sZW5ndGggPyAxIDogMClcbiAgICAgIH07XG4gICAgICBpZiAoJGxpWzBdLmlkKSB7XG4gICAgICAgIHN1Yk9iai5pZCA9ICRsaVswXS5pZDtcbiAgICAgIH1cbiAgICAgICRsaS5jaGlsZHJlbigndWwnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQuYnVpbGRKc29uRFMoJCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViT2JqO1xuICAgIH0sXG4gICAgLy9cbiAgICBhdHRhY2hSZWw6IGZ1bmN0aW9uIChkYXRhLCBmbGFncykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgdGhhdC5hdHRhY2hSZWwoaXRlbSwgJzEnICsgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMSA/IDEgOiAwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvL1xuICAgIGxvb3BDaGFydDogZnVuY3Rpb24gKCRjaGFydCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0ciA9ICRjaGFydC5maW5kKCd0cjpmaXJzdCcpO1xuICAgICAgdmFyIHN1Yk9iaiA9IHsgJ2lkJzogJHRyLmZpbmQoJy5ub2RlJylbMF0uaWQgfTtcbiAgICAgICR0ci5zaWJsaW5ncygnOmxhc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQubG9vcENoYXJ0KCQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Yk9iajtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0SGllcmFyY2h5OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuJGNoYXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gJ0Vycm9yOiBvcmdjaGFydCBkb2VzIG5vdCBleGlzdCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBub2RlcyBkbyBub3QgZXhpc3QnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCF0aGlzLiRjaGFydC5maW5kKCcubm9kZScpWzBdLmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBOb2RlcyBvZiBvcmdoY2FydCB0byBiZSBleHBvcnRlZCBtdXN0IGhhdmUgaWQgYXR0cmlidXRlISc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sb29wQ2hhcnQodGhpcy4kY2hhcnQpO1xuICAgIH0sXG4gICAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICAgIGdldE5vZGVTdGF0ZTogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgdmFyICR0YXJnZXQgPSB7fTtcbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCR0YXJnZXQuaXMoJy5oaWRkZW4nKSB8fCAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCcubm9kZXMnKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykgJiYgISR0YXJnZXQucGFyZW50KCkuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogZmFsc2UsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICB9LFxuICAgIC8vIGZpbmQgdGhlIHJlbGF0ZWQgbm9kZXNcbiAgICBnZXRSZWxhdGVkTm9kZXM6IGZ1bmN0aW9uICgkbm9kZSwgcmVsYXRpb24pIHtcbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnBhcmVudCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jaGlsZHJlbignOmxhc3QnKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnc2libGluZ3MnKSB7XG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGFuY2VzdG9yIG5vZGUgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZVBhcmVudDogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgJHRlbXAgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIGlmICgkdGVtcC5lcSgwKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzXG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUpO1xuICAgICAgfVxuICAgICAgLy8gaGlkZSB0aGUgbGluZXNcbiAgICAgIHZhciAkbGluZXMgPSAkdGVtcC5zbGljZSgxKTtcbiAgICAgICRsaW5lcy5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAvLyBoaWRlIHRoZSBzdXBlcmlvciBub2RlcyB3aXRoIHRyYW5zaXRpb25cbiAgICAgIHZhciAkcGFyZW50ID0gJHRlbXAuZXEoMCkuZmluZCgnLm5vZGUnKTtcbiAgICAgIHZhciBncmFuZGZhdGhlclZpc2libGUgPSB0aGlzLmdldE5vZGVTdGF0ZSgkcGFyZW50LCAncGFyZW50JykudmlzaWJsZTtcbiAgICAgIGlmICgkcGFyZW50Lmxlbmd0aCAmJiAkcGFyZW50LmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ3NsaWRlIHNsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICAgICRsaW5lcy5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICR0ZW1wLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBpZiB0aGUgY3VycmVudCBub2RlIGhhcyB0aGUgcGFyZW50IG5vZGUsIGhpZGUgaXQgcmVjdXJzaXZlbHlcbiAgICAgIGlmICgkcGFyZW50Lmxlbmd0aCAmJiBncmFuZGZhdGhlclZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlUGFyZW50KCRwYXJlbnQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd1BhcmVudDogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgc3VwZXJpb3IgbGV2ZWxcbiAgICAgIHZhciAkdGVtcCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBsaW5lXG4gICAgICAkdGVtcC5lcSgyKS5jaGlsZHJlbigpLnNsaWNlKDEsIC0xKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAvLyBzaG93IHBhcmVudCBub2RlIHdpdGggYW5pbWF0aW9uXG4gICAgICB2YXIgcGFyZW50ID0gJHRlbXAuZXEoMCkuZmluZCgnLm5vZGUnKVswXTtcbiAgICAgIHRoaXMucmVwYWludChwYXJlbnQpO1xuICAgICAgJChwYXJlbnQpLmFkZENsYXNzKCdzbGlkZScpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICQocGFyZW50KS5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICB0aGF0LnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGRlc2NlbmRhbnQgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZUNoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkdGVtcCA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIGlmICgkdGVtcC5sYXN0KCkuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgdmFyICR2aXNpYmxlTm9kZXMgPSAkdGVtcC5sYXN0KCkuZmluZCgnLm5vZGU6dmlzaWJsZScpO1xuICAgICAgdmFyIGlzVmVydGljYWxEZXNjID0gJHRlbXAubGFzdCgpLmlzKCcudmVydGljYWxOb2RlcycpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgaWYgKCFpc1ZlcnRpY2FsRGVzYykge1xuICAgICAgICB2YXIgJGxpbmVzID0gJHZpc2libGVOb2Rlcy5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykucHJldkFsbCgnLmxpbmVzJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgJHZpc2libGVOb2Rlcy5hZGRDbGFzcygnc2xpZGUgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHZpc2libGVOb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgaWYgKGlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgICAgJHRlbXAuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRsaW5lcy5yZW1vdmVBdHRyKCdzdHlsZScpLmFkZENsYXNzKCdoaWRkZW4nKS5zaWJsaW5ncygnLm5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICR0ZW1wLmxhc3QoKS5maW5kKCcudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgIHRoYXQuc3dpdGNoVmVydGljYWxBcnJvdygkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd0NoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbGV2ZWxzID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgdmFyIGlzVmVydGljYWxEZXNjID0gJGxldmVscy5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIHZhciAkZGVzY2VuZGFudHMgPSBpc1ZlcnRpY2FsRGVzY1xuICAgICAgICA/ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlOnZpc2libGUnKVxuICAgICAgICA6ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmVxKDIpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgIC8vIHRoZSB0d28gZm9sbG93aW5nIHN0YXRlbWVudHMgYXJlIHVzZWQgdG8gZW5mb3JjZSBicm93c2VyIHRvIHJlcGFpbnRcbiAgICAgIHRoaXMucmVwYWludCgkZGVzY2VuZGFudHMuZ2V0KDApKTtcbiAgICAgICRkZXNjZW5kYW50cy5hZGRDbGFzcygnc2xpZGUnKS5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJGRlc2NlbmRhbnRzLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgIHRoYXQuc3dpdGNoVmVydGljYWxBcnJvdygkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gaGlkZSB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBoaWRlU2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJG5vZGVDb250YWluZXIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpO1xuICAgICAgaWYgKCRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCkuZmluZCgnLm5vZGU6dmlzaWJsZScpLmFkZENsYXNzKCdzbGlkZSBzbGlkZS1yaWdodCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZTp2aXNpYmxlJykuYWRkQ2xhc3MoJ3NsaWRlIHNsaWRlLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlOnZpc2libGUnKS5hZGRDbGFzcygnc2xpZGUgc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgJG5vZGVDb250YWluZXIubmV4dEFsbCgpLmZpbmQoJy5ub2RlOnZpc2libGUnKS5hZGRDbGFzcygnc2xpZGUgc2xpZGUtbGVmdCcpO1xuICAgICAgfVxuICAgICAgdmFyICRhbmltYXRlZE5vZGVzID0gJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc2xpZGUnKTtcbiAgICAgIHZhciAkbGluZXMgPSAkYW5pbWF0ZWROb2Rlcy5jbG9zZXN0KCcubm9kZXMnKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAkYW5pbWF0ZWROb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJGxpbmVzLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgIHZhciAkc2libGluZ3MgPSBkaXJlY3Rpb24gPyAoZGlyZWN0aW9uID09PSAnbGVmdCcgPyAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCc6bm90KC5oaWRkZW4pJykgOiAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCc6bm90KC5oaWRkZW4pJykpIDogJG5vZGVDb250YWluZXIuc2libGluZ3MoKTtcbiAgICAgICAgJG5vZGVDb250YWluZXIuY2xvc2VzdCgnLm5vZGVzJykucHJldigpLmNoaWxkcmVuKCc6bm90KC5oaWRkZW4pJylcbiAgICAgICAgICAuc2xpY2UoMSwgZGlyZWN0aW9uID8gJHNpYmxpbmdzLmxlbmd0aCAqIDIgKyAxIDogLTEpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgJGFuaW1hdGVkTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgICRzaWJsaW5ncy5maW5kKCcubm9kZTp2aXNpYmxlOmd0KDApJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWxlZnQgc2xpZGUtcmlnaHQnKS5hZGRDbGFzcygnc2xpZGUtdXAnKVxuICAgICAgICAgIC5lbmQoKS5maW5kKCcubGluZXMsIC5ub2RlcywgLnZlcnRpY2FsTm9kZXMnKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAuZW5kKCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgdGhhdC5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd1NpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRpcmVjdGlvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgLy8gZmlyc3RseSwgc2hvdyB0aGUgc2libGluZyB0ZCB0YWdzXG4gICAgICB2YXIgJHNpYmxpbmdzID0gJCgpO1xuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXZBbGwoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0QWxsKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgLy8gc2Vjb25kbHksIHNob3cgdGhlIGxpbmVzXG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oJy5oaWRkZW4nKS5zbGljZSgwLCAkc2libGluZ3MubGVuZ3RoICogMikucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oJy5oaWRkZW4nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICAvLyB0aGlyZGx5LCBkbyBzb21lIGNsZWFuaW5nIHN0dWZmXG4gICAgICBpZiAoIXRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykudmlzaWJsZSkge1xuICAgICAgICAkdXBwZXJMZXZlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHZhciBwYXJlbnQgPSAkdXBwZXJMZXZlbC5maW5kKCcubm9kZScpWzBdO1xuICAgICAgICB0aGlzLnJlcGFpbnQocGFyZW50KTtcbiAgICAgICAgJChwYXJlbnQpLmFkZENsYXNzKCdzbGlkZScpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBsYXN0bHksIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgd2l0aCBhbmltYXRpb25cbiAgICAgICRzaWJsaW5ncy5maW5kKCcubm9kZTp2aXNpYmxlJykuYWRkQ2xhc3MoJ3NsaWRlJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWxlZnQgc2xpZGUtcmlnaHQnKS5lcSgtMSkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRzaWJsaW5ncy5maW5kKCcubm9kZTp2aXNpYmxlJykucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgdGhhdC5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICAgIHN0YXJ0TG9hZGluZzogZnVuY3Rpb24gKCRhcnJvdywgJG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciAkY2hhcnQgPSAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKTtcbiAgICAgIGlmICh0eXBlb2YgJGNoYXJ0LmRhdGEoJ2luQWpheCcpICE9PSAndW5kZWZpbmVkJyAmJiAkY2hhcnQuZGF0YSgnaW5BamF4JykgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAkYXJyb3cuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgJG5vZGUuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKTtcbiAgICAgICRub2RlLmNoaWxkcmVuKCkubm90KCcuc3Bpbm5lcicpLmNzcygnb3BhY2l0eScsIDAuMik7XG4gICAgICAkY2hhcnQuZGF0YSgnaW5BamF4JywgdHJ1ZSk7XG4gICAgICAkKCcub2MtZXhwb3J0LWJ0bicgKyAob3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIG9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgLy8gdGVybWluYXRlIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICAgIGVuZExvYWRpbmc6IGZ1bmN0aW9uICgkYXJyb3csICRub2RlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gJG5vZGUuY2xvc2VzdCgnZGl2Lm9yZ2NoYXJ0Jyk7XG4gICAgICAkYXJyb3cucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgJG5vZGUuZmluZCgnLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICAgICRub2RlLmNoaWxkcmVuKCkucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICRjaGFydC5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICAkKCcub2MtZXhwb3J0LWJ0bicgKyAob3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIG9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSkucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfSxcbiAgICAvLyB3aGV0aGVyIHRoZSBjdXJzb3IgaXMgaG92ZXJpbmcgb3ZlciB0aGUgbm9kZVxuICAgIGlzSW5BY3Rpb246IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgcmV0dXJuICRub2RlLmNoaWxkcmVuKCcuZWRnZScpLmF0dHIoJ2NsYXNzJykuaW5kZXhPZignZmEtJykgPiAtMSA/IHRydWUgOiBmYWxzZTtcbiAgICB9LFxuICAgIC8vXG4gICAgc3dpdGNoVmVydGljYWxBcnJvdzogZnVuY3Rpb24gKCRhcnJvdykge1xuICAgICAgJGFycm93LnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzd2l0Y2hIb3Jpem9udGFsQXJyb3c6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyIG9wdHMgPSAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3AgJiYgKHR5cGVvZiBvcHRzLmFqYXhVUkwgPT09ICd1bmRlZmluZWQnIHx8ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLmRhdGEoJ3NpYmxpbmdzTG9hZGVkJykpKSB7XG4gICAgICAgIHZhciAkcHJldlNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldigpO1xuICAgICAgICBpZiAoJHByZXZTaWIubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCRwcmV2U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1sZWZ0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgJG5leHRTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHQoKTtcbiAgICAgICAgaWYgKCRuZXh0U2liLmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkbmV4dFNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyICRzaWJzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICB2YXIgc2lic1Zpc2libGUgPSAkc2licy5sZW5ndGggPyAhJHNpYnMuaXMoJy5oaWRkZW4nKSA6IGZhbHNlO1xuICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnLCBzaWJzVmlzaWJsZSkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcsICFzaWJzVmlzaWJsZSk7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcsIHNpYnNWaXNpYmxlKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcsICFzaWJzVmlzaWJsZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIHJlcGFpbnQ6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBub2RlLnN0eWxlLm9mZnNldFdpZHRoID0gbm9kZS5vZmZzZXRXaWR0aDtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGNyZWF0ZSBub2RlXG4gICAgY3JlYXRlTm9kZTogZnVuY3Rpb24gKG5vZGVEYXRhLCBsZXZlbCwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgaWYgKCFub2RlRGF0YS5jaGlsZHJlbikgeyBub2RlRGF0YS5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAkLmVhY2gobm9kZURhdGEuY2hpbGRyZW4sIGZ1bmN0aW9uIChpbmRleCwgY2hpbGQpIHtcbiAgICAgICAgY2hpbGQucGFyZW50SWQgPSBub2RlRGF0YS5pZDtcbiAgICAgIH0pO1xuICAgICAgdmFyIGR0ZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgIC8vIGNvbnN0cnVjdCB0aGUgY29udGVudCBvZiBub2RlXG4gICAgICB2YXIgJG5vZGVEaXYgPSAkKCc8ZGl2JyArIChvcHRzLmRyYWdnYWJsZSA/ICcgZHJhZ2dhYmxlPVwidHJ1ZVwiJyA6ICcnKSArIChub2RlRGF0YVtvcHRzLm5vZGVJZF0gPyAnIGlkPVwiJyArIG5vZGVEYXRhW29wdHMubm9kZUlkXSArICdcIicgOiAnJykgKyAobm9kZURhdGEucGFyZW50SWQgPyAnIGRhdGEtcGFyZW50PVwiJyArIG5vZGVEYXRhLnBhcmVudElkICsgJ1wiJyA6ICcnKSArICc+JylcbiAgICAgICAgLmFkZENsYXNzKCdub2RlICcgKyAobm9kZURhdGEuY2xhc3NOYW1lIHx8ICcnKSArICAobGV2ZWwgPj0gb3B0cy5kZXB0aCA/ICcgc2xpZGUtdXAnIDogJycpKTtcbiAgICAgIGlmIChvcHRzLm5vZGVUZW1wbGF0ZSkge1xuICAgICAgICAkbm9kZURpdi5hcHBlbmQob3B0cy5ub2RlVGVtcGxhdGUobm9kZURhdGEpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGRpdiBjbGFzcz1cInRpdGxlXCI+JyArIG5vZGVEYXRhW29wdHMubm9kZVRpdGxlXSArICc8L2Rpdj4nKVxuICAgICAgICAgIC5hcHBlbmQodHlwZW9mIG9wdHMubm9kZUNvbnRlbnQgIT09ICd1bmRlZmluZWQnID8gJzxkaXYgY2xhc3M9XCJjb250ZW50XCI+JyArIChub2RlRGF0YVtvcHRzLm5vZGVDb250ZW50XSB8fCAnJykgKyAnPC9kaXY+JyA6ICcnKTtcbiAgICAgIH1cbiAgICAgIC8vIGFwcGVuZCA0IGRpcmVjdGlvbiBhcnJvd3Mgb3IgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvbnNcbiAgICAgIHZhciBmbGFncyA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnJztcbiAgICAgIGlmIChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPiBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgaWYgKChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCAmJiBOdW1iZXIoZmxhZ3Muc3Vic3RyKDIsMSkpKSB7XG4gICAgICAgICAgdmFyIGljb24gPSBsZXZlbCArIDEgID49IG9wdHMuZGVwdGggPyAncGx1cycgOiAnbWludXMnO1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJ0b2dnbGVCdG4gZmEgZmEtJyArIGljb24gKyAnLXNxdWFyZVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMCwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihOdW1iZXIoZmxhZ3Muc3Vic3RyKDEsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPicgK1xuICAgICAgICAgICAgJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihOdW1iZXIoZmxhZ3Muc3Vic3RyKDIsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+JylcbiAgICAgICAgICAgIC5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbm9kZURpdi5vbignbW91c2VlbnRlciBtb3VzZWxlYXZlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyICRub2RlID0gJCh0aGlzKSwgZmxhZyA9IGZhbHNlO1xuICAgICAgICB2YXIgJHRvcEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKTtcbiAgICAgICAgdmFyICRyaWdodEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpO1xuICAgICAgICB2YXIgJGJvdHRvbUVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKTtcbiAgICAgICAgdmFyICRsZWZ0RWRnZSA9ICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKTtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuICAgICAgICAgIGlmICgkdG9wRWRnZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZsYWcgPSB0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLnZpc2libGU7XG4gICAgICAgICAgICAkdG9wRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcsICFmbGFnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgZmxhZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgkYm90dG9tRWRnZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZsYWcgPSB0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ2NoaWxkcmVuJykudmlzaWJsZTtcbiAgICAgICAgICAgICRib3R0b21FZGdlLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nLCAhZmxhZykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnLCBmbGFnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCRsZWZ0RWRnZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoYXQuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5lZGdlJykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAgZmEtY2hldnJvbi1kb3duIGZhLWNoZXZyb24tcmlnaHQgZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBkZWZpbmUgY2xpY2sgZXZlbnQgaGFuZGxlclxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcub3JnY2hhcnQnKS5maW5kKCcuZm9jdXNlZCcpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBkZWZpbmUgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIHRvcCBlZGdlXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvcEVkZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyICR0aGF0ID0gJCh0aGlzKTtcbiAgICAgICAgdmFyICRub2RlID0gJHRoYXQucGFyZW50KCk7XG4gICAgICAgIHZhciBwYXJlbnRTdGF0ZSA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50Jyk7XG4gICAgICAgIGlmIChwYXJlbnRTdGF0ZS5leGlzdCkge1xuICAgICAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xuICAgICAgICAgIGlmICgkcGFyZW50LmlzKCcuc2xpZGUnKSkgeyByZXR1cm47IH1cbiAgICAgICAgICAvLyBoaWRlIHRoZSBhbmNlc3RvciBub2RlcyBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgICAgICBpZiAocGFyZW50U3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgICAgdGhhdC5oaWRlUGFyZW50KCRub2RlKTtcbiAgICAgICAgICAgICRwYXJlbnQub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zd2l0Y2hWZXJ0aWNhbEFycm93KCR0aGF0KTtcbiAgICAgICAgICAgICAgICB0aGF0LnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGFuY2VzdG9ycyBhbmQgc2libGluZ3NcbiAgICAgICAgICAgIHRoYXQuc2hvd1BhcmVudCgkbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGxvYWQgdGhlIG5ldyBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgICAgdmFyIG5vZGVJZCA9ICR0aGF0LnBhcmVudCgpWzBdLmlkO1xuICAgICAgICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzXG4gICAgICAgICAgaWYgKHRoYXQuc3RhcnRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cykpIHtcbiAgICAgICAgICAvLyBsb2FkIG5ldyBub2Rlc1xuICAgICAgICAgICAgJC5hamF4KHsgJ3VybCc6ICQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwucGFyZW50KSA/IG9wdHMuYWpheFVSTC5wYXJlbnQobm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnBhcmVudCArIG5vZGVJZCwgJ2RhdGFUeXBlJzogJ2pzb24nIH0pXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgIGlmICgkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnKSkge1xuICAgICAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0LmFkZFBhcmVudCgkbm9kZSwgZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0IHBhcmVudCBub2RlIGRhdGEnKTsgfSlcbiAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7IHRoYXQuZW5kTG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpOyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBiaW5kIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBib3R0b20gZWRnZVxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5ib3R0b21FZGdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkbm9kZSA9ICR0aGF0LnBhcmVudCgpO1xuICAgICAgICB2YXIgY2hpbGRyZW5TdGF0ZSA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKTtcbiAgICAgICAgaWYgKGNoaWxkcmVuU3RhdGUuZXhpc3QpIHtcbiAgICAgICAgICB2YXIgJGNoaWxkcmVuID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmxhc3QnKTtcbiAgICAgICAgICBpZiAoJGNoaWxkcmVuLmZpbmQoJy5ub2RlOnZpc2libGUnKS5pcygnLnNsaWRlJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgLy8gaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgICAgICBpZiAoY2hpbGRyZW5TdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGF0LmhpZGVDaGlsZHJlbigkbm9kZSk7XG4gICAgICAgICAgfSBlbHNlIHsgLy8gc2hvdyB0aGUgZGVzY2VuZGFudHNcbiAgICAgICAgICAgIHRoYXQuc2hvd0NoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIGxvYWQgdGhlIG5ldyBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgICAgdmFyIG5vZGVJZCA9ICR0aGF0LnBhcmVudCgpWzBdLmlkO1xuICAgICAgICAgIGlmICh0aGF0LnN0YXJ0TG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpKSB7XG4gICAgICAgICAgICAkLmFqYXgoeyAndXJsJzogJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5jaGlsZHJlbikgPyBvcHRzLmFqYXhVUkwuY2hpbGRyZW4obm9kZURhdGEpIDogb3B0cy5hamF4VVJMLmNoaWxkcmVuICsgbm9kZUlkLCAnZGF0YVR5cGUnOiAnanNvbicgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgIGlmICgkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnKSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgdGhhdC5hZGRDaGlsZHJlbigkbm9kZSwgZGF0YSwgJC5leHRlbmQoe30sIG9wdHMsIHsgZGVwdGg6IDAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGdldCBjaGlsZHJlbiBub2RlcyBkYXRhJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhhdC5lbmRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBldmVudCBoYW5kbGVyIGZvciB0b2dnbGUgYnV0dG9ucyBpbiBIeWJyaWQoaG9yaXpvbnRhbCArIHZlcnRpY2FsKSBPcmdDaGFydFxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy50b2dnbGVCdG4nLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgJGRlc2NXcmFwcGVyID0gJHRoaXMucGFyZW50KCkubmV4dCgpO1xuICAgICAgICB2YXIgJGRlc2NlbmRhbnRzID0gJGRlc2NXcmFwcGVyLmZpbmQoJy5ub2RlJyk7XG4gICAgICAgIHZhciAkY2hpbGRyZW4gPSAkZGVzY1dyYXBwZXIuY2hpbGRyZW4oKS5jaGlsZHJlbignLm5vZGUnKTtcbiAgICAgICAgaWYgKCRjaGlsZHJlbi5pcygnLnNsaWRlJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICR0aGlzLnRvZ2dsZUNsYXNzKCdmYS1wbHVzLXNxdWFyZSBmYS1taW51cy1zcXVhcmUnKTtcbiAgICAgICAgaWYgKCRkZXNjZW5kYW50cy5lcSgwKS5pcygnLnNsaWRlLXVwJykpIHtcbiAgICAgICAgICAkZGVzY1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIHRoYXQucmVwYWludCgkY2hpbGRyZW4uZ2V0KDApKTtcbiAgICAgICAgICAkY2hpbGRyZW4uYWRkQ2xhc3MoJ3NsaWRlJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkY2hpbGRyZW4ucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGRlc2NlbmRhbnRzLmFkZENsYXNzKCdzbGlkZSBzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGRlc2NlbmRhbnRzLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICAgICAgLy8gJGRlc2NXcmFwcGVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICRkZXNjZW5kYW50cy5jbG9zZXN0KCd1bCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkZGVzY2VuZGFudHMuZmluZCgnLnRvZ2dsZUJ0bicpLnJlbW92ZUNsYXNzKCdmYS1taW51cy1zcXVhcmUnKS5hZGRDbGFzcygnZmEtcGx1cy1zcXVhcmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGJpbmQgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGxlZnQgYW5kIHJpZ2h0IGVkZ2VzXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLmxlZnRFZGdlLCAucmlnaHRFZGdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkbm9kZSA9ICR0aGF0LnBhcmVudCgpO1xuICAgICAgICB2YXIgc2libGluZ3NTdGF0ZSA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKTtcbiAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUuZXhpc3QpIHtcbiAgICAgICAgICB2YXIgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICAgIGlmICgkc2libGluZ3MuZmluZCgnLm5vZGU6dmlzaWJsZScpLmlzKCcuc2xpZGUnKSkgeyByZXR1cm47IH1cbiAgICAgICAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3ApIHtcbiAgICAgICAgICAgIHZhciAkcHJldlNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldigpO1xuICAgICAgICAgICAgdmFyICRuZXh0U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoJHRoYXQuaXMoJy5sZWZ0RWRnZScpKSB7XG4gICAgICAgICAgICAgIGlmICgkcHJldlNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhhdC5oaWRlU2libGluZ3MoJG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICgkbmV4dFNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoYXQuaGlkZVNpYmxpbmdzKCRub2RlLCAncmlnaHQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2libGluZ3NTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgIHRoYXQuaGlkZVNpYmxpbmdzKCRub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gbG9hZCB0aGUgbmV3IHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICAgIHZhciBub2RlSWQgPSAkdGhhdC5wYXJlbnQoKVswXS5pZDtcbiAgICAgICAgICB2YXIgdXJsID0gKHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykuZXhpc3QpID9cbiAgICAgICAgICAgICgkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnNpYmxpbmdzKSA/IG9wdHMuYWpheFVSTC5zaWJsaW5ncyhub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuc2libGluZ3MgKyBub2RlSWQpIDpcbiAgICAgICAgICAgICgkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmZhbWlsaWVzKSA/IG9wdHMuYWpheFVSTC5mYW1pbGllcyhub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuZmFtaWxpZXMgKyBub2RlSWQpO1xuICAgICAgICAgIGlmICh0aGF0LnN0YXJ0TG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpKSB7XG4gICAgICAgICAgICAkLmFqYXgoeyAndXJsJzogdXJsLCAnZGF0YVR5cGUnOiAnanNvbicgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgIGlmICgkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnKSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnNpYmxpbmdzIHx8IGRhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgIHRoYXQuYWRkU2libGluZ3MoJG5vZGUsIGRhdGEsIG9wdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGdldCBzaWJsaW5nIG5vZGVzIGRhdGEnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0aGF0LmVuZExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAob3B0cy5kcmFnZ2FibGUpIHtcbiAgICAgICAgJG5vZGVEaXYub24oJ2RyYWdzdGFydCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIG9yaWdFdmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG4gICAgICAgICAgdmFyIGlzRmlyZWZveCA9IC9maXJlZm94Ly50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgIGlmIChpc0ZpcmVmb3gpIHtcbiAgICAgICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9odG1sJywgJ2hhY2sgZm9yIGZpcmVmb3gnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gaWYgdXNlcnMgZW5hYmxlIHpvb20gb3IgZGlyZWN0aW9uIG9wdGlvbnNcbiAgICAgICAgICBpZiAoJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY3NzKCd0cmFuc2Zvcm0nKSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICB2YXIgZ2hvc3ROb2RlLCBub2RlQ292ZXI7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5naG9zdC1ub2RlJykpIHtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZS5jbGFzc0xpc3QuYWRkKCdnaG9zdC1ub2RlJyk7XG4gICAgICAgICAgICAgIG5vZGVDb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZS5hcHBlbmRDaGlsZChub2RlQ292ZXIpO1xuICAgICAgICAgICAgICAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5hcHBlbmQoZ2hvc3ROb2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZSA9ICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNoaWxkcmVuKCcuZ2hvc3Qtbm9kZScpLmdldCgwKTtcbiAgICAgICAgICAgICAgbm9kZUNvdmVyID0gJChnaG9zdE5vZGUpLmNoaWxkcmVuKCkuZ2V0KDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyYW5zVmFsdWVzID0gJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY3NzKCd0cmFuc2Zvcm0nKS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQoKG9wdHMuZGlyZWN0aW9uID09PSAndDJiJyB8fCBvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpID8gdHJhbnNWYWx1ZXNbMF0uc2xpY2UodHJhbnNWYWx1ZXNbMF0uaW5kZXhPZignKCcpICsgMSkgOiB0cmFuc1ZhbHVlc1sxXSkpO1xuICAgICAgICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSk7XG4gICAgICAgICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAkbm9kZURpdi5vdXRlckhlaWdodChmYWxzZSkpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneCcsNSAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3knLDUgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd3aWR0aCcsIDEyMCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDQwICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncngnLCA0ICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncnknLCA0ICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgMSAqIHNjYWxlKTtcbiAgICAgICAgICAgIHZhciB4T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgIHZhciB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgICAgIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2wycicpIHtcbiAgICAgICAgICAgICAgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICAgIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ3IybCcpIHtcbiAgICAgICAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgICAgICAgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0Jykge1xuICAgICAgICAgICAgICB4T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICAgICAgICB5T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJIZWlnaHQoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0ZpcmVmb3gpIHsgLy8gaGFjayBmb3Igb2xkIHZlcnNpb24gb2YgRmlyZWZveCg8IDQ4LjApXG4gICAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XG4gICAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdyZ2IoMTkxLCAwLCAwKScpO1xuICAgICAgICAgICAgICB2YXIgZ2hvc3ROb2RlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICBnaG9zdE5vZGVXcmFwcGVyLnNyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwnICsgKG5ldyBYTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKGdob3N0Tm9kZSk7XG4gICAgICAgICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZVdyYXBwZXIsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyICRkcmFnZ2VkID0gJCh0aGlzKTtcbiAgICAgICAgICB2YXIgJGRyYWdab25lID0gJGRyYWdnZWQuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5lcSgwKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgICAgIHZhciAkZHJhZ0hpZXIgPSAkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLmZpbmQoJy5ub2RlJyk7XG4gICAgICAgICAgJGRyYWdnZWQuY2xvc2VzdCgnLm9yZ2NoYXJ0JylcbiAgICAgICAgICAgIC5kYXRhKCdkcmFnZ2VkJywgJGRyYWdnZWQpXG4gICAgICAgICAgICAuZmluZCgnLm5vZGUnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBub2RlKSB7XG4gICAgICAgICAgICAgIGlmICgkZHJhZ0hpZXIuaW5kZXgobm9kZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKSB7XG4gICAgICAgICAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEoJGRyYWdnZWQsICRkcmFnWm9uZSwgJChub2RlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgJChub2RlKS5hZGRDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgJChub2RlKS5hZGRDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2RyYWdvdmVyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmICghJCh0aGlzKS5pcygnLmFsbG93ZWREcm9wJykpIHtcbiAgICAgICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbm9uZSc7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAub24oJ2RyYWdlbmQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZmluZCgnLmFsbG93ZWREcm9wJykucmVtb3ZlQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignZHJvcCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgdmFyICRkcm9wWm9uZSA9ICQodGhpcyk7XG4gICAgICAgICAgdmFyICRvcmdjaGFydCA9ICRkcm9wWm9uZS5jbG9zZXN0KCcub3JnY2hhcnQnKTtcbiAgICAgICAgICB2YXIgJGRyYWdnZWQgPSAkb3JnY2hhcnQuZGF0YSgnZHJhZ2dlZCcpO1xuICAgICAgICAgICRvcmdjaGFydC5maW5kKCcuYWxsb3dlZERyb3AnKS5yZW1vdmVDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgICB2YXIgJGRyYWdab25lID0gJGRyYWdnZWQuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5lcSgwKS5jaGlsZHJlbigpO1xuICAgICAgICAgIC8vIGZpcnN0bHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyb3Agem9uZVxuICAgICAgICAgIGlmICghJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5sZW5ndGgpIHsgLy8gaWYgdGhlIGRyb3Agem9uZSBpcyBhIGxlYWYgbm9kZVxuICAgICAgICAgICAgJGRyb3Bab25lLmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXG4gICAgICAgICAgICAgIC5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJywgMilcbiAgICAgICAgICAgICAgLnBhcmVudCgpLmFmdGVyKCc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nXG4gICAgICAgICAgICAgICsgJzx0ciBjbGFzcz1cImxpbmVzXCI+PHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+PC90cj4nXG4gICAgICAgICAgICAgICsgJzx0ciBjbGFzcz1cIm5vZGVzXCI+PC90cj4nKVxuICAgICAgICAgICAgICAuc2libGluZ3MoJzpsYXN0JykuYXBwZW5kKCRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpLmVuZCgpLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZHJvcENvbHNwYW4gPSBwYXJzZUludCgkZHJvcFpvbmUucGFyZW50KCkuYXR0cignY29sc3BhbicpKSArIDI7XG4gICAgICAgICAgICB2YXIgaG9yaXpvbnRhbEVkZ2VzID0gJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPic7XG4gICAgICAgICAgICAkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5uZXh0KCkuYWRkQmFjaygpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyb3BDb2xzcGFuKTtcbiAgICAgICAgICAgIGlmICghJGRyYWdnZWQuZmluZCgnLmhvcml6b250YWxFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICRkcmFnZ2VkLmFwcGVuZChob3Jpem9udGFsRWRnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgxKS5jaGlsZHJlbignOmxhc3QnKS5iZWZvcmUoJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD4nKVxuICAgICAgICAgICAgICAuZW5kKCkubmV4dCgpLmFwcGVuZCgkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcbiAgICAgICAgICAgIHZhciAkZHJvcFNpYnMgPSAkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICAgIGlmICgkZHJvcFNpYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICRkcm9wU2licy5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc2Vjb25kbHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyYWdnZWQgbm9kZVxuICAgICAgICAgIHZhciBkcmFnQ29sc3BhbiA9IHBhcnNlSW50KCRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJykpO1xuICAgICAgICAgIGlmIChkcmFnQ29sc3BhbiA+IDIpIHtcbiAgICAgICAgICAgICRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxuICAgICAgICAgICAgICAucGFyZW50KCkubmV4dCgpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcbiAgICAgICAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbigpLnNsaWNlKDEsIDMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyICRkcmFnU2licyA9ICRkcmFnWm9uZS5wYXJlbnQoKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgICAgICAgaWYgKCRkcmFnU2licy5sZW5ndGggPT09MSkge1xuICAgICAgICAgICAgICAkZHJhZ1NpYnMuZmluZCgnLmhvcml6b250YWxFZGdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRkcmFnWm9uZS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcbiAgICAgICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcbiAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgICRvcmdjaGFydC50cmlnZ2VySGFuZGxlcih7ICd0eXBlJzogJ25vZGVkcm9wcGVkLm9yZ2NoYXJ0JywgJ2RyYWdnZWROb2RlJzogJGRyYWdnZWQsICdkcmFnWm9uZSc6ICRkcmFnWm9uZS5jaGlsZHJlbigpLCAnZHJvcFpvbmUnOiAkZHJvcFpvbmUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gYWxsb3cgdXNlciB0byBhcHBlbmQgZG9tIG1vZGlmaWNhdGlvbiBhZnRlciBmaW5pc2hpbmcgbm9kZSBjcmVhdGUgb2Ygb3JnY2hhcnRcbiAgICAgIGlmIChvcHRzLmNyZWF0ZU5vZGUpIHtcbiAgICAgICAgb3B0cy5jcmVhdGVOb2RlKCRub2RlRGl2LCBub2RlRGF0YSk7XG4gICAgICB9XG4gICAgICBkdGQucmVzb2x2ZSgkbm9kZURpdik7XG4gICAgICByZXR1cm4gZHRkLnByb21pc2UoKTtcbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGJ1aWxkIHRoZSB0cmVlXG4gICAgYnVpbGRIaWVyYXJjaHk6IGZ1bmN0aW9uICgkYXBwZW5kVG8sIG5vZGVEYXRhLCBsZXZlbCwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbm9kZVdyYXBwZXI7XG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIG5vZGVcbiAgICAgIHZhciAkY2hpbGROb2RlcyA9IG5vZGVEYXRhLmNoaWxkcmVuO1xuICAgICAgdmFyIGhhc0NoaWxkcmVuID0gJGNoaWxkTm9kZXMgPyAkY2hpbGROb2Rlcy5sZW5ndGggOiBmYWxzZTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsTm9kZSA9IChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID4gMSkgeyAvLyBpZiBub2RlRGF0YSBoYXMgbmVzdGVkIHN0cnVjdHVyZVxuICAgICAgICAkbm9kZVdyYXBwZXIgPSBpc1ZlcnRpY2FsTm9kZSA/ICRhcHBlbmRUbyA6ICQoJzx0YWJsZT4nKTtcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgICRhcHBlbmRUby5hcHBlbmQoJG5vZGVXcmFwcGVyKTtcbiAgICAgICAgfVxuICAgICAgICAkLndoZW4odGhpcy5jcmVhdGVOb2RlKG5vZGVEYXRhLCBsZXZlbCwgb3B0cykpXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCRub2RlRGl2KSB7XG4gICAgICAgICAgaWYgKGlzVmVydGljYWxOb2RlKSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlRGl2KTtcbiAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlRGl2LndyYXAoJzx0cj48dGQnICsgKGhhc0NoaWxkcmVuID8gJyBjb2xzcGFuPVwiJyArICRjaGlsZE5vZGVzLmxlbmd0aCAqIDIgKyAnXCInIDogJycpICsgJz48L3RkPjwvdHI+JykuY2xvc2VzdCgndHInKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY3JlYXQgbm9kZScpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gQ29uc3RydWN0IHRoZSBpbmZlcmlvciBub2RlcyBhbmQgY29ubmVjdGlvbmcgbGluZXNcbiAgICAgIGlmIChoYXNDaGlsZHJlbikge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMobm9kZURhdGEpLmxlbmd0aCA9PT0gMSkgeyAvLyBpZiBub2RlRGF0YSBpcyBqdXN0IGFuIGFycmF5XG4gICAgICAgICAgJG5vZGVXcmFwcGVyID0gJGFwcGVuZFRvO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpc0hpZGRlbiA9IChsZXZlbCArIDEgPj0gb3B0cy5kZXB0aCB8fCBub2RlRGF0YS5jb2xsYXBzZWQpID8gJyBoaWRkZW4nIDogJyc7XG4gICAgICAgIHZhciBpc1ZlcnRpY2FsTGF5ZXIgPSAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID49IG9wdHMudmVydGljYWxEZXB0aCkgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgLy8gZHJhdyB0aGUgbGluZSBjbG9zZSB0byBwYXJlbnQgbm9kZVxuICAgICAgICBpZiAoIWlzVmVydGljYWxMYXllcikge1xuICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjb2xzcGFuPVwiJyArICRjaGlsZE5vZGVzLmxlbmd0aCAqIDIgKyAnXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRyYXcgdGhlIGxpbmVzIGNsb3NlIHRvIGNoaWxkcmVuIG5vZGVzXG4gICAgICAgIHZhciBsaW5lTGF5ZXIgPSAnPHRyIGNsYXNzPVwibGluZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD4nO1xuICAgICAgICBmb3IgKHZhciBpPTE7IGk8JGNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsaW5lTGF5ZXIgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD4nO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVMYXllciArPSAnPHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPjwvdHI+JztcbiAgICAgICAgdmFyICRub2RlTGF5ZXI7XG4gICAgICAgIGlmIChpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICAkbm9kZUxheWVyID0gJCgnPHVsPicpO1xuICAgICAgICAgIGlmIChpc0hpZGRlbikge1xuICAgICAgICAgICAgJG5vZGVMYXllci5hZGRDbGFzcyhpc0hpZGRlbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChsZXZlbCArIDIgPT09IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgnPHRyIGNsYXNzPVwidmVydGljYWxOb2RlcycgKyBpc0hpZGRlbiArICdcIj48dGQ+PC90ZD48L3RyPicpXG4gICAgICAgICAgICAgIC5maW5kKCcudmVydGljYWxOb2RlcycpLmNoaWxkcmVuKCkuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZUxheWVyID0gJCgnPHRyIGNsYXNzPVwibm9kZXMnICsgaXNIaWRkZW4gKyAnXCI+Jyk7XG4gICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZChsaW5lTGF5ZXIpLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWN1cnNlIHRocm91Z2ggY2hpbGRyZW4gbm9kZXNcbiAgICAgICAgJC5lYWNoKCRjaGlsZE5vZGVzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgJG5vZGVDZWxsID0gaXNWZXJ0aWNhbExheWVyID8gJCgnPGxpPicpIDogJCgnPHRkIGNvbHNwYW49XCIyXCI+Jyk7XG4gICAgICAgICAgJG5vZGVMYXllci5hcHBlbmQoJG5vZGVDZWxsKTtcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRub2RlQ2VsbCwgdGhpcywgbGV2ZWwgKyAxLCBvcHRzLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIGNoaWxkIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZENoaWxkTm9kZTogZnVuY3Rpb24gKCRhcHBlbmRUbywgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJGFwcGVuZFRvLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBkYXRhID0gbm9kZURhdGEuY2hpbGRyZW4gfHwgbm9kZURhdGEuc2libGluZ3M7XG4gICAgICAkYXBwZW5kVG8uZmluZCgndGQ6Zmlyc3QnKS5hdHRyKCdjb2xzcGFuJywgZGF0YS5sZW5ndGggKiAyKTtcbiAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGFwcGVuZFRvLCB7ICdjaGlsZHJlbic6IGRhdGEgfSwgMCwgb3B0cywgY2FsbGJhY2spO1xuICAgIH0sXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcbiAgICBhZGRDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlLCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgrK2NvdW50ID09PSBkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgIGlmICghJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkbm9kZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEkbm9kZS5maW5kKCcuc3ltYm9sJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhhdC5zaG93Q2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBwYXJlbnQgbm9kZSBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRQYXJlbnROb2RlOiBmdW5jdGlvbiAoJGN1cnJlbnRSb290LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkdGFibGUgPSAkKCc8dGFibGU+Jyk7XG4gICAgICBub2RlRGF0YS5yZWxhdGlvbnNoaXAgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJzAwMSc7XG4gICAgICAkLndoZW4odGhpcy5jcmVhdGVOb2RlKG5vZGVEYXRhLCAwLCBvcHRzIHx8ICRjdXJyZW50Um9vdC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJykpKVxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJG5vZGVEaXYucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuYWRkQ2xhc3MoJ3NsaWRlLWRvd24nKS53cmFwKCc8dHIgY2xhc3M9XCJoaWRkZW5cIj48dGQgY29sc3Bhbj1cIjJcIj48L3RkPjwvdHI+JykuY2xvc2VzdCgndHInKSk7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMgaGlkZGVuXCI+PHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPicpO1xuICAgICAgICAgIHZhciBsaW5lc1JvdyA9ICc8dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD4nO1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzIGhpZGRlblwiPicgKyBsaW5lc1JvdyArICc8L3RyPicpO1xuICAgICAgICAgIHZhciAkY2hhcnQgPSB0aGF0LiRjaGFydDtcbiAgICAgICAgICAkY2hhcnQucHJlcGVuZCgkdGFibGUpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RhYmxlOmZpcnN0JykuYXBwZW5kKCc8dHIgY2xhc3M9XCJub2Rlc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+PC90cj4nKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oKS5hcHBlbmQoJGNoYXJ0LmNoaWxkcmVuKCd0YWJsZScpLmxhc3QoKSk7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdGUgcGFyZW50IG5vZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBleHBvc2VkIG1ldGhvZFxuICAgIGFkZFBhcmVudDogZnVuY3Rpb24gKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5idWlsZFBhcmVudE5vZGUoJGN1cnJlbnRSb290LCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50b3BFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudGl0bGUnKS5hZnRlcignPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2hvd1BhcmVudCgkY3VycmVudFJvb3QpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzdWJzZXF1ZW50IHByb2Nlc3Npbmcgb2YgYnVpbGQgc2libGluZyBub2Rlc1xuICAgIGNvbXBsZW1lbnRMaW5lOiBmdW5jdGlvbiAoJG9uZVNpYmxpbmcsIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCkge1xuICAgICAgdmFyIGxpbmVzID0gJyc7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nU2libGlnQ291bnQ7IGkrKykge1xuICAgICAgICBsaW5lcyArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICB9XG4gICAgICAkb25lU2libGluZy5wYXJlbnQoKS5wcmV2QWxsKCd0cjpndCgwKScpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIHNpYmxpbmdDb3VudCAqIDIpXG4gICAgICAgIC5lbmQoKS5uZXh0KCkuY2hpbGRyZW4oJzpmaXJzdCcpLmFmdGVyKGxpbmVzKTtcbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZFNpYmxpbmdOb2RlOiBmdW5jdGlvbiAoJG5vZGVDaGFydCwgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGVDaGFydC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgbmV3U2libGluZ0NvdW50ID0gbm9kZURhdGEuc2libGluZ3MgPyBub2RlRGF0YS5zaWJsaW5ncy5sZW5ndGggOiBub2RlRGF0YS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgZXhpc3RpbmdTaWJsaWdDb3VudCA9ICRub2RlQ2hhcnQucGFyZW50KCkuaXMoJ3RkJykgPyAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykuY2hpbGRyZW4oKS5sZW5ndGggOiAxO1xuICAgICAgdmFyIHNpYmxpbmdDb3VudCA9IGV4aXN0aW5nU2libGlnQ291bnQgKyBuZXdTaWJsaW5nQ291bnQ7XG4gICAgICB2YXIgaW5zZXJ0UG9zdGlvbiA9IChzaWJsaW5nQ291bnQgPiAxKSA/IE1hdGguZmxvb3Ioc2libGluZ0NvdW50LzIgLSAxKSA6IDA7XG4gICAgICAvLyBqdXN0IGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGZvciB0aGUgc3BlY2lmaWMgbm9kZVxuICAgICAgaWYgKCRub2RlQ2hhcnQucGFyZW50KCkuaXMoJ3RkJykpIHtcbiAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykucHJldkFsbCgndHI6bGFzdCcpO1xuICAgICAgICAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykucHJldkFsbCgndHI6bHQoMiknKS5yZW1vdmUoKTtcbiAgICAgICAgdmFyIGNoaWxkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKSwgbm9kZURhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgrK2NoaWxkQ291bnQgPT09IG5ld1NpYmxpbmdDb3VudCkge1xuICAgICAgICAgICAgdmFyICRzaWJsaW5nVGRzID0gJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oJ3RkJyk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTaWJsaWdDb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkc2libGluZ1Rkcy5lcSgwKS5iZWZvcmUoJG5vZGVDaGFydC5jbG9zZXN0KCd0ZCcpLnNpYmxpbmdzKCkuYWRkQmFjaygpLnVud3JhcCgpKSwgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KTtcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMuYWRkQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJHNpYmxpbmdUZHMuZXEoaW5zZXJ0UG9zdGlvbikuYWZ0ZXIoJG5vZGVDaGFydC5jbG9zZXN0KCd0ZCcpLnVud3JhcCgpKSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMubm90KCc6ZXEoJyArIGluc2VydFBvc3Rpb24gKyAxICsgJyknKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxuICAgICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zbGljZShpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgeyAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBhbmQgcGFyZW50IG5vZGUgZm9yIHRoZSBzcGVjaWZpYyBuZG9lXG4gICAgICAgIHZhciBub2RlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JyksIG5vZGVEYXRhLCAwLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoKytub2RlQ291bnQgPT09IHNpYmxpbmdDb3VudCkge1xuICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkbm9kZUNoYXJ0Lm5leHQoKS5jaGlsZHJlbigndHI6bGFzdCcpXG4gICAgICAgICAgICAgIC5jaGlsZHJlbigpLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpXG4gICAgICAgICAgICAgIC5hcHBlbmQoJG5vZGVDaGFydCkpLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkuZXEoMCkuYWRkQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWRvd24nKTtcbiAgICAgICAgICAgICRub2RlQ2hhcnQucGFyZW50KCkuc2libGluZ3MoKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLXJpZ2h0JylcbiAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNsaWNlKGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYWRkU2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5idWlsZFNpYmxpbmdOb2RlKCRub2RlLmNsb3Nlc3QoJ3RhYmxlJyksIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcsIHRydWUpO1xuICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKS5hZnRlcignPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT48aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHJlbW92ZU5vZGVzOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcbiAgICAgIHZhciAkc2licyA9ICRwYXJlbnQucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgIGlmICgkcGFyZW50LmlzKCd0ZCcpKSB7XG4gICAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJykuZXhpc3QpIHtcbiAgICAgICAgICAkc2licy5lcSgyKS5jaGlsZHJlbignLnRvcExpbmU6bHQoMiknKS5yZW1vdmUoKTtcbiAgICAgICAgICAkc2licy5zbGljZSgwLCAyKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCAkc2licy5lcSgyKS5jaGlsZHJlbigpLmxlbmd0aCk7XG4gICAgICAgICAgJHBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2licy5lcSgwKS5jaGlsZHJlbigpLnJlbW92ZUF0dHIoJ2NvbHNwYW4nKVxuICAgICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcbiAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkcGFyZW50LmFkZCgkcGFyZW50LnNpYmxpbmdzKCkpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBleHBvcnQ6IGZ1bmN0aW9uIChleHBvcnRGaWxlbmFtZSwgZXhwb3J0RmlsZWV4dGVuc2lvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZXhwb3J0RmlsZW5hbWUgPSAodHlwZW9mIGV4cG9ydEZpbGVuYW1lICE9PSAndW5kZWZpbmVkJykgPyAgZXhwb3J0RmlsZW5hbWUgOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZW5hbWU7XG4gICAgICBleHBvcnRGaWxlZXh0ZW5zaW9uID0gKHR5cGVvZiBleHBvcnRGaWxlZXh0ZW5zaW9uICE9PSAndW5kZWZpbmVkJykgPyAgZXhwb3J0RmlsZWV4dGVuc2lvbiA6IHRoaXMub3B0aW9ucy5leHBvcnRGaWxlZXh0ZW5zaW9uO1xuICAgICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcbiAgICAgIHZhciAkbWFzayA9ICRjaGFydENvbnRhaW5lci5maW5kKCcubWFzaycpO1xuICAgICAgaWYgKCEkbWFzay5sZW5ndGgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1hc2tcIj48aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT48L2Rpdj4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRtYXNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIHZhciBzb3VyY2VDaGFydCA9ICRjaGFydENvbnRhaW5lci5hZGRDbGFzcygnY2FudmFzQ29udGFpbmVyJykuZmluZCgnLm9yZ2NoYXJ0OnZpc2libGUnKS5nZXQoMCk7XG4gICAgICB2YXIgZmxhZyA9IHRoYXQub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdsMnInIHx8IHRoYXQub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyMmwnO1xuICAgICAgaHRtbDJjYW52YXMoc291cmNlQ2hhcnQsIHtcbiAgICAgICAgJ3dpZHRoJzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCA6IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoLFxuICAgICAgICAnaGVpZ2h0JzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoIDogc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAnb25jbG9uZSc6IGZ1bmN0aW9uIChjbG9uZURvYykge1xuICAgICAgICAgICQoY2xvbmVEb2MpLmZpbmQoJy5jYW52YXNDb250YWluZXInKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKVxuICAgICAgICAgICAgLmZpbmQoJy5vcmdjaGFydDp2aXNpYmxlOmZpcnN0JykuY3NzKCd0cmFuc2Zvcm0nLCAnJyk7XG4gICAgICAgIH0sXG4gICAgICAgICdvbnJlbmRlcmVkJzogZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICAgICRjaGFydENvbnRhaW5lci5maW5kKCcubWFzaycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICBpZiAoZXhwb3J0RmlsZWV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAncGRmJykge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHt9O1xuICAgICAgICAgICAgdmFyIGRvY1dpZHRoID0gTWF0aC5mbG9vcihjYW52YXMud2lkdGggKiAwLjI2NDYpO1xuICAgICAgICAgICAgdmFyIGRvY0hlaWdodCA9IE1hdGguZmxvb3IoY2FudmFzLmhlaWdodCAqIDAuMjY0Nik7XG4gICAgICAgICAgICBpZiAoZG9jV2lkdGggPiBkb2NIZWlnaHQpIHtcbiAgICAgICAgICAgICAgZG9jID0gbmV3IGpzUERGKCdsJywgJ21tJywgW2RvY1dpZHRoLCBkb2NIZWlnaHRdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERigncCcsICdtbScsIFtkb2NIZWlnaHQsIGRvY1dpZHRoXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2MuYWRkSW1hZ2UoY2FudmFzLnRvRGF0YVVSTCgpLCAncG5nJywgMCwgMCk7XG4gICAgICAgICAgICBkb2Muc2F2ZShleHBvcnRGaWxlbmFtZSArICcucGRmJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpc1dlYmtpdCA9ICdXZWJraXRBcHBlYXJhbmNlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XG4gICAgICAgICAgICB2YXIgaXNGZiA9ICEhd2luZG93LnNpZGViYXI7XG4gICAgICAgICAgICB2YXIgaXNFZGdlID0gbmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInIHx8IChuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gXCJOZXRzY2FwZVwiICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ0VkZ2UnKSA+IC0xKTtcblxuICAgICAgICAgICAgaWYgKCghaXNXZWJraXQgJiYgIWlzRmYpIHx8IGlzRWRnZSkge1xuICAgICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZUJsb2IoY2FudmFzLm1zVG9CbG9iKCksIGV4cG9ydEZpbGVuYW1lICsgJy5wbmcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICcub2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKTtcbiAgICAgICAgICAgICAgaWYgKCEkY2hhcnRDb250YWluZXIuZmluZChzZWxlY3RvcikubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGEgY2xhc3M9XCJvYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgJ1wiJ1xuICAgICAgICAgICAgICAgICAgKyAnIGRvd25sb2FkPVwiJyArIGV4cG9ydEZpbGVuYW1lICsgJy5wbmdcIj48L2E+Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmF0dHIoJ2hyZWYnLCBjYW52YXMudG9EYXRhVVJMKCkpWzBdLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQuZm4ub3JnY2hhcnQgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIHJldHVybiBuZXcgT3JnQ2hhcnQodGhpcywgb3B0cykuaW5pdCgpO1xuICB9O1xuXG59KSk7XG4iXX0=
