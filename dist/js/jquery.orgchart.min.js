"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});return"undefined"!=typeof MutationObserver&&this.triggerInitEvent(),"object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length&&this.attachExportButton(),this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},triggerInitEvent:function(){var t=this,i=new MutationObserver(function(n){i.disconnect();e:for(var s=0;s<n.length;s++)for(var a=0;a<n[s].addedNodes.length;a++)if(n[s].addedNodes[a].classList.contains("orgchart")&&t.options.initCompleted&&"function"==typeof t.options.initCompleted){t.options.initCompleted(t.$chart);var d=e.Event("init.orgchart");t.$chart.trigger(d);break e}});i.observe(this.$chartContainer[0],{childList:!0})},attachExportButton:function(){var t=this,i=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),t.export()}});this.$chartContainer.append(i)},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var d=a.split(",");-1===a.indexOf("3d")?(n=parseInt(d[4]),s=parseInt(d[5])):(n=parseInt(d[12]),s=parseInt(d[13]))}var o=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)o=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else o=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-o,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-o,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",d=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(d=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(d=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t.attr("data-id")&&(n.id=t.attr("data-id")),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){if(void 0===this.$chart)return"Error: orgchart does not exist";if(!this.$chart.find(".node").length)return"Error: nodes do not exist";var e=!0;return this.$chart.find(".node").each(function(){if(!this.id)return e=!1,!1}),e?this.loopChart(this.$chart):"Error: All nodes of orghcart to be exported must have data-id attribute!"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return i.closest(".nodes").length&&i.closest(".nodes").is(".hidden")||i.closest("table").parent().length&&i.closest("table").parent().is(".hidden")||i.parent().is("li")&&(i.closest("ul").is(".hidden")||i.closest("verticalNodes").is(".hidden"))?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e),t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},isVisibleNode:function(t,i){return this.getNodeState(e(i)).visible},hideChildrenEnd:function(e){e.data.animatedNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.animatedNodes.closest("table").closest("tr").prevAll(".lines").removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},hideChildren:function(e){var t=e.closest("tr").siblings();this.stopAjax(t.last());var i=t.last().find(".node").filter(this.isVisibleNode.bind(this)),n=!!t.last().is(".verticalNodes");n||i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),this.repaint(i.get(0)),i.addClass("sliding slide-up").eq(0).one("transitionend",{animatedNodes:i,lowerLevel:t,isVerticalDesc:n,node:e},this.hideChildrenEnd.bind(this))},showChildrenEnd:function(e){var t=e.data.node;e.data.animatedNodes.removeClass("sliding"),this.isInAction(t)&&this.switchVerticalArrow(t.children(".bottomEdge"))},showChildren:function(e){var t=e.closest("tr").siblings(),i=!!t.is(".verticalNodes")?t.removeClass("hidden").find(".node").filter(this.isVisibleNode.bind(this)):t.removeClass("hidden").eq(2).children().find(".node:first").filter(this.isVisibleNode.bind(this));this.repaint(i.get(0)),i.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{node:e,animatedNodes:i},this.showChildrenEnd.bind(this))},hideSiblingsEnd:function(e){var t=e.data.node,i=e.data.nodeContainer,n=e.data.direction;e.data.lines.removeAttr("style");var s=n?"left"===n?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,n?2*s.length+1:-1).addClass("hidden"),e.data.animatedNodes.removeClass("sliding"),s.find(".node:gt(0)").filter(this.isVisibleNode.bind(this)).removeClass("slide-left slide-right").addClass("slide-up"),s.find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),this.isInAction(t)&&this.switchHorizontalArrow(t)},hideSiblings:function(e,t){var i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"):i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"):(i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"),i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"));var n=i.siblings().find(".sliding"),s=n.closest(".nodes").prevAll(".lines").css("visibility","hidden");n.eq(0).one("transitionend",{node:e,nodeContainer:i,direction:t,animatedNodes:n,lines:s},this.hideSiblingsEnd.bind(this))},showSiblingsEnd:function(e){var t=e.data.node;e.data.visibleNodes.removeClass("sliding"),this.isInAction(t)&&(this.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))},showRelatedParentEnd:function(t){e(t.target).removeClass("sliding")},showSiblings:function(t,i){var n=e();n=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var s=t.closest("table").closest("tr").siblings();if(i?s.eq(2).children(".hidden").slice(0,2*n.length).removeClass("hidden"):s.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){s.removeClass("hidden");var a=s.find(".node")[0];this.repaint(a),e(a).addClass("sliding").removeClass("slide-down").one("transitionend",this.showRelatedParentEnd)}var d=n.find(".node").filter(this.isVisibleNode.bind(this));this.repaint(d.get(0)),d.addClass("sliding").removeClass("slide-left slide-right"),d.eq(0).one("transitionend",{node:t,visibleNodes:d},this.showSiblingsEnd.bind(this))},startLoading:function(t){var i=this.$chart;return(void 0===i.data("inAjax")||!0!==i.data("inAjax"))&&(t.addClass("hidden"),t.parent().append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>').children().not(".spinner").css("opacity",.2),i.data("inAjax",!0),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t){var i=t.parent();t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),this.$chart.data("inAjax",!1),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},nodeEnterLeaveHandler:function(t){var i=e(t.delegateTarget),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),d=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=this.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=this.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),d.length&&this.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")},nodeClickHandler:function(t){this.$chart.find(".focused").removeClass("focused"),e(t.delegateTarget).addClass("focused")},loadNodes:function(t,i,n){var s=this,a=this.options;e.ajax({url:i,dataType:"json"}).done(function(i){s.$chart.data("inAjax")&&("parent"===t?e.isEmptyObject(i)||s.addParent(n.parent(),i,a):"children"===t?i.children.length&&s.addChildren(n.parent(),i,e.extend({},a,{depth:0})):(i.siblings||i.children)&&s.addSiblings(n.parent(),i,a))}).fail(function(){console.log("Failed to get "+t+" data")}).always(function(){s.endLoading(n)})},HideFirstParentEnd:function(e){var t=e.data.topEdge,i=t.parent();this.isInAction(i)&&(this.switchVerticalArrow(t),this.switchHorizontalArrow(i))},topEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"parent");if(s.exist){var a=n.closest("table").closest("tr").siblings(":first").find(".node");if(a.is(".sliding"))return;s.visible?(this.hideParent(n),a.one("transitionend",{topEdge:i},this.HideFirstParentEnd.bind(this))):this.showParent(n)}else if(this.startLoading(i)){var d=this.options,o=e.isFunction(d.ajaxURL.parent)?d.ajaxURL.parent(t.data.nodeData):d.ajaxURL.parent+n[0].id;this.loadNodes("parent",o,i)}},bottomEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"children");if(s.exist){if(n.closest("tr").siblings(":last").find(".sliding").length)return;s.visible?this.hideChildren(n):this.showChildren(n)}else if(this.startLoading(i)){var a=this.options,d=e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(t.data.nodeData):a.ajaxURL.children+n[0].id;this.loadNodes("children",d,i)}},hEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.options,a=this.getNodeState(n,"siblings");if(a.exist){if(n.closest("table").parent().siblings().find(".sliding").length)return;if(s.toggleSiblingsResp){var d=n.closest("table").parent().prev(),o=n.closest("table").parent().next();i.is(".leftEdge")?d.is(".hidden")?this.showSiblings(n,"left"):this.hideSiblings(n,"left"):o.is(".hidden")?this.showSiblings(n,"right"):this.hideSiblings(n,"right")}else a.visible?this.hideSiblings(n):this.showSiblings(n)}else if(this.startLoading(i)){var r=n[0].id,l=this.getNodeState(n,"parent").exist?e.isFunction(s.ajaxURL.siblings)?s.ajaxURL.siblings(t.data.nodeData):s.ajaxURL.siblings+r:e.isFunction(s.ajaxURL.families)?s.ajaxURL.families(t.data.nodeData):s.ajaxURL.families+r;this.loadNodes("siblings",l,i)}},expandVNodesEnd:function(e){e.data.vNodes.removeClass("sliding")},collapseVNodesEnd:function(e){e.data.vNodes.removeClass("sliding").closest("ul").addClass("hidden")},toggleVNodes:function(t){var i=e(t.target),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),this.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{vNodes:a},this.expandVNodesEnd)):(s.addClass("sliding slide-up").eq(0).one("transitionend",{vNodes:s},this.collapseVNodesEnd),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))},createGhostNode:function(n){var s=e(n.target),a=this.options,d=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());o&&d.dataTransfer.setData("text/html","hack for firefox");var r,l;i.querySelector(".ghost-node")?(r=s.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),s.closest(".orgchart").append(r));var h=s.closest(".orgchart").css("transform").split(","),c=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?h[0].slice(h[0].indexOf("(")+1):h[1]));r.setAttribute("width",s.outerWidth(!1)),r.setAttribute("height",s.outerHeight(!1)),l.setAttribute("x",5*c),l.setAttribute("y",5*c),l.setAttribute("width",120*c),l.setAttribute("height",40*c),l.setAttribute("rx",4*c),l.setAttribute("ry",4*c),l.setAttribute("stroke-width",1*c);var g=d.offsetX*c,p=d.offsetY*c;if("l2r"===a.direction?(g=d.offsetY*c,p=d.offsetX*c):"r2l"===a.direction?(g=s.outerWidth(!1)-d.offsetY*c,p=d.offsetX*c):"b2t"===a.direction&&(g=s.outerWidth(!1)-d.offsetX*c,p=s.outerHeight(!1)-d.offsetY*c),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var f=i.createElement("img");f.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),d.dataTransfer.setDragImage(f,g,p)}else d.dataTransfer.setDragImage(r,g,p)},filterAllowedDropNodes:function(t){var i=this.options,n=t.closest(".nodes").siblings().eq(0).find(".node:first"),s=t.closest("table").find(".node");this.$chart.data("dragged",t).find(".node").each(function(a,d){-1===s.index(d)&&(i.dropCriteria?i.dropCriteria(t,n,e(d))&&e(d).addClass("allowedDrop"):e(d).addClass("allowedDrop"))})},dragstartHandler:function(t){"none"!==this.$chart.css("transform")&&this.createGhostNode(t),this.filterAllowedDropNodes(e(t.target))},dragoverHandler:function(t){t.preventDefault(),e(t.delegateTarget).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")},dragendHandler:function(e){this.$chart.find(".allowedDrop").removeClass("allowedDrop")},dropHandler:function(t){var i=e(t.delegateTarget),n=this.$chart.data("dragged"),s=n.closest(".nodes").siblings().eq(0).children(),a=e.Event("nodedrop.orgchart");if(this.$chart.trigger(a,{draggedNode:n,dragZone:s.children(),dropZone:i}),!a.isDefaultPrevented()){if(i.closest("tr").siblings().length){var d=parseInt(i.parent().attr("colspan"))+2,o='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",d),n.find(".horizontalEdge").length||n.append(o),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine"></td><td class="rightLine topLine"></td>').end().next().append(n.closest("table").parent());var r=n.closest("table").parent().siblings().find(".node:first");1===r.length&&r.append(o)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine"></td><td class="leftLine"></td></tr><tr class="nodes"></tr>').siblings(":last").append(n.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(s.attr("colspan"));if(l>2){s.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var h=s.parent().siblings(".nodes").children().find(".node:first");1===h.length&&h.find(".horizontalEdge").remove()}else s.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}},createNode:function(t,i,n){t.children||(t.children=[]),e.each(t.children,function(e,i){i.parentId=t.id});var s=e.Deferred(),a=e("<div"+(n.draggable?' draggable="true"':"")+(t[n.nodeId]?' id="'+t[n.nodeId]+'"':"")+(t.parentId?' data-parent="'+t.parentId+'"':"")+">").addClass("node "+(t.className||"")+(i>=n.depth?" slide-up":""));n.nodeTemplate?a.append(n.nodeTemplate(t)):a.append('<div class="title">'+t[n.nodeTitle]+"</div>").append(void 0!==n.nodeContent?'<div class="content">'+(t[n.nodeContent]||"")+"</div>":"");var d=t.relationship||"";if(n.verticalDepth&&i+2>n.verticalDepth){if(i+1>=n.verticalDepth&&Number(d.substr(2,1))){var o=i+1>=n.depth?"plus":"minus";a.append('<i class="toggleBtn fa fa-'+o+'-square"></i>')}}else Number(d.substr(0,1))&&a.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(d.substr(1,1))&&a.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(d.substr(2,1))&&a.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+n.parentNodeSymbol+' symbol"></i>');return a.on("mouseenter mouseleave",this.nodeEnterLeaveHandler.bind(this)),a.on("click",this.nodeClickHandler.bind(this)),a.on("click",".topEdge",{nodeData:t},this.topEdgeClickHandler.bind(this)),a.on("click",".bottomEdge",{nodeData:t},this.bottomEdgeClickHandler.bind(this)),a.on("click",".leftEdge, .rightEdge",{nodeData:t},this.hEdgeClickHandler.bind(this)),a.on("click",".toggleBtn",this.toggleVNodes.bind(this)),n.draggable&&a.on("dragstart",this.dragstartHandler.bind(this)).on("dragover",this.dragoverHandler.bind(this)).on("dragend",this.dragendHandler.bind(this)).on("drop",this.dropHandler.bind(this)),n.createNode&&n.createNode(a,t),s.resolve(a),s.promise()},buildHierarchy:function(t,i,n,s,a){var d,o=this,r=i.children,l=!!r&&r.length,h=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(d=h?t:e("<table>"),h||t.append(d),e.when(this.createNode(i,n,s)).done(function(t){h?d.append(t):d.append(e("<tr/>").append(e("<td"+(l?' colspan="'+2*r.length+'"':"")+"></td>").append(t))),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(d=t);var c=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||d.append('<tr class="lines'+c+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var p='<tr class="lines'+c+'"><td class="rightLine"></td>',f=1;f<r.length;f++)p+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';p+='<td class="leftLine"></td></tr>';var v;g?(v=e("<ul>"),c&&s.depth+1!==s.verticalDepth&&v.addClass(c),n+2===s.verticalDepth?d.append('<tr class="verticalNodes'+c+'"><td></td></tr>').find(".verticalNodes").children().append(v):d.append(v)):(v=e('<tr class="nodes'+c+'">'),d.append(p).append(v)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');v.append(t),o.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,d=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(t){d.append(e('<tr class="hidden">').append(e('<td colspan="2">').append(t.removeClass("slide-up").addClass("slide-down")))),d.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');d.append('<tr class="lines hidden"><td class="rightLine"></td><td class="leftLine"></td></tr>');var i=a.$chart;i.prepend(d).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(i.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),d=i.siblings?i.siblings.length:i.children.length,o=t.parent().is("td")?t.closest("tr").children().length:1,r=o+d,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var h=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++h===d){var e=t.parent().closest("table").children("tr:last").children("td");o>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,o),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var c=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++c===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var d=this.$chartContainer,o=d.find(".mask");o.length?o.removeClass("hidden"):d.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=d.addClass("canvasContainer").find('.orgchart:not(".hidden")').get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find('.orgchart:not(".hidden"):first').css("transform","")},onrendered:function(e){if(d.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var o={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(o=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),o.save(n+".pdf")}else{var h="WebkitAppearance"in i.documentElement.style,c=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!h&&!c||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var p=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");d.find(p).length||d.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),d.find(p).attr("href",e.toDataURL())[0].click()}}}}).then(function(){d.removeClass("canvasContainer")},function(){d.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsInRyaWdnZXJJbml0RXZlbnQiLCJ0eXBlIiwiYnVpbGRIaWVyYXJjaHkiLCJidWlsZEpzb25EUyIsImNoaWxkcmVuIiwiYWpheFVSTCIsImF0dGFjaFJlbCIsImFwcGVuZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiYXR0YWNoRXhwb3J0QnV0dG9uIiwiYmluZFBhbiIsImJpbmRab29tIiwibW8iLCJtdXRhdGlvbnMiLCJkaXNjb25uZWN0IiwiaW5pdFRpbWUiLCJpIiwiaiIsImFkZGVkTm9kZXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImluaXRDb21wbGV0ZWQiLCJpbml0RXZlbnQiLCJFdmVudCIsInRyaWdnZXIiLCJvYnNlcnZlIiwiY2hpbGRMaXN0IiwiJGV4cG9ydEJ0biIsInRleHQiLCJlIiwicHJldmVudERlZmF1bHQiLCJleHBvcnQiLCJzZXRPcHRpb25zIiwidmFsIiwidW5iaW5kUGFuIiwidW5iaW5kWm9vbSIsInBhblN0YXJ0SGFuZGxlciIsImRlbGVnYXRlVGFyZ2V0IiwidG91Y2hlcyIsImNzcyIsImxhc3RYIiwibGFzdFkiLCJsYXN0VGYiLCJ0ZW1wIiwic3BsaXQiLCJpbmRleE9mIiwicGFyc2VJbnQiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRUb3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsIm9uIiwibmV3WCIsIm5ld1kiLCJtYXRyaXgiLCJqb2luIiwicGFuRW5kSGFuZGxlciIsImNoYXJ0Iiwib2ZmIiwiem9vbVdoZWVsSGFuZGxlciIsIm9jIiwibmV3U2NhbGUiLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwic2V0Q2hhcnRTY2FsZSIsInpvb21TdGFydEhhbmRsZXIiLCJkaXN0IiwiZ2V0UGluY2hEaXN0Iiwiem9vbWluZ0hhbmRsZXIiLCJ6b29tRW5kSGFuZGxlciIsImRpZmYiLCJNYXRoIiwic3FydCIsImNsaWVudFgiLCJjbGllbnRZIiwidGFyZ2V0U2NhbGUiLCJhYnMiLCJwYXJzZUZsb2F0IiwiJGxpIiwic3ViT2JqIiwibmFtZSIsImNvbnRlbnRzIiwiZXEiLCJ0cmltIiwicmVsYXRpb25zaGlwIiwicGFyZW50IiwiaXMiLCJzaWJsaW5ncyIsImF0dHIiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsInZhbGlkIiwiZ2V0Tm9kZVN0YXRlIiwiJG5vZGUiLCJyZWxhdGlvbiIsIiR0YXJnZXQiLCJleGlzdCIsInZpc2libGUiLCJnZXRSZWxhdGVkTm9kZXMiLCJoaWRlUGFyZW50RW5kIiwidXBwZXJMZXZlbCIsImFkZENsYXNzIiwic2xpY2UiLCJyZW1vdmVBdHRyIiwiaGlkZVBhcmVudCIsIiR1cHBlckxldmVsIiwiaGlkZVNpYmxpbmdzIiwiJHBhcmVudCIsIm9uZSIsInNob3dQYXJlbnRFbmQiLCJub2RlIiwiaXNJbkFjdGlvbiIsInN3aXRjaFZlcnRpY2FsQXJyb3ciLCJzaG93UGFyZW50IiwicmVwYWludCIsImJpbmQiLCJzdG9wQWpheCIsIiRub2RlTGV2ZWwiLCJpc1Zpc2libGVOb2RlIiwiaW5kZXgiLCJoaWRlQ2hpbGRyZW5FbmQiLCJhbmltYXRlZE5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJsb3dlckxldmVsIiwicHJldkFsbCIsImxhc3QiLCJoaWRlQ2hpbGRyZW4iLCIkbG93ZXJMZXZlbCIsIiRhbmltYXRlZE5vZGVzIiwiZmlsdGVyIiwiZ2V0Iiwic2hvd0NoaWxkcmVuRW5kIiwic2hvd0NoaWxkcmVuIiwiJGxldmVscyIsImhpZGVTaWJsaW5nc0VuZCIsIiRub2RlQ29udGFpbmVyIiwibm9kZUNvbnRhaW5lciIsImxpbmVzIiwiJHNpYmxpbmdzIiwibmV4dEFsbCIsInByZXYiLCJlbmQiLCJzd2l0Y2hIb3Jpem9udGFsQXJyb3ciLCIkbGluZXMiLCJzaG93U2libGluZ3NFbmQiLCJ2aXNpYmxlTm9kZXMiLCJzaG93UmVsYXRlZFBhcmVudEVuZCIsInNob3dTaWJsaW5ncyIsIiR2aXNpYmxlTm9kZXMiLCJzdGFydExvYWRpbmciLCIkZWRnZSIsIm5vdCIsInByb3AiLCJlbmRMb2FkaW5nIiwiJGFycm93IiwidG9nZ2xlQ2xhc3MiLCIkcHJldlNpYiIsIiRuZXh0U2liIiwibmV4dCIsIiRzaWJzIiwic2lic1Zpc2libGUiLCJzdHlsZSIsIm9mZnNldFdpZHRoIiwibm9kZUVudGVyTGVhdmVIYW5kbGVyIiwiZmxhZyIsIiR0b3BFZGdlIiwiJGJvdHRvbUVkZ2UiLCIkbGVmdEVkZ2UiLCJub2RlQ2xpY2tIYW5kbGVyIiwibG9hZE5vZGVzIiwicmVsIiwiaXNFbXB0eU9iamVjdCIsImFkZFBhcmVudCIsImFkZENoaWxkcmVuIiwiYWRkU2libGluZ3MiLCJIaWRlRmlyc3RQYXJlbnRFbmQiLCJ0b3BFZGdlIiwidG9wRWRnZUNsaWNrSGFuZGxlciIsInN0b3BQcm9wYWdhdGlvbiIsInBhcmVudFN0YXRlIiwiaXNGdW5jdGlvbiIsIm5vZGVEYXRhIiwiYm90dG9tRWRnZUNsaWNrSGFuZGxlciIsImNoaWxkcmVuU3RhdGUiLCJoRWRnZUNsaWNrSGFuZGxlciIsIiRoRWRnZSIsInNpYmxpbmdzU3RhdGUiLCJmYW1pbGllcyIsImV4cGFuZFZOb2Rlc0VuZCIsInZOb2RlcyIsImNvbGxhcHNlVk5vZGVzRW5kIiwidG9nZ2xlVk5vZGVzIiwiJHRvZ2dsZUJ0biIsIiRkZXNjV3JhcHBlciIsIiRkZXNjZW5kYW50cyIsIiRjaGlsZHJlbiIsImNyZWF0ZUdob3N0Tm9kZSIsIiRub2RlRGl2Iiwib3JpZ0V2ZW50IiwiaXNGaXJlZm94IiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImdob3N0Tm9kZSIsIm5vZGVDb3ZlciIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50TlMiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInRyYW5zVmFsdWVzIiwic2NhbGUiLCJzZXRBdHRyaWJ1dGUiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJ4T2Zmc2V0Iiwib2Zmc2V0WCIsInlPZmZzZXQiLCJvZmZzZXRZIiwiZ2hvc3ROb2RlV3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJzZXREcmFnSW1hZ2UiLCJmaWx0ZXJBbGxvd2VkRHJvcE5vZGVzIiwiJGRyYWdnZWQiLCIkZHJhZ1pvbmUiLCIkZHJhZ0hpZXIiLCJkcm9wQ3JpdGVyaWEiLCJkcmFnc3RhcnRIYW5kbGVyIiwiZHJhZ292ZXJIYW5kbGVyIiwiZHJvcEVmZmVjdCIsImRyYWdlbmRIYW5kbGVyIiwiZHJvcEhhbmRsZXIiLCIkZHJvcFpvbmUiLCJkcm9wRXZlbnQiLCJkcmFnZ2VkTm9kZSIsImRyYWdab25lIiwiZHJvcFpvbmUiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJkcm9wQ29sc3BhbiIsImhvcml6b250YWxFZGdlcyIsImFkZEJhY2siLCJiZWZvcmUiLCIkZHJvcFNpYnMiLCJhZnRlciIsImRyYWdDb2xzcGFuIiwiJGRyYWdTaWJzIiwiY3JlYXRlTm9kZSIsImxldmVsIiwiY2hpbGQiLCJwYXJlbnRJZCIsImR0ZCIsIkRlZmVycmVkIiwiY2xhc3NOYW1lIiwibm9kZVRlbXBsYXRlIiwibm9kZUNvbnRlbnQiLCJ2ZXJ0aWNhbERlcHRoIiwiTnVtYmVyIiwic3Vic3RyIiwiaWNvbiIsInByZXBlbmQiLCJyZXNvbHZlIiwicHJvbWlzZSIsIiRhcHBlbmRUbyIsImNhbGxiYWNrIiwiJG5vZGVXcmFwcGVyIiwiJGNoaWxkTm9kZXMiLCJoYXNDaGlsZHJlbiIsImlzVmVydGljYWxOb2RlIiwiT2JqZWN0Iiwia2V5cyIsIndoZW4iLCJpc0hpZGRlbiIsImNvbGxhcHNlZCIsImlzVmVydGljYWxMYXllciIsImxpbmVMYXllciIsIiRub2RlTGF5ZXIiLCIkbm9kZUNlbGwiLCJidWlsZENoaWxkTm9kZSIsImNvdW50IiwiYnVpbGRQYXJlbnROb2RlIiwiJGN1cnJlbnRSb290IiwiJHRhYmxlIiwiY29tcGxlbWVudExpbmUiLCIkb25lU2libGluZyIsInNpYmxpbmdDb3VudCIsImV4aXN0aW5nU2libGlnQ291bnQiLCJidWlsZFNpYmxpbmdOb2RlIiwiJG5vZGVDaGFydCIsIm5ld1NpYmxpbmdDb3VudCIsImluc2VydFBvc3Rpb24iLCJmbG9vciIsImNoaWxkQ291bnQiLCIkc2libGluZ1RkcyIsInVud3JhcCIsIm5vZGVDb3VudCIsInJlbW92ZU5vZGVzIiwiJG1hc2siLCJzb3VyY2VDaGFydCIsImh0bWwyY2FudmFzIiwid2lkdGgiLCJjbGllbnRIZWlnaHQiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsIm9uY2xvbmUiLCJjbG9uZURvYyIsIm9ucmVuZGVyZWQiLCJjYW52YXMiLCJkb2MiLCJkb2NXaWR0aCIsImRvY0hlaWdodCIsImpzUERGIiwiYWRkSW1hZ2UiLCJ0b0RhdGFVUkwiLCJzYXZlIiwiaXNXZWJraXQiLCJkb2N1bWVudEVsZW1lbnQiLCJpc0ZmIiwic2lkZWJhciIsImlzRWRnZSIsImFwcE5hbWUiLCJhcHBWZXJzaW9uIiwibXNTYXZlQmxvYiIsIm1zVG9CbG9iIiwic2VsZWN0b3IiLCJ0aGVuIiwiZm4iLCJvcmdjaGFydCJdLCJtYXBwaW5ncyI6IkFBVUEsY0FFQyxTQUFVQSxHQUNhLGlCQUFYQyxRQUFpRCxpQkFBbkJBLE9BQU9DLFFBQzlDRixFQUFRRyxRQUFRLFVBQVdDLE9BQVFDLFVBRW5DTCxFQUFRTSxPQUFRRixPQUFRQyxVQUo1QixDQU1FLFNBQVVFLEVBQUdILEVBQVFDLEVBQVVHLEdBQy9CLElBQUlDLEVBQVcsU0FBVUMsRUFBTUMsR0FDN0JDLEtBQUtDLGdCQUFrQk4sRUFBRUcsR0FDekJFLEtBQUtELEtBQU9BLEVBQ1pDLEtBQUtFLGdCQUNIQyxVQUFhLE9BQ2JDLE9BQVUsS0FDVkMsb0JBQXNCLEVBQ3RCQyxNQUFTLElBQ1RDLFdBQWMsR0FDZEMsY0FBZ0IsRUFDaEJDLGVBQWtCLFdBQ2xCQyxvQkFBdUIsTUFDdkJDLGlCQUFvQixXQUNwQkMsV0FBYSxFQUNiQyxVQUFhLE1BQ2JDLEtBQU8sRUFDUEMsTUFBUSxFQUNSQyxZQUFlLEVBQ2ZDLGFBQWdCLEtBSXBCcEIsRUFBU3FCLFdBRVBDLEtBQU0sU0FBVXBCLEdBQ2QsSUFBSXFCLEVBQU9wQixLQUNYQSxLQUFLcUIsUUFBVTFCLEVBQUUyQixVQUFXdEIsS0FBS0UsZUFBZ0JGLEtBQUtELEtBQU1BLEdBRTVELElBQUlFLEVBQWtCRCxLQUFLQyxnQkFDdkJELEtBQUt1QixRQUNQdkIsS0FBS3VCLE9BQU9DLFNBRWQsSUFBSUMsRUFBT3pCLEtBQUtxQixRQUFRSSxLQUNwQkYsRUFBU3ZCLEtBQUt1QixPQUFTNUIsRUFBRSxTQUMzQjhCLE1BQVVKLFFBQVdyQixLQUFLcUIsU0FDMUJLLE1BQVMsWUFBMEMsS0FBNUIxQixLQUFLcUIsUUFBUWQsV0FBb0IsSUFBTVAsS0FBS3FCLFFBQVFkLFdBQWEsS0FBa0MsUUFBM0JQLEtBQUtxQixRQUFRUixVQUFzQixJQUFNYixLQUFLcUIsUUFBUVIsVUFBWSxJQUNqS2MsTUFBUyxTQUFTQyxHQUNYakMsRUFBRWlDLEVBQU1DLFFBQVFDLFFBQVEsU0FBU0MsUUFDcENSLEVBQU9TLEtBQUssaUJBQWlCQyxZQUFZLGNBNEMvQyxNQXhDZ0Msb0JBQXJCQyxrQkFDVGxDLEtBQUttQyxtQkFFYyxXQUFqQnhDLEVBQUV5QyxLQUFLWCxHQUNMQSxhQUFnQjlCLEVBQ2xCSyxLQUFLcUMsZUFBZWQsRUFBUXZCLEtBQUtzQyxZQUFZYixFQUFLYyxZQUFhLEVBQUd2QyxLQUFLcUIsU0FFdkVyQixLQUFLcUMsZUFBZWQsRUFBUXZCLEtBQUtxQixRQUFRbUIsUUFBVWYsRUFBT3pCLEtBQUt5QyxVQUFVaEIsRUFBTSxNQUFPLEVBQUd6QixLQUFLcUIsVUFHaEdFLEVBQU9tQixPQUFPLHdEQUNkL0MsRUFBRWdELE1BQ0FDLElBQU9uQixFQUNQb0IsU0FBWSxTQUViQyxLQUFLLFNBQVNyQixFQUFNc0IsRUFBWUMsR0FDL0I1QixFQUFLaUIsZUFBZWQsRUFBUUgsRUFBS0MsUUFBUW1CLFFBQVVmLEVBQU9MLEVBQUtxQixVQUFVaEIsRUFBTSxNQUFPLEVBQUdMLEVBQUtDLFdBRS9GNEIsS0FBSyxTQUFTRCxFQUFPRCxFQUFZRyxHQUNoQ0MsUUFBUUMsSUFBSUYsS0FFYkcsT0FBTyxXQUNOOUIsRUFBT2dCLFNBQVMsWUFBWWYsWUFHaEN2QixFQUFnQnlDLE9BQU9uQixHQUduQnZCLEtBQUtxQixRQUFRYixlQUFpQlAsRUFBZ0IrQixLQUFLLGtCQUFrQkQsUUFDdkUvQixLQUFLc0QscUJBR0h0RCxLQUFLcUIsUUFBUVAsS0FDZmQsS0FBS3VELFVBR0h2RCxLQUFLcUIsUUFBUU4sTUFDZmYsS0FBS3dELFdBR0F4RCxNQUdUbUMsaUJBQWtCLFdBQ2hCLElBQUlmLEVBQU9wQixLQUNQeUQsRUFBSyxJQUFJdkIsaUJBQWlCLFNBQVV3QixHQUN0Q0QsRUFBR0UsYUFDSEMsRUFDQSxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUgsRUFBVTNCLE9BQVE4QixJQUNwQyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUosRUFBVUcsR0FBR0UsV0FBV2hDLE9BQVErQixJQUNsRCxHQUFJSixFQUFVRyxHQUFHRSxXQUFXRCxHQUFHRSxVQUFVQyxTQUFTLGFBQzVDN0MsRUFBS0MsUUFBUTZDLGVBQXVELG1CQUEvQjlDLEVBQUtDLFFBQVE2QyxjQUE4QixDQUNsRjlDLEVBQUtDLFFBQVE2QyxjQUFjOUMsRUFBS0csUUFDaEMsSUFBSTRDLEVBQVl4RSxFQUFFeUUsTUFBTSxpQkFDeEJoRCxFQUFLRyxPQUFPOEMsUUFBUUYsR0FDcEIsTUFBTVAsS0FNaEJILEVBQUdhLFFBQVF0RSxLQUFLQyxnQkFBZ0IsSUFBTXNFLFdBQVcsS0FHbkRqQixtQkFBb0IsV0FDbEIsSUFBSWxDLEVBQU9wQixLQUNQd0UsRUFBYTdFLEVBQUUsWUFDakIrQixNQUFTLGlCQUErQyxLQUE1QjFCLEtBQUtxQixRQUFRZCxXQUFvQixJQUFNUCxLQUFLcUIsUUFBUWQsV0FBYSxJQUM3RmtFLEtBQVEsU0FDUjlDLE1BQVMsU0FBUytDLEdBQ2hCQSxFQUFFQyxpQkFDRnZELEVBQUt3RCxZQUdUNUUsS0FBS0MsZ0JBQWdCeUMsT0FBTzhCLElBRTlCSyxXQUFZLFNBQVU5RSxFQUFNK0UsR0FzQzFCLE1BckNvQixpQkFBVC9FLElBQ0ksUUFBVEEsSUFDRStFLEVBQ0Y5RSxLQUFLdUQsVUFFTHZELEtBQUsrRSxhQUdJLFNBQVRoRixJQUNFK0UsRUFDRjlFLEtBQUt3RCxXQUVMeEQsS0FBS2dGLGVBSVMsaUJBQVRqRixJQUNMQSxFQUFLMEIsS0FDUHpCLEtBQUttQixLQUFLcEIsU0FFYyxJQUFiQSxFQUFLZSxNQUNWZixFQUFLZSxJQUNQZCxLQUFLdUQsVUFFTHZELEtBQUsrRSxrQkFHZ0IsSUFBZGhGLEVBQUtnQixPQUNWaEIsRUFBS2dCLEtBQ1BmLEtBQUt3RCxXQUVMeEQsS0FBS2dGLGdCQU1OaEYsTUFHVGlGLGdCQUFpQixTQUFVUCxHQUN6QixJQUFJbkQsRUFBUzVCLEVBQUUrRSxFQUFFUSxnQkFDakIsR0FBSXZGLEVBQUUrRSxFQUFFN0MsUUFBUUMsUUFBUSxTQUFTQyxRQUFXMkMsRUFBRVMsU0FBV1QsRUFBRVMsUUFBUXBELE9BQVMsRUFDMUVSLEVBQU9FLEtBQUssV0FBVyxPQUR6QixDQUlFRixFQUFPNkQsSUFBSSxTQUFVLFFBQVEzRCxLQUFLLFdBQVcsR0FFL0MsSUFBSTRELEVBQVEsRUFDUkMsRUFBUSxFQUNSQyxFQUFTaEUsRUFBTzZELElBQUksYUFDeEIsR0FBZSxTQUFYRyxFQUFtQixDQUNyQixJQUFJQyxFQUFPRCxFQUFPRSxNQUFNLE1BQ00sSUFBMUJGLEVBQU9HLFFBQVEsT0FDakJMLEVBQVFNLFNBQVNILEVBQUssSUFDdEJGLEVBQVFLLFNBQVNILEVBQUssTUFFdEJILEVBQVFNLFNBQVNILEVBQUssS0FDdEJGLEVBQVFLLFNBQVNILEVBQUssTUFHMUIsSUFBSUksRUFBUyxFQUNUQyxFQUFTLEVBQ2IsR0FBS25CLEVBQUVvQixlQUdBLEdBQStCLElBQTNCcEIsRUFBRW9CLGNBQWMvRCxPQUN6QjZELEVBQVNsQixFQUFFb0IsY0FBYyxHQUFHQyxNQUFRVixFQUNwQ1EsRUFBU25CLEVBQUVvQixjQUFjLEdBQUdFLE1BQVFWLE9BQy9CLEdBQUlaLEVBQUVvQixjQUFjL0QsT0FBUyxFQUNsQyxZQU5BNkQsRUFBU2xCLEVBQUVxQixNQUFRVixFQUNuQlEsRUFBU25CLEVBQUVzQixNQUFRVixFQU9yQi9ELEVBQU8wRSxHQUFHLHNCQUFzQixTQUFTdkIsR0FDdkMsR0FBS25ELEVBQU9FLEtBQUssV0FBakIsQ0FHQSxJQUFJeUUsRUFBTyxFQUNQQyxFQUFPLEVBQ1gsR0FBS3pCLEVBQUVvQixlQUdBLEdBQStCLElBQTNCcEIsRUFBRW9CLGNBQWMvRCxPQUN6Qm1FLEVBQU94QixFQUFFb0IsY0FBYyxHQUFHQyxNQUFRSCxFQUNsQ08sRUFBT3pCLEVBQUVvQixjQUFjLEdBQUdFLE1BQVFILE9BQzdCLEdBQUluQixFQUFFb0IsY0FBYy9ELE9BQVMsRUFDbEMsWUFOQW1FLEVBQU94QixFQUFFcUIsTUFBUUgsRUFDakJPLEVBQU96QixFQUFFc0IsTUFBUUgsRUFPbkIsSUFBSU4sRUFBU2hFLEVBQU82RCxJQUFJLGFBQ3hCLEdBQWUsU0FBWEcsR0FDNEIsSUFBMUJBLEVBQU9HLFFBQVEsTUFDakJuRSxFQUFPNkQsSUFBSSxZQUFhLHNCQUF3QmMsRUFBTyxLQUFPQyxFQUFPLEtBRXJFNUUsRUFBTzZELElBQUksWUFBYSxnREFBa0RjLEVBQU8sS0FBT0MsRUFBTyxlQUU1RixDQUNMLElBQUlDLEVBQVNiLEVBQU9FLE1BQU0sTUFDSSxJQUExQkYsRUFBT0csUUFBUSxPQUNqQlUsRUFBTyxHQUFLLElBQU1GLEVBQ2xCRSxFQUFPLEdBQUssSUFBTUQsRUFBTyxNQUV6QkMsRUFBTyxJQUFNLElBQU1GLEVBQ25CRSxFQUFPLElBQU0sSUFBTUQsR0FFckI1RSxFQUFPNkQsSUFBSSxZQUFhZ0IsRUFBT0MsS0FBSyxZQUsxQ0MsY0FBZSxTQUFVNUIsR0FDbkJBLEVBQUVqRCxLQUFLOEUsTUFBTTlFLEtBQUssWUFDcEJpRCxFQUFFakQsS0FBSzhFLE1BQU05RSxLQUFLLFdBQVcsR0FBTzJELElBQUksU0FBVSxXQUFXb0IsSUFBSSxjQUlyRWpELFFBQVMsV0FDUHZELEtBQUtDLGdCQUFnQm1GLElBQUksV0FBWSxVQUNyQ3BGLEtBQUt1QixPQUFPMEUsR0FBRyx1QkFBd0JqRyxLQUFLaUYsaUJBQzVDdEYsRUFBRUYsR0FBVXdHLEdBQUcsb0JBQXNCTSxNQUFTdkcsS0FBS3VCLFFBQVV2QixLQUFLc0csZ0JBR3BFdkIsVUFBVyxXQUNUL0UsS0FBS0MsZ0JBQWdCbUYsSUFBSSxXQUFZLFFBQ3JDcEYsS0FBS3VCLE9BQU9pRixJQUFJLHVCQUF3QnhHLEtBQUtpRixpQkFDN0N0RixFQUFFRixHQUFVK0csSUFBSSxtQkFBb0J4RyxLQUFLc0csZ0JBRzNDRyxpQkFBa0IsU0FBVS9CLEdBQzFCLElBQUlnQyxFQUFLaEMsRUFBRWpELEtBQUtpRixHQUNoQmhDLEVBQUVDLGlCQUNGLElBQUlnQyxFQUFZLEdBQUtqQyxFQUFFa0MsY0FBY0MsT0FBUyxHQUFLLEdBQU0sSUFDekRILEVBQUdJLGNBQWNKLEVBQUduRixPQUFRb0YsSUFHOUJJLGlCQUFrQixTQUFVckMsR0FDMUIsR0FBR0EsRUFBRVMsU0FBZ0MsSUFBckJULEVBQUVTLFFBQVFwRCxPQUFjLENBQ3RDLElBQUkyRSxFQUFLaEMsRUFBRWpELEtBQUtpRixHQUNoQkEsRUFBR25GLE9BQU9FLEtBQUssWUFBWSxHQUMzQixJQUFJdUYsRUFBT04sRUFBR08sYUFBYXZDLEdBQzNCZ0MsRUFBR25GLE9BQU9FLEtBQUssaUJBQWtCdUYsS0FHckNFLGVBQWdCLFNBQVV4QyxHQUN4QixJQUFJZ0MsRUFBS2hDLEVBQUVqRCxLQUFLaUYsR0FDaEIsR0FBR0EsRUFBR25GLE9BQU9FLEtBQUssWUFBYSxDQUM3QixJQUFJdUYsRUFBT04sRUFBR08sYUFBYXZDLEdBQzNCZ0MsRUFBR25GLE9BQU9FLEtBQUssZUFBZ0J1RixLQUduQ0csZUFBZ0IsU0FBVXpDLEdBQ3hCLElBQUlnQyxFQUFLaEMsRUFBRWpELEtBQUtpRixHQUNoQixHQUFHQSxFQUFHbkYsT0FBT0UsS0FBSyxZQUFhLENBQzdCaUYsRUFBR25GLE9BQU9FLEtBQUssWUFBWSxHQUMzQixJQUFJMkYsRUFBT1YsRUFBR25GLE9BQU9FLEtBQUssZ0JBQWtCaUYsRUFBR25GLE9BQU9FLEtBQUssa0JBQ3ZEMkYsRUFBTyxFQUNUVixFQUFHSSxjQUFjSixFQUFHbkYsT0FBUSxLQUNuQjZGLEVBQU8sR0FDaEJWLEVBQUdJLGNBQWNKLEVBQUduRixPQUFRLE1BS2xDaUMsU0FBVSxXQUNSeEQsS0FBS0MsZ0JBQWdCZ0csR0FBRyxTQUFXUyxHQUFNMUcsTUFBUUEsS0FBS3lHLGtCQUN0RHpHLEtBQUtDLGdCQUFnQmdHLEdBQUcsY0FBZ0JTLEdBQU0xRyxNQUFRQSxLQUFLK0csa0JBQzNEcEgsRUFBRUYsR0FBVXdHLEdBQUcsYUFBZVMsR0FBTTFHLE1BQVFBLEtBQUtrSCxnQkFDakR2SCxFQUFFRixHQUFVd0csR0FBRyxZQUFjUyxHQUFNMUcsTUFBUUEsS0FBS21ILGlCQUVsRG5DLFdBQVksV0FDVmhGLEtBQUtDLGdCQUFnQnVHLElBQUksUUFBU3hHLEtBQUt5RyxrQkFDdkN6RyxLQUFLQyxnQkFBZ0J1RyxJQUFJLGFBQWN4RyxLQUFLK0csa0JBQzVDcEgsRUFBRUYsR0FBVStHLElBQUksWUFBYXhHLEtBQUtrSCxnQkFDbEN2SCxFQUFFRixHQUFVK0csSUFBSSxXQUFZeEcsS0FBS21ILGlCQUduQ0YsYUFBYyxTQUFVdkMsR0FDdEIsT0FBTzJDLEtBQUtDLE1BQU01QyxFQUFFUyxRQUFRLEdBQUdvQyxRQUFVN0MsRUFBRVMsUUFBUSxHQUFHb0MsVUFBWTdDLEVBQUVTLFFBQVEsR0FBR29DLFFBQVU3QyxFQUFFUyxRQUFRLEdBQUdvQyxVQUNyRzdDLEVBQUVTLFFBQVEsR0FBR3FDLFFBQVU5QyxFQUFFUyxRQUFRLEdBQUdxQyxVQUFZOUMsRUFBRVMsUUFBUSxHQUFHcUMsUUFBVTlDLEVBQUVTLFFBQVEsR0FBR3FDLFdBR3ZGVixjQUFlLFNBQVV2RixFQUFRb0YsR0FDL0IsSUFBSTVHLEVBQU93QixFQUFPRSxLQUFLLFdBQ25COEQsRUFBU2hFLEVBQU82RCxJQUFJLGFBQ3BCZ0IsRUFBUyxHQUNUcUIsRUFBYyxFQUNILFNBQVhsQyxFQUNGaEUsRUFBTzZELElBQUksWUFBYSxTQUFXdUIsRUFBVyxJQUFNQSxFQUFXLE1BRS9EUCxFQUFTYixFQUFPRSxNQUFNLE1BQ1EsSUFBMUJGLEVBQU9HLFFBQVEsT0FDakIrQixFQUFjSixLQUFLSyxJQUFJbEksRUFBT21JLFdBQVd2QixFQUFPLElBQU1PLElBQ3BDNUcsRUFBS2tCLGNBQWdCd0csRUFBYzFILEVBQUtpQixhQUN4RE8sRUFBTzZELElBQUksWUFBYUcsRUFBUyxVQUFZb0IsRUFBVyxJQUFNQSxFQUFXLE1BRzNFYyxFQUFjSixLQUFLSyxJQUFJbEksRUFBT21JLFdBQVd2QixFQUFPLElBQU1PLElBQ3BDNUcsRUFBS2tCLGNBQWdCd0csRUFBYzFILEVBQUtpQixhQUN4RE8sRUFBTzZELElBQUksWUFBYUcsRUFBUyxZQUFjb0IsRUFBVyxJQUFNQSxFQUFXLFVBTW5GckUsWUFBYSxTQUFVc0YsR0FDckIsSUFBSXhHLEVBQU9wQixLQUNQNkgsR0FDRkMsS0FBUUYsRUFBSUcsV0FBV0MsR0FBRyxHQUFHdkQsT0FBT3dELE9BQ3BDQyxjQUFpQk4sRUFBSU8sU0FBU0EsU0FBU0MsR0FBRyxNQUFRLElBQUssTUFBUVIsRUFBSVMsU0FBUyxNQUFNdEcsT0FBUyxFQUFHLElBQU02RixFQUFJckYsU0FBUyxNQUFNUixPQUFTLEVBQUksSUFTdEksT0FQSTZGLEVBQUlVLEtBQUssYUFDWFQsRUFBT1UsR0FBS1gsRUFBSVUsS0FBSyxZQUV2QlYsRUFBSXJGLFNBQVMsTUFBTUEsV0FBV2lHLEtBQUssV0FDNUJYLEVBQU90RixXQUFZc0YsRUFBT3RGLGFBQy9Cc0YsRUFBT3RGLFNBQVNrRyxLQUFLckgsRUFBS2tCLFlBQVkzQyxFQUFFSyxVQUVuQzZILEdBR1RwRixVQUFXLFNBQVVoQixFQUFNaUgsR0FDekIsSUFBSXRILEVBQU9wQixLQU9YLE9BTkF5QixFQUFLeUcsYUFBZVEsR0FBU2pILEVBQUtjLFVBQVlkLEVBQUtjLFNBQVNSLE9BQVMsRUFBSSxFQUFJLEdBQ3pFTixFQUFLYyxVQUNQZCxFQUFLYyxTQUFTb0csUUFBUSxTQUFTQyxHQUM3QnhILEVBQUtxQixVQUFVbUcsRUFBTSxLQUFPbkgsRUFBS2MsU0FBU1IsT0FBUyxFQUFJLEVBQUksTUFHeEROLEdBR1RvSCxVQUFXLFNBQVV0SCxHQUNuQixJQUFJSCxFQUFPcEIsS0FDUDhJLEVBQU12SCxFQUFPUyxLQUFLLFlBQ2xCNkYsR0FBV1UsR0FBTU8sRUFBSTlHLEtBQUssU0FBUyxHQUFHdUcsSUFLMUMsT0FKQU8sRUFBSVQsU0FBUyxTQUFTOUYsV0FBV2lHLEtBQUssV0FDL0JYLEVBQU90RixXQUFZc0YsRUFBT3RGLGFBQy9Cc0YsRUFBT3RGLFNBQVNrRyxLQUFLckgsRUFBS3lILFVBQVVsSixFQUFFSyxVQUVqQzZILEdBR1RrQixhQUFjLFdBQ1osUUFBMkIsSUFBaEIvSSxLQUFLdUIsT0FDZCxNQUFPLGlDQUVQLElBQUt2QixLQUFLdUIsT0FBT1MsS0FBSyxTQUFTRCxPQUM3QixNQUFPLDRCQUVQLElBQUlpSCxHQUFRLEVBT1osT0FOQWhKLEtBQUt1QixPQUFPUyxLQUFLLFNBQVN3RyxLQUFLLFdBQzdCLElBQUt4SSxLQUFLdUksR0FFUixPQURBUyxHQUFRLEdBQ0QsSUFHTkEsRUFLRmhKLEtBQUs2SSxVQUFVN0ksS0FBS3VCLFFBSmQsNEVBT2YwSCxhQUFjLFNBQVVDLEVBQU9DLEdBQzdCLElBQUlDLEtBRUosR0FBaUIsWUFEYkQsRUFBV0EsR0FBWSxTQUd6QixJQURBQyxFQUFVRixFQUFNcEgsUUFBUSxVQUFVdUcsU0FBUyxXQUMvQnRHLE9BQ1YsT0FBSXFILEVBQVFoQixHQUFHLGFBQWdCZ0IsRUFBUWhCLEdBQUcsWUFBY2dCLEVBQVF0SCxRQUFRLFVBQVVzRyxHQUFHLFlBQzFFaUIsT0FBUyxFQUFNQyxTQUFXLElBRTVCRCxPQUFTLEVBQU1DLFNBQVcsUUFFaEMsR0FBaUIsYUFBYkgsR0FFVCxJQURBQyxFQUFVRixFQUFNcEgsUUFBUSxNQUFNdUcsU0FBUyxVQUMzQnRHLE9BQ1YsT0FBS3FILEVBQVFoQixHQUFHLFlBR1BpQixPQUFTLEVBQU1DLFNBQVcsSUFGeEJELE9BQVMsRUFBTUMsU0FBVyxRQUlsQyxHQUFpQixhQUFiSCxHQUVULElBREFDLEVBQVVGLEVBQU1wSCxRQUFRLFNBQVNxRyxTQUFTRSxZQUM5QnRHLE9BQ1YsT0FBS3FILEVBQVFoQixHQUFHLFlBQWVnQixFQUFRakIsU0FBU0MsR0FBRyxZQUcxQ2lCLE9BQVMsRUFBTUMsU0FBVyxJQUZ4QkQsT0FBUyxFQUFNQyxTQUFXLFFBTXZDLElBREFGLEVBQVVGLEdBQ0VuSCxPQUNWLE9BQU9xSCxFQUFRdEgsUUFBUSxVQUFVQyxRQUFVcUgsRUFBUXRILFFBQVEsVUFBVXNHLEdBQUcsWUFDckVnQixFQUFRdEgsUUFBUSxTQUFTcUcsU0FBU3BHLFFBQVVxSCxFQUFRdEgsUUFBUSxTQUFTcUcsU0FBU0MsR0FBRyxZQUNqRmdCLEVBQVFqQixTQUFTQyxHQUFHLFFBQVVnQixFQUFRdEgsUUFBUSxNQUFNc0csR0FBRyxZQUFjZ0IsRUFBUXRILFFBQVEsaUJBQWlCc0csR0FBRyxhQUluR2lCLE9BQVMsRUFBTUMsU0FBVyxJQUZ4QkQsT0FBUyxFQUFNQyxTQUFXLEdBS3pDLE9BQVNELE9BQVMsRUFBT0MsU0FBVyxJQUd0Q0MsZ0JBQWlCLFNBQVVMLEVBQU9DLEdBQ2hDLE9BQUtELEdBQVdBLGFBQWlCdkosR0FBT3VKLEVBQU1kLEdBQUcsU0FHaEMsV0FBYmUsRUFDS0QsRUFBTXBILFFBQVEsVUFBVXFHLFNBQVM1RixTQUFTLFVBQVVQLEtBQUssU0FDMUMsYUFBYm1ILEVBQ0ZELEVBQU1wSCxRQUFRLE1BQU11RyxTQUFTLFVBQVU5RixXQUFXUCxLQUFLLGVBQ3hDLGFBQWJtSCxFQUNGRCxFQUFNcEgsUUFBUSxTQUFTcUcsU0FBU0UsV0FBV3JHLEtBQUssZUFFaERyQyxJQVRBQSxLQVlYNkosY0FBZSxTQUFVNUgsR0FDdkJqQyxFQUFFaUMsRUFBTUMsUUFBUUksWUFBWSxXQUM1QkwsRUFBTUgsS0FBS2dJLFdBQVdDLFNBQVMsVUFBVUMsTUFBTSxHQUFHQyxXQUFXLFVBRy9EQyxXQUFZLFNBQVVYLEdBQ3BCLElBQUlZLEVBQWNaLEVBQU1wSCxRQUFRLFVBQVV1RyxXQUN0Q3lCLEVBQVk5QixHQUFHLEdBQUdoRyxLQUFLLFlBQVlELFFBQ3JDbUgsRUFBTXBILFFBQVEsYUFBYUwsS0FBSyxVQUFVLEdBR3hDekIsS0FBS2lKLGFBQWFDLEVBQU8sWUFBWUksU0FDdkN0SixLQUFLK0osYUFBYWIsR0FHUFksRUFBWUgsTUFBTSxHQUN4QnZFLElBQUksYUFBYyxVQUV6QixJQUFJNEUsRUFBVUYsRUFBWTlCLEdBQUcsR0FBR2hHLEtBQUssU0FDakNoQyxLQUFLaUosYUFBYWUsR0FBU1YsU0FDN0JVLEVBQVFOLFNBQVMsc0JBQXNCTyxJQUFJLGlCQUFtQlIsV0FBY0ssR0FBZTlKLEtBQUt3SixlQUc5RnhKLEtBQUtpSixhQUFhZSxFQUFTLFVBQVVWLFNBQ3ZDdEosS0FBSzZKLFdBQVdHLElBR3BCRSxjQUFlLFNBQVV0SSxHQUN2QixJQUFJc0gsRUFBUXRILEVBQU1ILEtBQUswSSxLQUN2QnhLLEVBQUVpQyxFQUFNQyxRQUFRSSxZQUFZLFdBQ3hCakMsS0FBS29LLFdBQVdsQixJQUNsQmxKLEtBQUtxSyxvQkFBb0JuQixFQUFNM0csU0FBUyxjQUk1QytILFdBQVksU0FBVXBCLEdBRXBCLElBQUlZLEVBQWNaLEVBQU1wSCxRQUFRLFVBQVV1RyxXQUFXcEcsWUFBWSxVQUVqRTZILEVBQVk5QixHQUFHLEdBQUd6RixXQUFXb0gsTUFBTSxHQUFJLEdBQUdELFNBQVMsVUFFbkQsSUFBSU0sRUFBVUYsRUFBWTlCLEdBQUcsR0FBR2hHLEtBQUssU0FDckNoQyxLQUFLdUssUUFBUVAsRUFBUSxJQUNyQkEsRUFBUU4sU0FBUyxXQUFXekgsWUFBWSxjQUFjZ0ksSUFBSSxpQkFBbUJFLEtBQVFqQixHQUFTbEosS0FBS2tLLGNBQWNNLEtBQUt4SyxRQUV4SHlLLFNBQVUsU0FBVUMsR0FDZEEsRUFBVzFJLEtBQUssWUFBWUQsUUFDOUIySSxFQUFXNUksUUFBUSxhQUFhTCxLQUFLLFVBQVUsSUFHbkRrSixjQUFlLFNBQVVDLEVBQU85SyxHQUM5QixPQUFPRSxLQUFLaUosYUFBYXRKLEVBQUVHLElBQU93SixTQUdwQ3VCLGdCQUFpQixTQUFVakosR0FDekJBLEVBQU1ILEtBQUtxSixjQUFjN0ksWUFBWSxXQUNqQ0wsRUFBTUgsS0FBS3NKLGVBQ2JuSixFQUFNSCxLQUFLdUosV0FBV3RCLFNBQVMsV0FFL0I5SCxFQUFNSCxLQUFLcUosY0FBY2hKLFFBQVEsU0FBU0EsUUFBUSxNQUFNbUosUUFBUSxVQUFVckIsV0FBVyxTQUFTRixTQUFTLFVBQ3BHckIsU0FBUyxVQUFVcUIsU0FBUyxVQUMvQjlILEVBQU1ILEtBQUt1SixXQUFXRSxPQUFPbEosS0FBSyxrQkFBa0IwSCxTQUFTLFdBRTNEMUosS0FBS29LLFdBQVd4SSxFQUFNSCxLQUFLMEksT0FDN0JuSyxLQUFLcUssb0JBQW9CekksRUFBTUgsS0FBSzBJLEtBQUs1SCxTQUFTLGlCQUl0RDRJLGFBQWMsU0FBVWpDLEdBQ3RCLElBQUlrQyxFQUFjbEMsRUFBTXBILFFBQVEsTUFBTXVHLFdBQ3RDckksS0FBS3lLLFNBQVNXLEVBQVlGLFFBQzFCLElBQUlHLEVBQWlCRCxFQUFZRixPQUFPbEosS0FBSyxTQUFTc0osT0FBT3RMLEtBQUsySyxjQUFjSCxLQUFLeEssT0FDakYrSyxJQUFpQkssRUFBWUYsT0FBTzlDLEdBQUcsa0JBQ3RDMkMsR0FDSE0sRUFBZXZKLFFBQVEsU0FBU0EsUUFBUSxNQUFNbUosUUFBUSxVQUFVN0YsSUFBSSxhQUFjLFVBRXBGcEYsS0FBS3VLLFFBQVFjLEVBQWVFLElBQUksSUFDaENGLEVBQWUzQixTQUFTLG9CQUFvQjFCLEdBQUcsR0FBR2lDLElBQUksaUJBQW1CYSxjQUFpQk8sRUFBZ0JMLFdBQWNJLEVBQWFMLGVBQWtCQSxFQUFnQlosS0FBUWpCLEdBQVNsSixLQUFLNkssZ0JBQWdCTCxLQUFLeEssUUFHcE53TCxnQkFBaUIsU0FBVTVKLEdBQ3pCLElBQUlzSCxFQUFRdEgsRUFBTUgsS0FBSzBJLEtBQ3ZCdkksRUFBTUgsS0FBS3FKLGNBQWM3SSxZQUFZLFdBQ2pDakMsS0FBS29LLFdBQVdsQixJQUNsQmxKLEtBQUtxSyxvQkFBb0JuQixFQUFNM0csU0FBUyxpQkFJNUNrSixhQUFjLFNBQVV2QyxHQUN0QixJQUNJd0MsRUFBVXhDLEVBQU1wSCxRQUFRLE1BQU11RyxXQUU5QmdELElBRGlCSyxFQUFRdEQsR0FBRyxrQkFFNUJzRCxFQUFRekosWUFBWSxVQUFVRCxLQUFLLFNBQVNzSixPQUFPdEwsS0FBSzJLLGNBQWNILEtBQUt4SyxPQUMzRTBMLEVBQVF6SixZQUFZLFVBQVUrRixHQUFHLEdBQUd6RixXQUFXUCxLQUFLLGVBQWVzSixPQUFPdEwsS0FBSzJLLGNBQWNILEtBQUt4SyxPQUV0R0EsS0FBS3VLLFFBQVFjLEVBQWVFLElBQUksSUFDaENGLEVBQWUzQixTQUFTLFdBQVd6SCxZQUFZLFlBQVkrRixHQUFHLEdBQUdpQyxJQUFJLGlCQUFtQkUsS0FBUWpCLEVBQU80QixjQUFpQk8sR0FBa0JyTCxLQUFLd0wsZ0JBQWdCaEIsS0FBS3hLLFFBR3RLMkwsZ0JBQWlCLFNBQVUvSixHQUN6QixJQUFJc0gsRUFBUXRILEVBQU1ILEtBQUswSSxLQUNuQnlCLEVBQWlCaEssRUFBTUgsS0FBS29LLGNBQzVCaEwsRUFBWWUsRUFBTUgsS0FBS1osVUFDM0JlLEVBQU1ILEtBQUtxSyxNQUFNbEMsV0FBVyxTQUM1QixJQUFJbUMsRUFBWWxMLEVBQTJCLFNBQWRBLEVBQXVCK0ssRUFBZVgsUUFBUSxpQkFBbUJXLEVBQWVJLFFBQVEsaUJBQW9CSixFQUFldkQsV0FDeEp1RCxFQUFlOUosUUFBUSxVQUFVbUssT0FBTzFKLFNBQVMsaUJBQzlDb0gsTUFBTSxFQUFHOUksRUFBK0IsRUFBbkJrTCxFQUFVaEssT0FBYSxHQUFLLEdBQUcySCxTQUFTLFVBQ2hFOUgsRUFBTUgsS0FBS3FKLGNBQWM3SSxZQUFZLFdBQ3JDOEosRUFBVS9KLEtBQUssZUFBZXNKLE9BQU90TCxLQUFLMkssY0FBY0gsS0FBS3hLLE9BQzFEaUMsWUFBWSwwQkFBMEJ5SCxTQUFTLFlBQ2xEcUMsRUFBVS9KLEtBQUssa0NBQWtDMEgsU0FBUyxVQUN2RHdDLE1BQU14QyxTQUFTLFVBRWQxSixLQUFLb0ssV0FBV2xCLElBQ2xCbEosS0FBS21NLHNCQUFzQmpELElBSS9CYSxhQUFjLFNBQVViLEVBQU9ySSxHQUM3QixJQUNJK0ssRUFBaUIxQyxFQUFNcEgsUUFBUSxTQUFTcUcsU0FDeEN5RCxFQUFldkQsV0FBV3JHLEtBQUssWUFBWUQsUUFDN0NtSCxFQUFNcEgsUUFBUSxhQUFhTCxLQUFLLFVBQVUsR0FFeENaLEVBQ2dCLFNBQWRBLEVBQ0YrSyxFQUFlWCxVQUFVakosS0FBSyxTQUFTc0osT0FBT3RMLEtBQUsySyxjQUFjSCxLQUFLeEssT0FBTzBKLFNBQVMsdUJBRXRGa0MsRUFBZUksVUFBVWhLLEtBQUssU0FBU3NKLE9BQU90TCxLQUFLMkssY0FBY0gsS0FBS3hLLE9BQU8wSixTQUFTLHVCQUd4RmtDLEVBQWVYLFVBQVVqSixLQUFLLFNBQVNzSixPQUFPdEwsS0FBSzJLLGNBQWNILEtBQUt4SyxPQUFPMEosU0FBUyx1QkFDdEZrQyxFQUFlSSxVQUFVaEssS0FBSyxTQUFTc0osT0FBT3RMLEtBQUsySyxjQUFjSCxLQUFLeEssT0FBTzBKLFNBQVMsdUJBRXhGLElBQUkyQixFQUFpQk8sRUFBZXZELFdBQVdyRyxLQUFLLFlBQ2hEb0ssRUFBU2YsRUFBZXZKLFFBQVEsVUFBVW1KLFFBQVEsVUFBVTdGLElBQUksYUFBYyxVQUNsRmlHLEVBQWVyRCxHQUFHLEdBQUdpQyxJQUFJLGlCQUFtQkUsS0FBUWpCLEVBQU8yQyxjQUFpQkQsRUFBZ0IvSyxVQUFhQSxFQUFXaUssY0FBaUJPLEVBQWdCUyxNQUFTTSxHQUFVcE0sS0FBSzJMLGdCQUFnQm5CLEtBQUt4SyxRQUdwTXFNLGdCQUFpQixTQUFVekssR0FDekIsSUFBSXNILEVBQVF0SCxFQUFNSCxLQUFLMEksS0FDdkJ2SSxFQUFNSCxLQUFLNkssYUFBYXJLLFlBQVksV0FDaENqQyxLQUFLb0ssV0FBV2xCLEtBQ2xCbEosS0FBS21NLHNCQUFzQmpELEdBQzNCQSxFQUFNM0csU0FBUyxZQUFZTixZQUFZLGlCQUFpQnlILFNBQVMscUJBSXJFNkMscUJBQXNCLFNBQVMzSyxHQUM3QmpDLEVBQUVpQyxFQUFNQyxRQUFRSSxZQUFZLFlBRzlCdUssYUFBYyxTQUFVdEQsRUFBT3JJLEdBQzdCLElBRUlrTCxFQUFZcE0sSUFHWm9NLEVBRkFsTCxFQUNnQixTQUFkQSxFQUNVcUksRUFBTXBILFFBQVEsU0FBU3FHLFNBQVM4QyxVQUFVaEosWUFBWSxVQUV0RGlILEVBQU1wSCxRQUFRLFNBQVNxRyxTQUFTNkQsVUFBVS9KLFlBQVksVUFHeERpSCxFQUFNcEgsUUFBUSxTQUFTcUcsU0FBU0UsV0FBV3BHLFlBQVksVUFHckUsSUFBSTZILEVBQWNaLEVBQU1wSCxRQUFRLFNBQVNBLFFBQVEsTUFBTXVHLFdBT3ZELEdBTkl4SCxFQUNGaUosRUFBWTlCLEdBQUcsR0FBR3pGLFNBQVMsV0FBV29ILE1BQU0sRUFBc0IsRUFBbkJvQyxFQUFVaEssUUFBWUUsWUFBWSxVQUVqRjZILEVBQVk5QixHQUFHLEdBQUd6RixTQUFTLFdBQVdOLFlBQVksV0FHL0NqQyxLQUFLaUosYUFBYUMsRUFBTyxVQUFVSSxRQUFTLENBQy9DUSxFQUFZN0gsWUFBWSxVQUN4QixJQUFJa0csRUFBUzJCLEVBQVk5SCxLQUFLLFNBQVMsR0FDdkNoQyxLQUFLdUssUUFBUXBDLEdBQ2J4SSxFQUFFd0ksR0FBUXVCLFNBQVMsV0FBV3pILFlBQVksY0FBY2dJLElBQUksZ0JBQWlCakssS0FBS3VNLHNCQUdwRixJQUFJRSxFQUFnQlYsRUFBVS9KLEtBQUssU0FBU3NKLE9BQU90TCxLQUFLMkssY0FBY0gsS0FBS3hLLE9BQzNFQSxLQUFLdUssUUFBUWtDLEVBQWNsQixJQUFJLElBQy9Ca0IsRUFBYy9DLFNBQVMsV0FBV3pILFlBQVksMEJBQzlDd0ssRUFBY3pFLEdBQUcsR0FBR2lDLElBQUksaUJBQW1CRSxLQUFRakIsRUFBT29ELGFBQWdCRyxHQUFpQnpNLEtBQUtxTSxnQkFBZ0I3QixLQUFLeEssUUFHdkgwTSxhQUFjLFNBQVVDLEdBQ3RCLElBQUlwTCxFQUFTdkIsS0FBS3VCLE9BQ2xCLFlBQXFDLElBQTFCQSxFQUFPRSxLQUFLLFlBQXVELElBQTFCRixFQUFPRSxLQUFLLGFBSWhFa0wsRUFBTWpELFNBQVMsVUFDZmlELEVBQU14RSxTQUFTekYsT0FBTyx3REFDbkJILFdBQVdxSyxJQUFJLFlBQVl4SCxJQUFJLFVBQVcsSUFDN0M3RCxFQUFPRSxLQUFLLFVBQVUsR0FDdEI5QixFQUFFLGtCQUFnRCxLQUE1QkssS0FBS3FCLFFBQVFkLFdBQW9CLElBQU1QLEtBQUtxQixRQUFRZCxXQUFhLEtBQUtzTSxLQUFLLFlBQVksSUFDdEcsSUFHVEMsV0FBWSxTQUFVSCxHQUNwQixJQUFJekQsRUFBUXlELEVBQU14RSxTQUNsQndFLEVBQU0xSyxZQUFZLFVBQ2xCaUgsRUFBTWxILEtBQUssWUFBWVIsU0FDdkIwSCxFQUFNM0csV0FBV3FILFdBQVcsU0FDNUI1SixLQUFLdUIsT0FBT0UsS0FBSyxVQUFVLEdBQzNCOUIsRUFBRSxrQkFBZ0QsS0FBNUJLLEtBQUtxQixRQUFRZCxXQUFvQixJQUFNUCxLQUFLcUIsUUFBUWQsV0FBYSxLQUFLc00sS0FBSyxZQUFZLElBRy9HekMsV0FBWSxTQUFVbEIsR0FDcEIsT0FBT0EsRUFBTTNHLFNBQVMsU0FBUytGLEtBQUssU0FBUzVDLFFBQVEsUUFBVSxHQUdqRTJFLG9CQUFxQixTQUFVMEMsR0FDN0JBLEVBQU9DLFlBQVksaUJBQWlCQSxZQUFZLG9CQUdsRGIsc0JBQXVCLFNBQVVqRCxHQUMvQixJQUFJbkosRUFBT21KLEVBQU1wSCxRQUFRLGFBQWFMLEtBQUssV0FDM0MsR0FBSTFCLEVBQUtNLDBCQUErQyxJQUFqQk4sRUFBS3lDLFNBQTJCMEcsRUFBTXBILFFBQVEsVUFBVUwsS0FBSyxtQkFBb0IsQ0FDdEgsSUFBSXdMLEVBQVcvRCxFQUFNcEgsUUFBUSxTQUFTcUcsU0FBUzhELE9BQzNDZ0IsRUFBU2xMLFNBQ1BrTCxFQUFTN0UsR0FBRyxXQUNkYyxFQUFNM0csU0FBUyxhQUFhbUgsU0FBUyxtQkFBbUJ6SCxZQUFZLG9CQUVwRWlILEVBQU0zRyxTQUFTLGFBQWFtSCxTQUFTLG9CQUFvQnpILFlBQVksb0JBR3pFLElBQUlpTCxFQUFXaEUsRUFBTXBILFFBQVEsU0FBU3FHLFNBQVNnRixPQUMzQ0QsRUFBU25MLFNBQ1BtTCxFQUFTOUUsR0FBRyxXQUNkYyxFQUFNM0csU0FBUyxjQUFjbUgsU0FBUyxvQkFBb0J6SCxZQUFZLG1CQUV0RWlILEVBQU0zRyxTQUFTLGNBQWNtSCxTQUFTLG1CQUFtQnpILFlBQVkseUJBR3BFLENBQ0wsSUFBSW1MLEVBQVFsRSxFQUFNcEgsUUFBUSxTQUFTcUcsU0FBU0UsV0FDeENnRixJQUFjRCxFQUFNckwsU0FBVXFMLEVBQU1oRixHQUFHLFdBQzNDYyxFQUFNM0csU0FBUyxhQUFheUssWUFBWSxtQkFBb0JLLEdBQWFMLFlBQVksbUJBQW9CSyxHQUN6R25FLEVBQU0zRyxTQUFTLGNBQWN5SyxZQUFZLGtCQUFtQkssR0FBYUwsWUFBWSxvQkFBcUJLLEtBSTlHOUMsUUFBUyxTQUFVSixHQUNiQSxJQUNGQSxFQUFLbUQsTUFBTUMsWUFBY3BELEVBQUtvRCxjQUlsQ0Msc0JBQXVCLFNBQVU1TCxHQUMvQixJQUFJc0gsRUFBUXZKLEVBQUVpQyxFQUFNc0QsZ0JBQWlCdUksR0FBTyxFQUN4Q0MsRUFBV3hFLEVBQU0zRyxTQUFTLFlBRTFCb0wsR0FEYXpFLEVBQU0zRyxTQUFTLGNBQ2QyRyxFQUFNM0csU0FBUyxnQkFDN0JxTCxFQUFZMUUsRUFBTTNHLFNBQVMsYUFDWixlQUFmWCxFQUFNUSxNQUNKc0wsRUFBUzNMLFNBQ1gwTCxFQUFPek4sS0FBS2lKLGFBQWFDLEVBQU8sVUFBVUksUUFDMUNvRSxFQUFTVixZQUFZLGlCQUFrQlMsR0FBTVQsWUFBWSxrQkFBbUJTLElBRTFFRSxFQUFZNUwsU0FDZDBMLEVBQU96TixLQUFLaUosYUFBYUMsRUFBTyxZQUFZSSxRQUM1Q3FFLEVBQVlYLFlBQVksbUJBQW9CUyxHQUFNVCxZQUFZLGdCQUFpQlMsSUFFN0VHLEVBQVU3TCxRQUNaL0IsS0FBS21NLHNCQUFzQmpELElBRzdCQSxFQUFNM0csU0FBUyxTQUFTTixZQUFZLG1FQUl4QzRMLGlCQUFrQixTQUFVak0sR0FDMUI1QixLQUFLdUIsT0FBT1MsS0FBSyxZQUFZQyxZQUFZLFdBQ3pDdEMsRUFBRWlDLEVBQU1zRCxnQkFBZ0J3RSxTQUFTLFlBR25Db0UsVUFBVyxTQUFVQyxFQUFLbkwsRUFBSytKLEdBQzdCLElBQUl2TCxFQUFPcEIsS0FDUEQsRUFBT0MsS0FBS3FCLFFBQ2hCMUIsRUFBRWdELE1BQU9DLElBQU9BLEVBQUtDLFNBQVksU0FDaENDLEtBQUssU0FBVXJCLEdBQ1ZMLEVBQUtHLE9BQU9FLEtBQUssWUFDUCxXQUFSc00sRUFDR3BPLEVBQUVxTyxjQUFjdk0sSUFDbkJMLEVBQUs2TSxVQUFVdEIsRUFBTXhFLFNBQVUxRyxFQUFNMUIsR0FFdEIsYUFBUmdPLEVBQ0x0TSxFQUFLYyxTQUFTUixRQUNoQlgsRUFBSzhNLFlBQVl2QixFQUFNeEUsU0FBVTFHLEVBQU05QixFQUFFMkIsVUFBV3ZCLEdBQVFPLE1BQU8sTUFHakVtQixFQUFLNEcsVUFBWTVHLEVBQUtjLFdBQ3hCbkIsRUFBSytNLFlBQVl4QixFQUFNeEUsU0FBVTFHLEVBQU0xQixNQUs5Q2tELEtBQUssV0FDSkUsUUFBUUMsSUFBSSxpQkFBbUIySyxFQUFNLFdBRXRDMUssT0FBTyxXQUNOakMsRUFBSzBMLFdBQVdILE1BSXBCeUIsbUJBQW9CLFNBQVV4TSxHQUM1QixJQUFJOEwsRUFBVzlMLEVBQU1ILEtBQUs0TSxRQUN0Qm5GLEVBQVF3RSxFQUFTdkYsU0FDakJuSSxLQUFLb0ssV0FBV2xCLEtBQ2xCbEosS0FBS3FLLG9CQUFvQnFELEdBQ3pCMU4sS0FBS21NLHNCQUFzQmpELEtBSS9Cb0Ysb0JBQXFCLFNBQVUxTSxHQUM3QkEsRUFBTTJNLGtCQUNOLElBQ0liLEVBQVcvTixFQUFFaUMsRUFBTUMsUUFDbkJxSCxFQUFRdkosRUFBRWlDLEVBQU1zRCxnQkFDaEJzSixFQUFjeE8sS0FBS2lKLGFBQWFDLEVBQU8sVUFDM0MsR0FBSXNGLEVBQVluRixNQUFPLENBQ3JCLElBQUlXLEVBQVVkLEVBQU1wSCxRQUFRLFNBQVNBLFFBQVEsTUFBTXVHLFNBQVMsVUFBVXJHLEtBQUssU0FDM0UsR0FBSWdJLEVBQVE1QixHQUFHLFlBQWUsT0FFMUJvRyxFQUFZbEYsU0FDZHRKLEtBQUs2SixXQUFXWCxHQUNoQmMsRUFBUUMsSUFBSSxpQkFBbUJvRSxRQUFXWCxHQUFZMU4sS0FBS29PLG1CQUFtQjVELEtBQUt4SyxRQUVuRkEsS0FBS3NLLFdBQVdwQixRQUlsQixHQUFJbEosS0FBSzBNLGFBQWFnQixHQUFXLENBQy9CLElBQUkzTixFQUFPQyxLQUFLcUIsUUFDWnVCLEVBQU1qRCxFQUFFOE8sV0FBVzFPLEVBQUt5QyxRQUFRMkYsUUFBVXBJLEVBQUt5QyxRQUFRMkYsT0FBT3ZHLEVBQU1ILEtBQUtpTixVQUFZM08sRUFBS3lDLFFBQVEyRixPQUFTZSxFQUFNLEdBQUdYLEdBQ3hIdkksS0FBSzhOLFVBQVUsU0FBVWxMLEVBQUs4SyxLQUtwQ2lCLHVCQUF3QixTQUFVL00sR0FDaENBLEVBQU0yTSxrQkFDTixJQUFJWixFQUFjaE8sRUFBRWlDLEVBQU1DLFFBQ3RCcUgsRUFBUXZKLEVBQUVpQyxFQUFNc0QsZ0JBQ2hCMEosRUFBZ0I1TyxLQUFLaUosYUFBYUMsRUFBTyxZQUM3QyxHQUFJMEYsRUFBY3ZGLE1BQU8sQ0FFdkIsR0FEZ0JILEVBQU1wSCxRQUFRLE1BQU11RyxTQUFTLFNBQy9CckcsS0FBSyxZQUFZRCxPQUFVLE9BRXJDNk0sRUFBY3RGLFFBQ2hCdEosS0FBS21MLGFBQWFqQyxHQUVsQmxKLEtBQUt5TCxhQUFhdkMsUUFHcEIsR0FBSWxKLEtBQUswTSxhQUFhaUIsR0FBYyxDQUNsQyxJQUFJNU4sRUFBT0MsS0FBS3FCLFFBQ1p1QixFQUFNakQsRUFBRThPLFdBQVcxTyxFQUFLeUMsUUFBUUQsVUFBWXhDLEVBQUt5QyxRQUFRRCxTQUFTWCxFQUFNSCxLQUFLaU4sVUFBWTNPLEVBQUt5QyxRQUFRRCxTQUFXMkcsRUFBTSxHQUFHWCxHQUM5SHZJLEtBQUs4TixVQUFVLFdBQVlsTCxFQUFLK0ssS0FLdENrQixrQkFBbUIsU0FBVWpOLEdBQzNCQSxFQUFNMk0sa0JBQ04sSUFBSU8sRUFBU25QLEVBQUVpQyxFQUFNQyxRQUNqQnFILEVBQVF2SixFQUFFaUMsRUFBTXNELGdCQUNoQm5GLEVBQU9DLEtBQUtxQixRQUNaME4sRUFBZ0IvTyxLQUFLaUosYUFBYUMsRUFBTyxZQUM3QyxHQUFJNkYsRUFBYzFGLE1BQU8sQ0FFdkIsR0FEZ0JILEVBQU1wSCxRQUFRLFNBQVNxRyxTQUFTRSxXQUNsQ3JHLEtBQUssWUFBWUQsT0FBVSxPQUN6QyxHQUFJaEMsRUFBS00sbUJBQW9CLENBQzNCLElBQUk0TSxFQUFXL0QsRUFBTXBILFFBQVEsU0FBU3FHLFNBQVM4RCxPQUMzQ2lCLEVBQVdoRSxFQUFNcEgsUUFBUSxTQUFTcUcsU0FBU2dGLE9BQzNDMkIsRUFBTzFHLEdBQUcsYUFDUjZFLEVBQVM3RSxHQUFHLFdBQ2RwSSxLQUFLd00sYUFBYXRELEVBQU8sUUFFekJsSixLQUFLK0osYUFBYWIsRUFBTyxRQUd2QmdFLEVBQVM5RSxHQUFHLFdBQ2RwSSxLQUFLd00sYUFBYXRELEVBQU8sU0FFekJsSixLQUFLK0osYUFBYWIsRUFBTyxjQUl6QjZGLEVBQWN6RixRQUNoQnRKLEtBQUsrSixhQUFhYixHQUVsQmxKLEtBQUt3TSxhQUFhdEQsUUFLdEIsR0FBSWxKLEtBQUswTSxhQUFhb0MsR0FBUyxDQUM3QixJQUFJMU8sRUFBUzhJLEVBQU0sR0FBR1gsR0FDbEIzRixFQUFPNUMsS0FBS2lKLGFBQWFDLEVBQU8sVUFBZSxNQUNoRHZKLEVBQUU4TyxXQUFXMU8sRUFBS3lDLFFBQVE2RixVQUFZdEksRUFBS3lDLFFBQVE2RixTQUFTekcsRUFBTUgsS0FBS2lOLFVBQVkzTyxFQUFLeUMsUUFBUTZGLFNBQVdqSSxFQUMzR1QsRUFBRThPLFdBQVcxTyxFQUFLeUMsUUFBUXdNLFVBQVlqUCxFQUFLeUMsUUFBUXdNLFNBQVNwTixFQUFNSCxLQUFLaU4sVUFBWTNPLEVBQUt5QyxRQUFRd00sU0FBVzVPLEVBQzlHSixLQUFLOE4sVUFBVSxXQUFZbEwsRUFBS2tNLEtBS3RDRyxnQkFBaUIsU0FBVXJOLEdBQ3pCQSxFQUFNSCxLQUFLeU4sT0FBT2pOLFlBQVksWUFHaENrTixrQkFBbUIsU0FBVXZOLEdBQzNCQSxFQUFNSCxLQUFLeU4sT0FBT2pOLFlBQVksV0FBV0gsUUFBUSxNQUFNNEgsU0FBUyxXQUdsRTBGLGFBQWMsU0FBVXhOLEdBQ3RCLElBQUl5TixFQUFhMVAsRUFBRWlDLEVBQU1DLFFBQ3JCeU4sRUFBZUQsRUFBV2xILFNBQVNnRixPQUNuQ29DLEVBQWVELEVBQWF0TixLQUFLLFNBQ2pDd04sRUFBWUYsRUFBYS9NLFdBQVdBLFNBQVMsU0FDN0NpTixFQUFVcEgsR0FBRyxjQUNqQmlILEVBQVdyQyxZQUFZLGtDQUNuQnVDLEVBQWF2SCxHQUFHLEdBQUdJLEdBQUcsY0FDeEJrSCxFQUFhck4sWUFBWSxVQUN6QmpDLEtBQUt1SyxRQUFRaUYsRUFBVWpFLElBQUksSUFDM0JpRSxFQUFVOUYsU0FBUyxXQUFXekgsWUFBWSxZQUFZK0YsR0FBRyxHQUFHaUMsSUFBSSxpQkFBbUJpRixPQUFVTSxHQUFheFAsS0FBS2lQLG1CQUUvR00sRUFBYTdGLFNBQVMsb0JBQW9CMUIsR0FBRyxHQUFHaUMsSUFBSSxpQkFBbUJpRixPQUFVSyxHQUFnQnZQLEtBQUttUCxtQkFDdEdJLEVBQWF2TixLQUFLLGNBQWNDLFlBQVksbUJBQW1CeUgsU0FBUyxxQkFJNUUrRixnQkFBaUIsU0FBVTdOLEdBQ3pCLElBQUk4TixFQUFXL1AsRUFBRWlDLEVBQU1DLFFBQ25COUIsRUFBT0MsS0FBS3FCLFFBQ1pzTyxFQUFZL04sRUFBTWdGLGNBQ2xCZ0osRUFBWSxVQUFVQyxLQUFLclEsRUFBT3NRLFVBQVVDLFVBQVVDLGVBQ3RESixHQUNGRCxFQUFVTSxhQUFhQyxRQUFRLFlBQWEsb0JBRTlDLElBQUlDLEVBQVdDLEVBQ1YzUSxFQUFTNFEsY0FBYyxnQkFPMUJGLEVBQVlULEVBQVM1TixRQUFRLGFBQWFTLFNBQVMsZUFBZWdKLElBQUksR0FDdEU2RSxFQUFZelEsRUFBRXdRLEdBQVc1TixXQUFXZ0osSUFBSSxNQVB4QzRFLEVBQVkxUSxFQUFTNlEsZ0JBQWdCLDZCQUE4QixRQUN6RHRNLFVBQVV1TSxJQUFJLGNBQ3hCSCxFQUFZM1EsRUFBUzZRLGdCQUFnQiw2QkFBNkIsUUFDbEVILEVBQVVLLFlBQVlKLEdBQ3RCVixFQUFTNU4sUUFBUSxhQUFhWSxPQUFPeU4sSUFLdkMsSUFBSU0sRUFBY2YsRUFBUzVOLFFBQVEsYUFBYXNELElBQUksYUFBYUssTUFBTSxLQUNuRWlMLEVBQVFySixLQUFLSyxJQUFJbEksRUFBT21JLFdBQStCLFFBQW5CNUgsRUFBS2MsV0FBMEMsUUFBbkJkLEVBQUtjLFVBQXVCNFAsRUFBWSxHQUFHOUcsTUFBTThHLEVBQVksR0FBRy9LLFFBQVEsS0FBTyxHQUFLK0ssRUFBWSxLQUNwS04sRUFBVVEsYUFBYSxRQUFTakIsRUFBU2tCLFlBQVcsSUFDcERULEVBQVVRLGFBQWEsU0FBVWpCLEVBQVNtQixhQUFZLElBQ3REVCxFQUFVTyxhQUFhLElBQUksRUFBSUQsR0FDL0JOLEVBQVVPLGFBQWEsSUFBSSxFQUFJRCxHQUMvQk4sRUFBVU8sYUFBYSxRQUFTLElBQU1ELEdBQ3RDTixFQUFVTyxhQUFhLFNBQVUsR0FBS0QsR0FDdENOLEVBQVVPLGFBQWEsS0FBTSxFQUFJRCxHQUNqQ04sRUFBVU8sYUFBYSxLQUFNLEVBQUlELEdBQ2pDTixFQUFVTyxhQUFhLGVBQWdCLEVBQUlELEdBQzNDLElBQUlJLEVBQVVuQixFQUFVb0IsUUFBVUwsRUFDOUJNLEVBQVVyQixFQUFVc0IsUUFBVVAsRUFXbEMsR0FWdUIsUUFBbkIzUSxFQUFLYyxXQUNQaVEsRUFBVW5CLEVBQVVzQixRQUFVUCxFQUM5Qk0sRUFBVXJCLEVBQVVvQixRQUFVTCxHQUNGLFFBQW5CM1EsRUFBS2MsV0FDZGlRLEVBQVVwQixFQUFTa0IsWUFBVyxHQUFTakIsRUFBVXNCLFFBQVVQLEVBQzNETSxFQUFVckIsRUFBVW9CLFFBQVVMLEdBQ0YsUUFBbkIzUSxFQUFLYyxZQUNkaVEsRUFBVXBCLEVBQVNrQixZQUFXLEdBQVNqQixFQUFVb0IsUUFBVUwsRUFDM0RNLEVBQVV0QixFQUFTbUIsYUFBWSxHQUFTbEIsRUFBVXNCLFFBQVVQLEdBRTFEZCxFQUFXLENBQ2JRLEVBQVVPLGFBQWEsT0FBUSxzQkFDL0JQLEVBQVVPLGFBQWEsU0FBVSxrQkFDakMsSUFBSU8sRUFBbUJ6UixFQUFTMFIsY0FBYyxPQUM5Q0QsRUFBaUJFLElBQU0sNEJBQTZCLElBQUtDLGVBQWlCQyxrQkFBa0JuQixHQUM1RlIsRUFBVU0sYUFBYXNCLGFBQWFMLEVBQWtCSixFQUFTRSxRQUUvRHJCLEVBQVVNLGFBQWFzQixhQUFhcEIsRUFBV1csRUFBU0UsSUFJNURRLHVCQUF3QixTQUFVQyxHQUNoQyxJQUFJMVIsRUFBT0MsS0FBS3FCLFFBQ1pxUSxFQUFZRCxFQUFTM1AsUUFBUSxVQUFVdUcsV0FBV0wsR0FBRyxHQUFHaEcsS0FBSyxlQUM3RDJQLEVBQVlGLEVBQVMzUCxRQUFRLFNBQVNFLEtBQUssU0FDL0NoQyxLQUFLdUIsT0FBT0UsS0FBSyxVQUFXZ1EsR0FDekJ6UCxLQUFLLFNBQVN3RyxLQUFLLFNBQVVvQyxFQUFPVCxJQUNKLElBQTNCd0gsRUFBVS9HLE1BQU1ULEtBQ2RwSyxFQUFLNlIsYUFDSDdSLEVBQUs2UixhQUFhSCxFQUFVQyxFQUFXL1IsRUFBRXdLLEtBQzNDeEssRUFBRXdLLEdBQU1ULFNBQVMsZUFHbkIvSixFQUFFd0ssR0FBTVQsU0FBUyxtQkFNM0JtSSxpQkFBa0IsU0FBVWpRLEdBRVcsU0FBakM1QixLQUFLdUIsT0FBTzZELElBQUksY0FDbEJwRixLQUFLeVAsZ0JBQWdCN04sR0FFdkI1QixLQUFLd1IsdUJBQXVCN1IsRUFBRWlDLEVBQU1DLFVBR3RDaVEsZ0JBQWlCLFNBQVVsUSxHQUN6QkEsRUFBTStDLGlCQUNEaEYsRUFBRWlDLEVBQU1zRCxnQkFBZ0JrRCxHQUFHLGtCQUM5QnhHLEVBQU1nRixjQUFjcUosYUFBYThCLFdBQWEsU0FJbERDLGVBQWdCLFNBQVVwUSxHQUN4QjVCLEtBQUt1QixPQUFPUyxLQUFLLGdCQUFnQkMsWUFBWSxnQkFHL0NnUSxZQUFhLFNBQVVyUSxHQUNyQixJQUFJc1EsRUFBWXZTLEVBQUVpQyxFQUFNc0QsZ0JBQ3BCdU0sRUFBV3pSLEtBQUt1QixPQUFPRSxLQUFLLFdBQzVCaVEsRUFBWUQsRUFBUzNQLFFBQVEsVUFBVXVHLFdBQVdMLEdBQUcsR0FBR3pGLFdBQ3hENFAsRUFBWXhTLEVBQUV5RSxNQUFNLHFCQUV4QixHQURBcEUsS0FBS3VCLE9BQU84QyxRQUFROE4sR0FBYUMsWUFBZVgsRUFBVVksU0FBWVgsRUFBVW5QLFdBQVkrUCxTQUFZSixLQUNwR0MsRUFBVUkscUJBQWQsQ0FJQSxHQUFLTCxFQUFVcFEsUUFBUSxNQUFNdUcsV0FBV3RHLE9BT2pDLENBQ0wsSUFBSXlRLEVBQWM3TSxTQUFTdU0sRUFBVS9KLFNBQVNHLEtBQUssWUFBYyxFQUM3RG1LLEVBQWtCLGtHQUN0QlAsRUFBVXBRLFFBQVEsTUFBTXFMLE9BQU91RixVQUFVblEsV0FBVytGLEtBQUssVUFBV2tLLEdBQy9EZixFQUFTelAsS0FBSyxtQkFBbUJELFFBQ3BDMFAsRUFBUy9PLE9BQU8rUCxHQUVsQlAsRUFBVXBRLFFBQVEsTUFBTXVHLFdBQVdMLEdBQUcsR0FBR3pGLFNBQVMsU0FBU29RLE9BQU8seUVBQy9EekcsTUFBTWlCLE9BQU96SyxPQUFPK08sRUFBUzNQLFFBQVEsU0FBU3FHLFVBQ2pELElBQUl5SyxFQUFZbkIsRUFBUzNQLFFBQVEsU0FBU3FHLFNBQVNFLFdBQVdyRyxLQUFLLGVBQzFDLElBQXJCNFEsRUFBVTdRLFFBQ1o2USxFQUFVbFEsT0FBTytQLFFBakJuQlAsRUFBVXhQLE9BQU8sbURBQ2R5RixTQUFTRyxLQUFLLFVBQVcsR0FDekJILFNBQVMwSyxNQUFNLCtLQUdmeEssU0FBUyxTQUFTM0YsT0FBTytPLEVBQVN6UCxLQUFLLG1CQUFtQlIsU0FBUzBLLE1BQU1wSyxRQUFRLFNBQVNxRyxVQWdCL0YsSUFBSTJLLEVBQWNuTixTQUFTK0wsRUFBVXBKLEtBQUssWUFDMUMsR0FBSXdLLEVBQWMsRUFBRyxDQUNuQnBCLEVBQVVwSixLQUFLLFVBQVd3SyxFQUFjLEdBQ3JDM0ssU0FBU2dGLE9BQU81SyxXQUFXK0YsS0FBSyxVQUFXd0ssRUFBYyxHQUN6RDVHLE1BQU1pQixPQUFPNUssV0FBV29ILE1BQU0sRUFBRyxHQUFHbkksU0FDdkMsSUFBSXVSLEVBQVlyQixFQUFVdkosU0FBU0UsU0FBUyxVQUFVOUYsV0FBV1AsS0FBSyxlQUM5QyxJQUFwQitRLEVBQVVoUixRQUNaZ1IsRUFBVS9RLEtBQUssbUJBQW1CUixjQUdwQ2tRLEVBQVU5SCxXQUFXLFdBQ2xCNUgsS0FBSyxlQUFlUixTQUNwQjBLLE1BQU1BLE1BQU03RCxXQUFXN0csV0FJOUJ3UixXQUFZLFNBQVV0RSxFQUFVdUUsRUFBT2xULEdBRWhDMk8sRUFBU25NLFdBQVltTSxFQUFTbk0sYUFDbkM1QyxFQUFFNkksS0FBS2tHLEVBQVNuTSxTQUFVLFNBQVVxSSxFQUFPc0ksR0FDekNBLEVBQU1DLFNBQVd6RSxFQUFTbkcsS0FFNUIsSUFBSTZLLEVBQU16VCxFQUFFMFQsV0FFUjNELEVBQVcvUCxFQUFFLFFBQVVJLEVBQUthLFVBQVksb0JBQXNCLEtBQU84TixFQUFTM08sRUFBS0ssUUFBVSxRQUFVc08sRUFBUzNPLEVBQUtLLFFBQVUsSUFBTSxLQUFPc08sRUFBU3lFLFNBQVcsaUJBQW1CekUsRUFBU3lFLFNBQVcsSUFBTSxJQUFNLEtBQ3BOekosU0FBUyxTQUFXZ0YsRUFBUzRFLFdBQWEsS0FBUUwsR0FBU2xULEVBQUtPLE1BQVEsWUFBYyxLQUNyRlAsRUFBS3dULGFBQ1A3RCxFQUFTaE4sT0FBTzNDLEVBQUt3VCxhQUFhN0UsSUFFbENnQixFQUFTaE4sT0FBTyxzQkFBd0JnTSxFQUFTM08sRUFBS0ksV0FBYSxVQUNoRXVDLFlBQW1DLElBQXJCM0MsRUFBS3lULFlBQThCLHlCQUEyQjlFLEVBQVMzTyxFQUFLeVQsY0FBZ0IsSUFBTSxTQUFXLElBR2hJLElBQUk5SyxFQUFRZ0csRUFBU3hHLGNBQWdCLEdBQ3JDLEdBQUluSSxFQUFLMFQsZUFBa0JSLEVBQVEsRUFBS2xULEVBQUswVCxlQUMzQyxHQUFLUixFQUFRLEdBQU1sVCxFQUFLMFQsZUFBaUJDLE9BQU9oTCxFQUFNaUwsT0FBTyxFQUFFLElBQUssQ0FDbEUsSUFBSUMsRUFBT1gsRUFBUSxHQUFNbFQsRUFBS08sTUFBUSxPQUFTLFFBQy9Db1AsRUFBU2hOLE9BQU8sNkJBQStCa1IsRUFBTyx1QkFHcERGLE9BQU9oTCxFQUFNaUwsT0FBTyxFQUFFLEtBQ3hCakUsRUFBU2hOLE9BQU8sZ0RBRWZnUixPQUFPaEwsRUFBTWlMLE9BQU8sRUFBRSxLQUN2QmpFLEVBQVNoTixPQUFPLG1HQUdmZ1IsT0FBT2hMLEVBQU1pTCxPQUFPLEVBQUUsS0FDdkJqRSxFQUFTaE4sT0FBTyxtREFDYkgsU0FBUyxVQUFVc1IsUUFBUSxnQkFBaUI5VCxFQUFLWSxpQkFBbUIsaUJBc0IzRSxPQWxCQStPLEVBQVN6SixHQUFHLHdCQUF5QmpHLEtBQUt3TixzQkFBc0JoRCxLQUFLeEssT0FDckUwUCxFQUFTekosR0FBRyxRQUFTakcsS0FBSzZOLGlCQUFpQnJELEtBQUt4SyxPQUNoRDBQLEVBQVN6SixHQUFHLFFBQVMsWUFBY3lJLFNBQVlBLEdBQVkxTyxLQUFLc08sb0JBQW9COUQsS0FBS3hLLE9BQ3pGMFAsRUFBU3pKLEdBQUcsUUFBUyxlQUFpQnlJLFNBQVlBLEdBQVkxTyxLQUFLMk8sdUJBQXVCbkUsS0FBS3hLLE9BQy9GMFAsRUFBU3pKLEdBQUcsUUFBUyx5QkFBMkJ5SSxTQUFZQSxHQUFZMU8sS0FBSzZPLGtCQUFrQnJFLEtBQUt4SyxPQUNwRzBQLEVBQVN6SixHQUFHLFFBQVMsYUFBY2pHLEtBQUtvUCxhQUFhNUUsS0FBS3hLLE9BRXRERCxFQUFLYSxXQUNQOE8sRUFBU3pKLEdBQUcsWUFBYWpHLEtBQUs2UixpQkFBaUJySCxLQUFLeEssT0FDbkRpRyxHQUFHLFdBQVlqRyxLQUFLOFIsZ0JBQWdCdEgsS0FBS3hLLE9BQ3pDaUcsR0FBRyxVQUFXakcsS0FBS2dTLGVBQWV4SCxLQUFLeEssT0FDdkNpRyxHQUFHLE9BQVFqRyxLQUFLaVMsWUFBWXpILEtBQUt4SyxPQUdoQ0QsRUFBS2lULFlBQ1BqVCxFQUFLaVQsV0FBV3RELEVBQVVoQixHQUU1QjBFLEVBQUlVLFFBQVFwRSxHQUNMMEQsRUFBSVcsV0FHYjFSLGVBQWdCLFNBQVUyUixFQUFXdEYsRUFBVXVFLEVBQU9sVCxFQUFNa1UsR0FDMUQsSUFDSUMsRUFEQTlTLEVBQU9wQixLQUdQbVUsRUFBY3pGLEVBQVNuTSxTQUN2QjZSLElBQWNELEdBQWNBLEVBQVlwUyxPQUN4Q3NTLEtBQWtCdFUsRUFBSzBULGVBQWtCUixFQUFRLEdBQU1sVCxFQUFLMFQsZUFzQmhFLEdBckJJYSxPQUFPQyxLQUFLN0YsR0FBVTNNLE9BQVMsSUFDakNtUyxFQUFlRyxFQUFpQkwsRUFBWXJVLEVBQUUsV0FDekMwVSxHQUNITCxFQUFVdFIsT0FBT3dSLEdBRW5CdlUsRUFBRTZVLEtBQUt4VSxLQUFLZ1QsV0FBV3RFLEVBQVV1RSxFQUFPbFQsSUFDdkMrQyxLQUFLLFNBQVM0TSxHQUNUMkUsRUFDRkgsRUFBYXhSLE9BQU9nTixHQUVwQndFLEVBQWF4UixPQUFPL0MsRUFBRSxTQUFTK0MsT0FBTy9DLEVBQUUsT0FBU3lVLEVBQWMsYUFBb0MsRUFBckJELEVBQVlwUyxPQUFhLElBQU0sSUFBTSxVQUFVVyxPQUFPZ04sS0FFbEl1RSxHQUNGQSxNQUdIaFIsS0FBSyxXQUNKRSxRQUFRQyxJQUFJLDJCQUlaZ1IsRUFBYSxDQUNzQixJQUFqQ0UsT0FBT0MsS0FBSzdGLEdBQVUzTSxTQUN4Qm1TLEVBQWVGLEdBRWpCLElBQUlTLEVBQVl4QixFQUFRLEdBQUtsVCxFQUFLTyxPQUFTb08sRUFBU2dHLFVBQWEsVUFBWSxHQUN6RUMsS0FBbUI1VSxFQUFLMFQsZUFBa0JSLEVBQVEsR0FBTWxULEVBQUswVCxlQUc1RGtCLEdBQ0hULEVBQWF4UixPQUFPLG1CQUFxQitSLEVBQVcsa0JBQXlDLEVBQXJCTixFQUFZcFMsT0FBYSw0Q0FJbkcsSUFBSyxJQURENlMsRUFBWSxtQkFBcUJILEVBQVcsZ0NBQ3ZDNVEsRUFBRSxFQUFHQSxFQUFFc1EsRUFBWXBTLE9BQVE4QixJQUNsQytRLEdBQWEsd0VBRWZBLEdBQWEsa0NBQ2IsSUFBSUMsRUFDQUYsR0FDRkUsRUFBYWxWLEVBQUUsUUFDWDhVLEdBQVkxVSxFQUFLTyxNQUFRLElBQU1QLEVBQUswVCxlQUN0Q29CLEVBQVduTCxTQUFTK0ssR0FFbEJ4QixFQUFRLElBQU1sVCxFQUFLMFQsY0FDckJTLEVBQWF4UixPQUFPLDJCQUE2QitSLEVBQVcsb0JBQ3pEelMsS0FBSyxrQkFBa0JPLFdBQVdHLE9BQU9tUyxHQUU1Q1gsRUFBYXhSLE9BQU9tUyxLQUd0QkEsRUFBYWxWLEVBQUUsbUJBQXFCOFUsRUFBVyxNQUMvQ1AsRUFBYXhSLE9BQU9rUyxHQUFXbFMsT0FBT21TLElBR3hDbFYsRUFBRTZJLEtBQUsyTCxFQUFhLFdBQ2xCLElBQUlXLEVBQThCblYsRUFBbEJnVixFQUFvQixPQUFZLG9CQUNoREUsRUFBV25TLE9BQU9vUyxHQUNsQjFULEVBQUtpQixlQUFleVMsRUFBVzlVLEtBQU1pVCxFQUFRLEVBQUdsVCxFQUFNa1UsT0FLNURjLGVBQWdCLFNBQVVmLEVBQVd0RixFQUFVM08sRUFBTWtVLEdBQ25ELElBQUlsVSxFQUFPQSxHQUFRaVUsRUFBVWxTLFFBQVEsYUFBYUwsS0FBSyxXQUNuREEsRUFBT2lOLEVBQVNuTSxVQUFZbU0sRUFBU3JHLFNBQ3pDMkwsRUFBVWhTLEtBQUssWUFBWXNHLEtBQUssVUFBeUIsRUFBZDdHLEVBQUtNLFFBQ2hEL0IsS0FBS3FDLGVBQWUyUixHQUFhelIsU0FBWWQsR0FBUSxFQUFHMUIsRUFBTWtVLElBR2hFL0YsWUFBYSxTQUFVaEYsRUFBT3pILEVBQU0xQixHQUNsQyxJQUFJcUIsRUFBT3BCLEtBQ1BELEVBQU9BLEdBQVFtSixFQUFNcEgsUUFBUSxhQUFhTCxLQUFLLFdBQy9DdVQsRUFBUSxFQUNaaFYsS0FBSytVLGVBQWU3TCxFQUFNcEgsUUFBUSxTQUFVTCxFQUFNMUIsRUFBTSxhQUNoRGlWLElBQVV2VCxFQUFLYyxTQUFTUixTQUN2Qm1ILEVBQU0zRyxTQUFTLGVBQWVSLFFBQ2pDbUgsRUFBTXhHLE9BQU8sbURBRVZ3RyxFQUFNbEgsS0FBSyxXQUFXRCxRQUN6Qm1ILEVBQU0zRyxTQUFTLFVBQVVzUixRQUFRLGdCQUFpQjlULEVBQUtZLGlCQUFtQixpQkFFNUVTLEVBQUtxSyxhQUFhdkMsT0FLeEIrTCxnQkFBaUIsU0FBVUMsRUFBY3hHLEVBQVUzTyxFQUFNa1UsR0FDdkQsSUFBSTdTLEVBQU9wQixLQUNQbVYsRUFBU3hWLEVBQUUsV0FDZitPLEVBQVN4RyxhQUFld0csRUFBU3hHLGNBQWdCLE1BQ2pEdkksRUFBRTZVLEtBQUt4VSxLQUFLZ1QsV0FBV3RFLEVBQVUsRUFBRzNPLEdBQVFtVixFQUFhcFQsUUFBUSxhQUFhTCxLQUFLLGFBQ2hGcUIsS0FBSyxTQUFTNE0sR0FDYnlGLEVBQU96UyxPQUFPL0MsRUFBRSx1QkFBdUIrQyxPQUFPL0MsRUFBRSxvQkFBb0IrQyxPQUFPZ04sRUFBU3pOLFlBQVksWUFBWXlILFNBQVMsaUJBQ3JIeUwsRUFBT3pTLE9BQU8sbUZBRWR5UyxFQUFPelMsT0FBTyx1RkFDZCxJQUFJbkIsRUFBU0gsRUFBS0csT0FDbEJBLEVBQU9zUyxRQUFRc0IsR0FDWjVTLFNBQVMsZUFBZUcsT0FBTyxnREFDL0JILFNBQVMsV0FBV0EsV0FBV0csT0FBT25CLEVBQU9nQixTQUFTLFNBQVMySSxRQUNsRStJLE1BRURoUixLQUFLLFdBQ0pFLFFBQVFDLElBQUksbUNBSWxCNkssVUFBVyxTQUFVaUgsRUFBY3pULEVBQU0xQixHQUN2QyxJQUFJcUIsRUFBT3BCLEtBQ1hBLEtBQUtpVixnQkFBZ0JDLEVBQWN6VCxFQUFNMUIsRUFBTSxXQUN4Q21WLEVBQWEzUyxTQUFTLFlBQVlSLFFBQ3JDbVQsRUFBYTNTLFNBQVMsVUFBVXNRLE1BQU0sZ0RBRXhDelIsRUFBS2tKLFdBQVc0SyxNQUlwQkUsZUFBZ0IsU0FBVUMsRUFBYUMsRUFBY0MsR0FFbkQsSUFBSyxJQUREekosRUFBUSxHQUNIakksRUFBSSxFQUFHQSxFQUFJMFIsRUFBcUIxUixJQUN2Q2lJLEdBQVMsd0VBRVh1SixFQUFZbE4sU0FBUzhDLFFBQVEsWUFBWTFJLFdBQVcrRixLQUFLLFVBQTBCLEVBQWZnTixHQUNqRXBKLE1BQU1pQixPQUFPNUssU0FBUyxVQUFVc1EsTUFBTS9HLElBRzNDMEosaUJBQWtCLFNBQVVDLEVBQVkvRyxFQUFVM08sRUFBTWtVLEdBQ3RELElBQUk3UyxFQUFPcEIsS0FDUEQsRUFBT0EsR0FBUTBWLEVBQVczVCxRQUFRLGFBQWFMLEtBQUssV0FDcERpVSxFQUFrQmhILEVBQVNyRyxTQUFXcUcsRUFBU3JHLFNBQVN0RyxPQUFTMk0sRUFBU25NLFNBQVNSLE9BQ25Gd1QsRUFBc0JFLEVBQVd0TixTQUFTQyxHQUFHLE1BQVFxTixFQUFXM1QsUUFBUSxNQUFNUyxXQUFXUixPQUFTLEVBQ2xHdVQsRUFBZUMsRUFBc0JHLEVBQ3JDQyxFQUFpQkwsRUFBZSxFQUFLak8sS0FBS3VPLE1BQU1OLEVBQWEsRUFBSSxHQUFLLEVBRTFFLEdBQUlHLEVBQVd0TixTQUFTQyxHQUFHLE1BQU8sQ0FDbEJxTixFQUFXM1QsUUFBUSxNQUFNbUosUUFBUSxXQUMvQ3dLLEVBQVczVCxRQUFRLE1BQU1tSixRQUFRLFlBQVl6SixTQUM3QyxJQUFJcVUsRUFBYSxFQUNqQjdWLEtBQUsrVSxlQUFlVSxFQUFXdE4sU0FBU3JHLFFBQVEsU0FBVTRNLEVBQVUzTyxFQUFNLFdBQ3hFLEtBQU04VixJQUFlSCxFQUFpQixDQUNwQyxJQUFJSSxFQUFjTCxFQUFXdE4sU0FBU3JHLFFBQVEsU0FBU1MsU0FBUyxXQUFXQSxTQUFTLE1BQ2hGZ1QsRUFBc0IsR0FDeEJuVSxFQUFLZ1UsZUFBZVUsRUFBWTlOLEdBQUcsR0FBRzJLLE9BQU84QyxFQUFXM1QsUUFBUSxNQUFNdUcsV0FBV3FLLFVBQVVxRCxVQUFXVCxFQUFjQyxHQUNwSE8sRUFBWXBNLFNBQVMsVUFBVTFILEtBQUssU0FBUzBILFNBQVMsZ0JBRXREdEksRUFBS2dVLGVBQWVVLEVBQVk5TixHQUFHMk4sR0FBZTlDLE1BQU00QyxFQUFXM1QsUUFBUSxNQUFNaVUsVUFBV1QsRUFBYyxHQUMxR1EsRUFBWWxKLElBQUksT0FBUytJLEVBQWdCLE1BQVNqTSxTQUFTLFVBQ3hEQyxNQUFNLEVBQUdnTSxHQUFlM1QsS0FBSyxTQUFTMEgsU0FBUyxlQUMvQ3dDLE1BQU1BLE1BQU12QyxNQUFNZ00sR0FBZTNULEtBQUssU0FBUzBILFNBQVMsZUFFN0R1SyxXQUdDLENBQ0wsSUFBSStCLEVBQVksRUFDaEJoVyxLQUFLcUMsZUFBZW9ULEVBQVczVCxRQUFRLGFBQWM0TSxFQUFVLEVBQUczTyxFQUFNLGFBQ2hFaVcsSUFBY1YsSUFDbEJsVSxFQUFLZ1UsZUFBZUssRUFBV3RJLE9BQU81SyxTQUFTLFdBQzVDQSxXQUFXeUYsR0FBRzJOLEdBQWU5QyxNQUFNbFQsRUFBRSxvQkFDckMrQyxPQUFPK1MsSUFBY0gsRUFBYyxHQUN0Q0csRUFBVzNULFFBQVEsTUFBTXVHLFdBQVdMLEdBQUcsR0FBRzBCLFNBQVMsVUFBVTFILEtBQUssU0FBUzBILFNBQVMsY0FDcEYrTCxFQUFXdE4sU0FBU0UsV0FBV3FCLFNBQVMsVUFDckNDLE1BQU0sRUFBR2dNLEdBQWUzVCxLQUFLLFNBQVMwSCxTQUFTLGVBQy9Dd0MsTUFBTUEsTUFBTXZDLE1BQU1nTSxHQUFlM1QsS0FBSyxTQUFTMEgsU0FBUyxjQUMzRHVLLFNBTVI5RixZQUFhLFNBQVVqRixFQUFPekgsRUFBTTFCLEdBQ2xDLElBQUlxQixFQUFPcEIsS0FDWEEsS0FBS3dWLGlCQUFpQnRNLEVBQU1wSCxRQUFRLFNBQVVMLEVBQU0xQixFQUFNLFdBQ3hEbUosRUFBTXBILFFBQVEsVUFBVUwsS0FBSyxrQkFBa0IsR0FDMUN5SCxFQUFNM0csU0FBUyxhQUFhUixRQUMvQm1ILEVBQU0zRyxTQUFTLFlBQVlzUSxNQUFNLG1HQUVuQ3pSLEVBQUtvTCxhQUFhdEQsTUFJdEIrTSxZQUFhLFNBQVUvTSxHQUNyQixJQUFJYyxFQUFVZCxFQUFNcEgsUUFBUSxTQUFTcUcsU0FDakNpRixFQUFRcEQsRUFBUTdCLFNBQVNFLFdBQ3pCMkIsRUFBUTVCLEdBQUcsTUFDVHBJLEtBQUtpSixhQUFhQyxFQUFPLFlBQVlHLE9BQ3ZDK0QsRUFBTXBGLEdBQUcsR0FBR3pGLFNBQVMsa0JBQWtCZixTQUN2QzRMLEVBQU16RCxNQUFNLEVBQUcsR0FBR3BILFdBQVcrRixLQUFLLFVBQVc4RSxFQUFNcEYsR0FBRyxHQUFHekYsV0FBV1IsUUFDcEVpSSxFQUFReEksVUFFUjRMLEVBQU1wRixHQUFHLEdBQUd6RixXQUFXcUgsV0FBVyxXQUMvQjVILEtBQUssZUFBZVIsU0FDcEIwSyxNQUFNQSxNQUFNN0QsV0FBVzdHLFNBRzVCd0ksRUFBUXVHLElBQUl2RyxFQUFRM0IsWUFBWTdHLFVBSXBDb0QsT0FBUSxTQUFVbkUsRUFBZ0JDLEdBQ2hDLElBQUlVLEVBQU9wQixLQUdYLEdBRkFTLE9BQTRDLElBQW5CQSxFQUFtQ0EsRUFBaUJULEtBQUtxQixRQUFRWixlQUMxRkMsT0FBc0QsSUFBeEJBLEVBQXdDQSxFQUFzQlYsS0FBS3FCLFFBQVFYLG9CQUNyR2YsRUFBRUssTUFBTXVDLFNBQVMsWUFBWVIsT0FDL0IsT0FBTyxFQUVULElBQUk5QixFQUFrQkQsS0FBS0MsZ0JBQ3ZCaVcsRUFBUWpXLEVBQWdCK0IsS0FBSyxTQUM1QmtVLEVBQU1uVSxPQUdUbVUsRUFBTWpVLFlBQVksVUFGbEJoQyxFQUFnQnlDLE9BQU8sZ0ZBSXpCLElBQUl5VCxFQUFjbFcsRUFBZ0J5SixTQUFTLG1CQUFtQjFILEtBQUssNEJBQTRCdUosSUFBSSxHQUMvRmtDLEVBQWtDLFFBQTNCck0sRUFBS0MsUUFBUVIsV0FBa0QsUUFBM0JPLEVBQUtDLFFBQVFSLFVBQzVEdVYsWUFBWUQsR0FDVkUsTUFBUzVJLEVBQU8wSSxFQUFZRyxhQUFlSCxFQUFZSSxZQUN2REMsT0FBVS9JLEVBQU8wSSxFQUFZSSxZQUFjSixFQUFZRyxhQUN2REcsUUFBVyxTQUFVQyxHQUNuQi9XLEVBQUUrVyxHQUFVMVUsS0FBSyxvQkFBb0JvRCxJQUFJLFdBQVksV0FDbERwRCxLQUFLLGtDQUFrQ29ELElBQUksWUFBYSxLQUU3RHVSLFdBQWMsU0FBVUMsR0FFdEIsR0FEQTNXLEVBQWdCK0IsS0FBSyxTQUFTMEgsU0FBUyxVQUNHLFFBQXRDaEosRUFBb0JzUCxjQUF5QixDQUMvQyxJQUFJNkcsS0FDQUMsRUFBV3pQLEtBQUt1TyxNQUFxQixNQUFmZ0IsRUFBT1AsT0FDN0JVLEVBQVkxUCxLQUFLdU8sTUFBc0IsTUFBaEJnQixFQUFPSixTQUVoQ0ssRUFERUMsRUFBV0MsRUFDUCxJQUFJQyxNQUFNLElBQUssTUFBT0YsRUFBVUMsSUFFaEMsSUFBSUMsTUFBTSxJQUFLLE1BQU9ELEVBQVdELEtBRXJDRyxTQUFTTCxFQUFPTSxZQUFhLE1BQU8sRUFBRyxHQUMzQ0wsRUFBSU0sS0FBSzFXLEVBQWlCLFlBQ3JCLENBQ0wsSUFBSTJXLEVBQVcscUJBQXNCM1gsRUFBUzRYLGdCQUFnQi9KLE1BQzFEZ0ssSUFBUzlYLEVBQU8rWCxRQUNoQkMsRUFBK0IsZ0NBQXRCMUgsVUFBVTJILFNBQW9FLGFBQXRCM0gsVUFBVTJILFNBQTBCM0gsVUFBVTRILFdBQVdoUyxRQUFRLFNBQVcsRUFFakosSUFBTTBSLElBQWFFLEdBQVNFLEVBQzFCaFksRUFBT3NRLFVBQVU2SCxXQUFXZixFQUFPZ0IsV0FBWW5YLEVBQWlCLFlBQzNELENBQ0wsSUFBSW9YLEVBQVcsb0JBQWtELEtBQTVCelcsRUFBS0MsUUFBUWQsV0FBb0IsSUFBTWEsRUFBS0MsUUFBUWQsV0FBYSxJQUNqR04sRUFBZ0IrQixLQUFLNlYsR0FBVTlWLFFBQ2xDOUIsRUFBZ0J5QyxPQUFPLDZCQUEyRCxLQUE1QnRCLEVBQUtDLFFBQVFkLFdBQW9CLElBQU1hLEVBQUtDLFFBQVFkLFdBQWEsSUFBTSxlQUN6R0UsRUFBaUIsY0FFdkNSLEVBQWdCK0IsS0FBSzZWLEdBQVV2UCxLQUFLLE9BQVFzTyxFQUFPTSxhQUFhLEdBQUd2VixhQUsxRW1XLEtBQUssV0FDSjdYLEVBQWdCZ0MsWUFBWSxvQkFDM0IsV0FDRGhDLEVBQWdCZ0MsWUFBWSx1QkFLbEN0QyxFQUFFb1ksR0FBR0MsU0FBVyxTQUFValksR0FDeEIsT0FBTyxJQUFJRixFQUFTRyxLQUFNRCxHQUFNb0IiLCJmaWxlIjoianF1ZXJ5Lm9yZ2NoYXJ0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBqUXVlcnkgT3JnQ2hhcnQgUGx1Z2luXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFiZW5nL09yZ0NoYXJ0XG4gKlxuICogQ29weXJpZ2h0IDIwMTYsIGRhYmVuZ1xuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSwgd2luZG93LCBkb2N1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xuICB9XG59KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcbiAgdmFyIE9yZ0NoYXJ0ID0gZnVuY3Rpb24gKGVsZW0sIG9wdHMpIHtcbiAgICB0aGlzLiRjaGFydENvbnRhaW5lciA9ICQoZWxlbSk7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLmRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgJ25vZGVUaXRsZSc6ICduYW1lJyxcbiAgICAgICdub2RlSWQnOiAnaWQnLFxuICAgICAgJ3RvZ2dsZVNpYmxpbmdzUmVzcCc6IGZhbHNlLFxuICAgICAgJ2RlcHRoJzogOTk5LFxuICAgICAgJ2NoYXJ0Q2xhc3MnOiAnJyxcbiAgICAgICdleHBvcnRCdXR0b24nOiBmYWxzZSxcbiAgICAgICdleHBvcnRGaWxlbmFtZSc6ICdPcmdDaGFydCcsXG4gICAgICAnZXhwb3J0RmlsZWV4dGVuc2lvbic6ICdwbmcnLFxuICAgICAgJ3BhcmVudE5vZGVTeW1ib2wnOiAnZmEtdXNlcnMnLFxuICAgICAgJ2RyYWdnYWJsZSc6IGZhbHNlLFxuICAgICAgJ2RpcmVjdGlvbic6ICd0MmInLFxuICAgICAgJ3Bhbic6IGZhbHNlLFxuICAgICAgJ3pvb20nOiBmYWxzZSxcbiAgICAgICd6b29taW5MaW1pdCc6IDcsXG4gICAgICAnem9vbW91dExpbWl0JzogMC41XG4gICAgfTtcbiAgfTtcbiAgLy9cbiAgT3JnQ2hhcnQucHJvdG90eXBlID0ge1xuICAgIC8vXG4gICAgaW5pdDogZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCB0aGlzLm9wdHMsIG9wdHMpO1xuICAgICAgLy8gYnVpbGQgdGhlIG9yZy1jaGFydFxuICAgICAgdmFyICRjaGFydENvbnRhaW5lciA9IHRoaXMuJGNoYXJ0Q29udGFpbmVyO1xuICAgICAgaWYgKHRoaXMuJGNoYXJ0KSB7XG4gICAgICAgIHRoaXMuJGNoYXJ0LnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgdmFyIGRhdGEgPSB0aGlzLm9wdGlvbnMuZGF0YTtcbiAgICAgIHZhciAkY2hhcnQgPSB0aGlzLiRjaGFydCA9ICQoJzxkaXY+Jywge1xuICAgICAgICAnZGF0YSc6IHsgJ29wdGlvbnMnOiB0aGlzLm9wdGlvbnMgfSxcbiAgICAgICAgJ2NsYXNzJzogJ29yZ2NoYXJ0JyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uICE9PSAndDJiJyA/ICcgJyArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gOiAnJyksXG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKCEkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRjaGFydC5maW5kKCcubm9kZS5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnRyaWdnZXJJbml0RXZlbnQoKTtcbiAgICAgIH1cbiAgICAgIGlmICgkLnR5cGUoZGF0YSkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgJCkgeyAvLyB1bCBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMuYnVpbGRKc29uRFMoZGF0YS5jaGlsZHJlbigpKSwgMCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gbG9jYWwganNvbiBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoaXMuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2hhcnQuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAndXJsJzogZGF0YSxcbiAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbidcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhhdC5vcHRpb25zLmFqYXhVUkwgPyBkYXRhIDogdGhhdC5hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDAsIHRoYXQub3B0aW9ucyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAkY2hhcnQuY2hpbGRyZW4oJy5zcGlubmVyJykucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkY2hhcnQpO1xuXG4gICAgICAvLyBhcHBlbmQgdGhlIGV4cG9ydCBidXR0b25cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhwb3J0QnV0dG9uICYmICEkY2hhcnRDb250YWluZXIuZmluZCgnLm9jLWV4cG9ydC1idG4nKS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5hdHRhY2hFeHBvcnRCdXR0b24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYW4pIHtcbiAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuem9vbSkge1xuICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy9cbiAgICB0cmlnZ2VySW5pdEV2ZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XG4gICAgICAgIG1vLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgaW5pdFRpbWU6XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzW2pdLmNsYXNzTGlzdC5jb250YWlucygnb3JnY2hhcnQnKSkge1xuICAgICAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQgJiYgdHlwZW9mIHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQodGhhdC4kY2hhcnQpO1xuICAgICAgICAgICAgICAgIHZhciBpbml0RXZlbnQgPSAkLkV2ZW50KCdpbml0Lm9yZ2NoYXJ0Jyk7XG4gICAgICAgICAgICAgICAgdGhhdC4kY2hhcnQudHJpZ2dlcihpbml0RXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrIGluaXRUaW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG1vLm9ic2VydmUodGhpcy4kY2hhcnRDb250YWluZXJbMF0sIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICBhdHRhY2hFeHBvcnRCdXR0b246IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkZXhwb3J0QnRuID0gJCgnPGJ1dHRvbj4nLCB7XG4gICAgICAgICdjbGFzcyc6ICdvYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSxcbiAgICAgICAgJ3RleHQnOiAnRXhwb3J0JyxcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGF0LmV4cG9ydCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkZXhwb3J0QnRuKTtcbiAgICB9LFxuICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIChvcHRzLCB2YWwpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09ICdwYW4nKSB7XG4gICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzID09PSAnem9vbScpIHtcbiAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAob3B0cy5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5pbml0KG9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy5wYW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5wYW4pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuem9vbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnpvb20pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy9cbiAgICBwYW5TdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gJChlLmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCB8fCAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSkge1xuICAgICAgICAkY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGNoYXJ0LmNzcygnY3Vyc29yJywgJ21vdmUnKS5kYXRhKCdwYW5uaW5nJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICB2YXIgbGFzdFggPSAwO1xuICAgICAgdmFyIGxhc3RZID0gMDtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIGlmIChsYXN0VGYgIT09ICdub25lJykge1xuICAgICAgICB2YXIgdGVtcCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzRdKTtcbiAgICAgICAgICBsYXN0WSA9IHBhcnNlSW50KHRlbXBbNV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RYID0gcGFyc2VJbnQodGVtcFsxMl0pO1xuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFsxM10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc3RhcnRYID0gMDtcbiAgICAgIHZhciBzdGFydFkgPSAwO1xuICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgIHN0YXJ0WCA9IGUucGFnZVggLSBsYXN0WDtcbiAgICAgICAgc3RhcnRZID0gZS5wYWdlWSAtIGxhc3RZO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXG4gICAgICAgIHN0YXJ0WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIGxhc3RYO1xuICAgICAgICBzdGFydFkgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBsYXN0WTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Lm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJyxmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghJGNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3WCA9IDA7XG4gICAgICAgIHZhciBuZXdZID0gMDtcbiAgICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgICAgbmV3WCA9IGUucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUucGFnZVkgLSBzdGFydFk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgICAgIG5ld1ggPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIHN0YXJ0WTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcpJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgzZCgxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJywgMCwgMSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIG1hdHJpeFs0XSA9ICcgJyArIG5ld1g7XG4gICAgICAgICAgICBtYXRyaXhbNV0gPSAnICcgKyBuZXdZICsgJyknO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRyaXhbMTJdID0gJyAnICsgbmV3WDtcbiAgICAgICAgICAgIG1hdHJpeFsxM10gPSAnICcgKyBuZXdZO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBtYXRyaXguam9pbignLCcpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHBhbkVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5kYXRhLmNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICBlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKS5jc3MoJ2N1cnNvcicsICdkZWZhdWx0Jykub2ZmKCdtb3VzZW1vdmUnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYmluZFBhbjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMuJGNoYXJ0Lm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgeyAnY2hhcnQnOiB0aGlzLiRjaGFydCB9LCB0aGlzLnBhbkVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICB1bmJpbmRQYW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xuICAgICAgdGhpcy4kY2hhcnQub2ZmKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZignbW91c2V1cCB0b3VjaGVuZCcsIHRoaXMucGFuRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIHpvb21XaGVlbEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgbmV3U2NhbGUgID0gMSArIChlLm9yaWdpbmFsRXZlbnQuZGVsdGFZID4gMCA/IC0wLjIgOiAwLjIpO1xuICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIG5ld1NjYWxlKTtcbiAgICB9LFxuICAgIC8vXG4gICAgem9vbVN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgdHJ1ZSk7XG4gICAgICAgIHZhciBkaXN0ID0gb2MuZ2V0UGluY2hEaXN0KGUpO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21pbmdIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21FbmRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgZmFsc2UpO1xuICAgICAgICB2YXIgZGlmZiA9IG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnKSAtIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcpO1xuICAgICAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgMS4yKTtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAwLjgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJpbmRab29tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbignd2hlZWwnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd0b3VjaHN0YXJ0JywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNoZW5kJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgdW5iaW5kWm9vbTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd3aGVlbCcsIHRoaXMuem9vbVdoZWVsSGFuZGxlcik7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3RvdWNoc3RhcnQnLCB0aGlzLnpvb21TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUnLCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2hlbmQnLCB0aGlzLnpvb21FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0UGluY2hEaXN0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIE1hdGguc3FydCgoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgKiAoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgK1xuICAgICAgKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpICogKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc2V0Q2hhcnRTY2FsZTogZnVuY3Rpb24gKCRjaGFydCwgbmV3U2NhbGUpIHtcbiAgICAgIHZhciBvcHRzID0gJGNoYXJ0LmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIHZhciBtYXRyaXggPSAnJztcbiAgICAgIHZhciB0YXJnZXRTY2FsZSA9IDE7XG4gICAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ3NjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbM10pICogbmV3U2NhbGUpO1xuICAgICAgICAgIGlmICh0YXJnZXRTY2FsZSA+IG9wdHMuem9vbW91dExpbWl0ICYmIHRhcmdldFNjYWxlIDwgb3B0cy56b29taW5MaW1pdCkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQobWF0cml4WzFdKSAqIG5ld1NjYWxlKTtcbiAgICAgICAgICBpZiAodGFyZ2V0U2NhbGUgPiBvcHRzLnpvb21vdXRMaW1pdCAmJiB0YXJnZXRTY2FsZSA8IG9wdHMuem9vbWluTGltaXQpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIGxhc3RUZiArICcgc2NhbGUzZCgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcsIDEpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJ1aWxkSnNvbkRTOiBmdW5jdGlvbiAoJGxpKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgc3ViT2JqID0ge1xuICAgICAgICAnbmFtZSc6ICRsaS5jb250ZW50cygpLmVxKDApLnRleHQoKS50cmltKCksXG4gICAgICAgICdyZWxhdGlvbnNoaXAnOiAoJGxpLnBhcmVudCgpLnBhcmVudCgpLmlzKCdsaScpID8gJzEnOiAnMCcpICsgKCRsaS5zaWJsaW5ncygnbGknKS5sZW5ndGggPyAxOiAwKSArICgkbGkuY2hpbGRyZW4oJ3VsJykubGVuZ3RoID8gMSA6IDApXG4gICAgICB9O1xuICAgICAgaWYgKCRsaS5hdHRyKCdkYXRhLWlkJykpIHtcbiAgICAgICAgc3ViT2JqLmlkID0gJGxpLmF0dHIoJ2RhdGEtaWQnKTtcbiAgICAgIH1cbiAgICAgICRsaS5jaGlsZHJlbigndWwnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQuYnVpbGRKc29uRFMoJCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViT2JqO1xuICAgIH0sXG4gICAgLy9cbiAgICBhdHRhY2hSZWw6IGZ1bmN0aW9uIChkYXRhLCBmbGFncykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgdGhhdC5hdHRhY2hSZWwoaXRlbSwgJzEnICsgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMSA/IDEgOiAwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvL1xuICAgIGxvb3BDaGFydDogZnVuY3Rpb24gKCRjaGFydCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0ciA9ICRjaGFydC5maW5kKCd0cjpmaXJzdCcpO1xuICAgICAgdmFyIHN1Yk9iaiA9IHsgJ2lkJzogJHRyLmZpbmQoJy5ub2RlJylbMF0uaWQgfTtcbiAgICAgICR0ci5zaWJsaW5ncygnOmxhc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQubG9vcENoYXJ0KCQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Yk9iajtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0SGllcmFyY2h5OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuJGNoYXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gJ0Vycm9yOiBvcmdjaGFydCBkb2VzIG5vdCBleGlzdCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBub2RlcyBkbyBub3QgZXhpc3QnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLiRjaGFydC5maW5kKCcubm9kZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBBbGwgbm9kZXMgb2Ygb3JnaGNhcnQgdG8gYmUgZXhwb3J0ZWQgbXVzdCBoYXZlIGRhdGEtaWQgYXR0cmlidXRlISc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sb29wQ2hhcnQodGhpcy4kY2hhcnQpO1xuICAgIH0sXG4gICAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICAgIGdldE5vZGVTdGF0ZTogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgdmFyICR0YXJnZXQgPSB7fTtcbiAgICAgIHZhciByZWxhdGlvbiA9IHJlbGF0aW9uIHx8ICdzZWxmJztcbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCR0YXJnZXQuaXMoJy5oaWRkZW4nKSB8fCAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAhJHRhcmdldC5wYXJlbnQoKS5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGU7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICghKCgkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmxlbmd0aCAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpIHx8XG4gICAgICAgICAgICAoJHRhcmdldC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLmxlbmd0aCAmJiAkdGFyZ2V0LmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuaXMoJy5oaWRkZW4nKSkgfHxcbiAgICAgICAgICAgICgkdGFyZ2V0LnBhcmVudCgpLmlzKCdsaScpICYmICgkdGFyZ2V0LmNsb3Nlc3QoJ3VsJykuaXMoJy5oaWRkZW4nKSB8fCAkdGFyZ2V0LmNsb3Nlc3QoJ3ZlcnRpY2FsTm9kZXMnKS5pcygnLmhpZGRlbicpKSlcbiAgICAgICAgICApKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4geyAnZXhpc3QnOiBmYWxzZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgIH0sXG4gICAgLy8gZmluZCB0aGUgcmVsYXRlZCBub2Rlc1xuICAgIGdldFJlbGF0ZWROb2RlczogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgaWYgKCEkbm9kZSB8fCAhKCRub2RlIGluc3RhbmNlb2YgJCkgfHwgISRub2RlLmlzKCcubm9kZScpKSB7XG4gICAgICAgIHJldHVybiAkKCk7XG4gICAgICB9XG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5wYXJlbnQoKS5jaGlsZHJlbignOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGhpZGVQYXJlbnRFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBldmVudC5kYXRhLnVwcGVyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpLnNsaWNlKDEpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBhbmNlc3RvciBub2RlIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKTtcbiAgICAgIGlmICgkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzXG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUpO1xuICAgICAgfVxuICAgICAgLy8gaGlkZSB0aGUgbGluZXNcbiAgICAgIHZhciAkbGluZXMgPSAkdXBwZXJMZXZlbC5zbGljZSgxKTtcbiAgICAgICRsaW5lcy5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAvLyBoaWRlIHRoZSBzdXBlcmlvciBub2RlcyB3aXRoIHRyYW5zaXRpb25cbiAgICAgIHZhciAkcGFyZW50ID0gJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLm5vZGUnKTtcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkcGFyZW50KS52aXNpYmxlKSB7XG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3VwcGVyTGV2ZWwnOiAkdXBwZXJMZXZlbCB9LCB0aGlzLmhpZGVQYXJlbnRFbmQpO1xuICAgICAgfVxuICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgbm9kZSBoYXMgdGhlIHBhcmVudCBub2RlLCBoaWRlIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJHBhcmVudCwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlUGFyZW50KCRwYXJlbnQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2hvd1BhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGUgPSBldmVudC5kYXRhLm5vZGU7XG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVmVydGljYWxBcnJvdygkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93UGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBzdXBlcmlvciBsZXZlbFxuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgbGluZVxuICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oKS5zbGljZSgxLCAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgLy8gc2hvdyBwYXJlbnQgbm9kZSB3aXRoIGFuaW1hdGlvblxuICAgICAgdmFyICRwYXJlbnQgPSAkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcubm9kZScpO1xuICAgICAgdGhpcy5yZXBhaW50KCRwYXJlbnRbMF0pO1xuICAgICAgJHBhcmVudC5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlIH0sIHRoaXMuc2hvd1BhcmVudEVuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIHN0b3BBamF4OiBmdW5jdGlvbiAoJG5vZGVMZXZlbCkge1xuICAgICAgaWYgKCRub2RlTGV2ZWwuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGVMZXZlbC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpc1Zpc2libGVOb2RlOiBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE5vZGVTdGF0ZSgkKGVsZW0pKS52aXNpYmxlO1xuICAgIH0sXG4gICAgLy9cbiAgICBoaWRlQ2hpbGRyZW5FbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAoZXZlbnQuZGF0YS5pc1ZlcnRpY2FsRGVzYykge1xuICAgICAgICBldmVudC5kYXRhLmxvd2VyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5wcmV2QWxsKCcubGluZXMnKS5yZW1vdmVBdHRyKCdzdHlsZScpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgIC5zaWJsaW5ncygnLm5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICBldmVudC5kYXRhLmxvd2VyTGV2ZWwubGFzdCgpLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbihldmVudC5kYXRhLm5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVmVydGljYWxBcnJvdyhldmVudC5kYXRhLm5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBoaWRlQ2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICRsb3dlckxldmVsID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgdGhpcy5zdG9wQWpheCgkbG93ZXJMZXZlbC5sYXN0KCkpO1xuICAgICAgdmFyICRhbmltYXRlZE5vZGVzID0gJGxvd2VyTGV2ZWwubGFzdCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICRsb3dlckxldmVsLmxhc3QoKS5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIGlmICghaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgICAgJGFuaW1hdGVkTm9kZXMuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVwYWludCgkYW5pbWF0ZWROb2Rlcy5nZXQoMCkpO1xuICAgICAgJGFuaW1hdGVkTm9kZXMuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdhbmltYXRlZE5vZGVzJzogJGFuaW1hdGVkTm9kZXMsICdsb3dlckxldmVsJzogJGxvd2VyTGV2ZWwsICdpc1ZlcnRpY2FsRGVzYyc6IGlzVmVydGljYWxEZXNjLCAnbm9kZSc6ICRub2RlIH0sIHRoaXMuaGlkZUNoaWxkcmVuRW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzaG93Q2hpbGRyZW5FbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xuICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd0NoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbGV2ZWxzID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgdmFyIGlzVmVydGljYWxEZXNjID0gJGxldmVscy5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9IGlzVmVydGljYWxEZXNjXG4gICAgICAgID8gJGxldmVscy5yZW1vdmVDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpXG4gICAgICAgIDogJGxldmVscy5yZW1vdmVDbGFzcygnaGlkZGVuJykuZXEoMikuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSk7XG4gICAgICAvLyB0aGUgdHdvIGZvbGxvd2luZyBzdGF0ZW1lbnRzIGFyZSB1c2VkIHRvIGVuZm9yY2UgYnJvd3NlciB0byByZXBhaW50XG4gICAgICB0aGlzLnJlcGFpbnQoJGFuaW1hdGVkTm9kZXMuZ2V0KDApKTtcbiAgICAgICRhbmltYXRlZE5vZGVzLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAnYW5pbWF0ZWROb2Rlcyc6ICRhbmltYXRlZE5vZGVzIH0sIHRoaXMuc2hvd0NoaWxkcmVuRW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy9cbiAgICBoaWRlU2libGluZ3NFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xuICAgICAgdmFyICRub2RlQ29udGFpbmVyID0gZXZlbnQuZGF0YS5ub2RlQ29udGFpbmVyO1xuICAgICAgdmFyIGRpcmVjdGlvbiA9IGV2ZW50LmRhdGEuZGlyZWN0aW9uO1xuICAgICAgZXZlbnQuZGF0YS5saW5lcy5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgdmFyICRzaWJsaW5ncyA9IGRpcmVjdGlvbiA/IChkaXJlY3Rpb24gPT09ICdsZWZ0JyA/ICRub2RlQ29udGFpbmVyLnByZXZBbGwoJzpub3QoLmhpZGRlbiknKSA6ICRub2RlQ29udGFpbmVyLm5leHRBbGwoJzpub3QoLmhpZGRlbiknKSkgOiAkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpO1xuICAgICAgJG5vZGVDb250YWluZXIuY2xvc2VzdCgnLm5vZGVzJykucHJldigpLmNoaWxkcmVuKCc6bm90KC5oaWRkZW4pJylcbiAgICAgICAgLnNsaWNlKDEsIGRpcmVjdGlvbiA/ICRzaWJsaW5ncy5sZW5ndGggKiAyICsgMSA6IC0xKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICBldmVudC5kYXRhLmFuaW1hdGVkTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgICRzaWJsaW5ncy5maW5kKCcubm9kZTpndCgwKScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSlcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGlkZS1sZWZ0IHNsaWRlLXJpZ2h0JykuYWRkQ2xhc3MoJ3NsaWRlLXVwJyk7XG4gICAgICAkc2libGluZ3MuZmluZCgnLmxpbmVzLCAubm9kZXMsIC52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgIC5lbmQoKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZVNpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRpcmVjdGlvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRub2RlQ29udGFpbmVyID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcbiAgICAgIGlmICgkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1yaWdodCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXJpZ2h0Jyk7XG4gICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtbGVmdCcpO1xuICAgICAgfVxuICAgICAgdmFyICRhbmltYXRlZE5vZGVzID0gJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc2xpZGluZycpO1xuICAgICAgdmFyICRsaW5lcyA9ICRhbmltYXRlZE5vZGVzLmNsb3Nlc3QoJy5ub2RlcycpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICRhbmltYXRlZE5vZGVzLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ25vZGUnOiAkbm9kZSwgJ25vZGVDb250YWluZXInOiAkbm9kZUNvbnRhaW5lciwgJ2RpcmVjdGlvbic6IGRpcmVjdGlvbiwgJ2FuaW1hdGVkTm9kZXMnOiAkYW5pbWF0ZWROb2RlcywgJ2xpbmVzJzogJGxpbmVzIH0sIHRoaXMuaGlkZVNpYmxpbmdzRW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzaG93U2libGluZ3NFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xuICAgICAgZXZlbnQuZGF0YS52aXNpYmxlTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIHNob3dSZWxhdGVkUGFyZW50RW5kOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIC8vIGZpcnN0bHksIHNob3cgdGhlIHNpYmxpbmcgdGQgdGFnc1xuICAgICAgdmFyICRzaWJsaW5ncyA9ICQoKTtcbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2QWxsKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dEFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHNlY29uZGx5LCBzaG93IHRoZSBsaW5lc1xuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykuc2xpY2UoMCwgJHNpYmxpbmdzLmxlbmd0aCAqIDIpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgLy8gdGhpcmRseSwgZG8gc29tZSBjbGVhbmluZyBzdHVmZlxuICAgICAgaWYgKCF0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgICAgJHVwcGVyTGV2ZWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB2YXIgcGFyZW50ID0gJHVwcGVyTGV2ZWwuZmluZCgnLm5vZGUnKVswXTtcbiAgICAgICAgdGhpcy5yZXBhaW50KHBhcmVudCk7XG4gICAgICAgICQocGFyZW50KS5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgdGhpcy5zaG93UmVsYXRlZFBhcmVudEVuZCk7XG4gICAgICB9XG4gICAgICAvLyBsYXN0bHksIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgd2l0aCBhbmltYXRpb25cbiAgICAgIHZhciAkdmlzaWJsZU5vZGVzID0gJHNpYmxpbmdzLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMucmVwYWludCgkdmlzaWJsZU5vZGVzLmdldCgwKSk7XG4gICAgICAkdmlzaWJsZU5vZGVzLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWxlZnQgc2xpZGUtcmlnaHQnKTtcbiAgICAgICR2aXNpYmxlTm9kZXMuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAndmlzaWJsZU5vZGVzJzogJHZpc2libGVOb2RlcyB9LCB0aGlzLnNob3dTaWJsaW5nc0VuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICAgIHN0YXJ0TG9hZGluZzogZnVuY3Rpb24gKCRlZGdlKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gdGhpcy4kY2hhcnQ7XG4gICAgICBpZiAodHlwZW9mICRjaGFydC5kYXRhKCdpbkFqYXgnKSAhPT0gJ3VuZGVmaW5lZCcgJiYgJGNoYXJ0LmRhdGEoJ2luQWpheCcpID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgJGVkZ2UuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgJGVkZ2UucGFyZW50KCkuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKVxuICAgICAgICAuY2hpbGRyZW4oKS5ub3QoJy5zcGlubmVyJykuY3NzKCdvcGFjaXR5JywgMC4yKTtcbiAgICAgICRjaGFydC5kYXRhKCdpbkFqYXgnLCB0cnVlKTtcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgLy8gdGVybWluYXRlIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICAgIGVuZExvYWRpbmc6IGZ1bmN0aW9uICgkZWRnZSkge1xuICAgICAgdmFyICRub2RlID0gJGVkZ2UucGFyZW50KCk7XG4gICAgICAkZWRnZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkbm9kZS5maW5kKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgJG5vZGUuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgdGhpcy4kY2hhcnQuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9LFxuICAgIC8vIHdoZXRoZXIgdGhlIGN1cnNvciBpcyBob3ZlcmluZyBvdmVyIHRoZSBub2RlXG4gICAgaXNJbkFjdGlvbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICByZXR1cm4gJG5vZGUuY2hpbGRyZW4oJy5lZGdlJykuYXR0cignY2xhc3MnKS5pbmRleE9mKCdmYS0nKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0sXG4gICAgLy9cbiAgICBzd2l0Y2hWZXJ0aWNhbEFycm93OiBmdW5jdGlvbiAoJGFycm93KSB7XG4gICAgICAkYXJyb3cudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgfSxcbiAgICAvL1xuICAgIHN3aXRjaEhvcml6b250YWxBcnJvdzogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgb3B0cyA9ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCAmJiAodHlwZW9mIG9wdHMuYWpheFVSTCA9PT0gJ3VuZGVmaW5lZCcgfHwgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnKSkpIHtcbiAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XG4gICAgICAgIGlmICgkcHJldlNpYi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICBpZiAoJG5leHRTaWIubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgJHNpYnMgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIHZhciBzaWJzVmlzaWJsZSA9ICRzaWJzLmxlbmd0aCA/ICEkc2licy5pcygnLmhpZGRlbicpIDogZmFsc2U7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcsIHNpYnNWaXNpYmxlKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgcmVwYWludDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIG5vZGUuc3R5bGUub2Zmc2V0V2lkdGggPSBub2RlLm9mZnNldFdpZHRoO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBub2RlRW50ZXJMZWF2ZUhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCksIGZsYWcgPSBmYWxzZTtcbiAgICAgIHZhciAkdG9wRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpO1xuICAgICAgdmFyICRyaWdodEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpO1xuICAgICAgdmFyICRib3R0b21FZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJyk7XG4gICAgICB2YXIgJGxlZnRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpO1xuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuICAgICAgICBpZiAoJHRvcEVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgZmxhZyA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykudmlzaWJsZTtcbiAgICAgICAgICAkdG9wRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcsICFmbGFnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgZmxhZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRib3R0b21FZGdlLmxlbmd0aCkge1xuICAgICAgICAgIGZsYWcgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ2NoaWxkcmVuJykudmlzaWJsZTtcbiAgICAgICAgICAkYm90dG9tRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgZmxhZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRsZWZ0RWRnZS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcuZWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwIGZhLWNoZXZyb24tZG93biBmYS1jaGV2cm9uLXJpZ2h0IGZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBub2RlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGNoYXJ0LmZpbmQoJy5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgfSxcbiAgICAvLyBsb2FkIG5ldyBub2RlcyBieSBhamF4XG4gICAgbG9hZE5vZGVzOiBmdW5jdGlvbiAocmVsLCB1cmwsICRlZGdlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICQuYWpheCh7ICd1cmwnOiB1cmwsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKHRoYXQuJGNoYXJ0LmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgaWYgKHJlbCA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkUGFyZW50KCRlZGdlLnBhcmVudCgpLCBkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHJlbCA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICAgICAgaWYgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkQ2hpbGRyZW4oJGVkZ2UucGFyZW50KCksIGRhdGEsICQuZXh0ZW5kKHt9LCBvcHRzLCB7IGRlcHRoOiAwIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGRhdGEuc2libGluZ3MgfHwgZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICB0aGF0LmFkZFNpYmxpbmdzKCRlZGdlLnBhcmVudCgpLCBkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0ICcgKyByZWwgKyAnIGRhdGEnKTtcbiAgICAgIH0pXG4gICAgICAuYWx3YXlzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhhdC5lbmRMb2FkaW5nKCRlZGdlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICBIaWRlRmlyc3RQYXJlbnRFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICR0b3BFZGdlID0gZXZlbnQuZGF0YS50b3BFZGdlO1xuICAgICAgdmFyICRub2RlID0gJHRvcEVkZ2UucGFyZW50KCk7XG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coJHRvcEVkZ2UpO1xuICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIHRvcEVkZ2VDbGlja0hhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJHRvcEVkZ2UgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICB2YXIgJG5vZGUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIHZhciBwYXJlbnRTdGF0ZSA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50Jyk7XG4gICAgICBpZiAocGFyZW50U3RhdGUuZXhpc3QpIHtcbiAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpmaXJzdCcpLmZpbmQoJy5ub2RlJyk7XG4gICAgICAgIGlmICgkcGFyZW50LmlzKCcuc2xpZGluZycpKSB7IHJldHVybjsgfVxuICAgICAgICAvLyBoaWRlIHRoZSBhbmNlc3RvciBub2RlcyBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgICAgaWYgKHBhcmVudFN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICB0aGlzLmhpZGVQYXJlbnQoJG5vZGUpO1xuICAgICAgICAgICRwYXJlbnQub25lKCd0cmFuc2l0aW9uZW5kJywgeyAndG9wRWRnZSc6ICR0b3BFZGdlIH0sIHRoaXMuSGlkZUZpcnN0UGFyZW50RW5kLmJpbmQodGhpcykpO1xuICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBhbmNlc3RvcnMgYW5kIHNpYmxpbmdzXG4gICAgICAgICAgdGhpcy5zaG93UGFyZW50KCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXNcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRMb2FkaW5nKCR0b3BFZGdlKSkge1xuICAgICAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgIHZhciB1cmwgPSAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnBhcmVudCkgPyBvcHRzLmFqYXhVUkwucGFyZW50KGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnBhcmVudCArICRub2RlWzBdLmlkO1xuICAgICAgICAgIHRoaXMubG9hZE5vZGVzKCdwYXJlbnQnLCB1cmwsICR0b3BFZGdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBib3R0b21FZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdmFyICRib3R0b21FZGdlID0gJChldmVudC50YXJnZXQpO1xuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICB2YXIgY2hpbGRyZW5TdGF0ZSA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKTtcbiAgICAgIGlmIChjaGlsZHJlblN0YXRlLmV4aXN0KSB7XG4gICAgICAgIHZhciAkY2hpbGRyZW4gPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICBpZiAoJGNoaWxkcmVuLmZpbmQoJy5zbGlkaW5nJykubGVuZ3RoKSB7IHJldHVybjsgfVxuICAgICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgICBpZiAoY2hpbGRyZW5TdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgdGhpcy5oaWRlQ2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xuICAgICAgICAgIHRoaXMuc2hvd0NoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRMb2FkaW5nKCRib3R0b21FZGdlKSkge1xuICAgICAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgIHZhciB1cmwgPSAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmNoaWxkcmVuKSA/IG9wdHMuYWpheFVSTC5jaGlsZHJlbihldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5jaGlsZHJlbiArICRub2RlWzBdLmlkO1xuICAgICAgICAgIHRoaXMubG9hZE5vZGVzKCdjaGlsZHJlbicsIHVybCwgJGJvdHRvbUVkZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGhFZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdmFyICRoRWRnZSA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgIHZhciAkbm9kZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgc2libGluZ3NTdGF0ZSA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKTtcbiAgICAgIGlmIChzaWJsaW5nc1N0YXRlLmV4aXN0KSB7XG4gICAgICAgIHZhciAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIGlmICgkc2libGluZ3MuZmluZCgnLnNsaWRpbmcnKS5sZW5ndGgpIHsgcmV0dXJuOyB9XG4gICAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCkge1xuICAgICAgICAgIHZhciAkcHJldlNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldigpO1xuICAgICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICAgIGlmICgkaEVkZ2UuaXMoJy5sZWZ0RWRnZScpKSB7XG4gICAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncygkbm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzaWJsaW5nc1N0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3MoJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbG9hZCB0aGUgbmV3IHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICBpZiAodGhpcy5zdGFydExvYWRpbmcoJGhFZGdlKSkge1xuICAgICAgICAgIHZhciBub2RlSWQgPSAkbm9kZVswXS5pZDtcbiAgICAgICAgICB2YXIgdXJsID0gKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykuZXhpc3QpID9cbiAgICAgICAgICAgICgkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnNpYmxpbmdzKSA/IG9wdHMuYWpheFVSTC5zaWJsaW5ncyhldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5zaWJsaW5ncyArIG5vZGVJZCkgOlxuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuZmFtaWxpZXMpID8gb3B0cy5hamF4VVJMLmZhbWlsaWVzKGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLmZhbWlsaWVzICsgbm9kZUlkKTtcbiAgICAgICAgICB0aGlzLmxvYWROb2Rlcygnc2libGluZ3MnLCB1cmwsICRoRWRnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgZXhwYW5kVk5vZGVzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LmRhdGEudk5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgfSxcbiAgICAvL1xuICAgIGNvbGxhcHNlVk5vZGVzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LmRhdGEudk5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJykuY2xvc2VzdCgndWwnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgfSxcbiAgICAvLyBldmVudCBoYW5kbGVyIGZvciB0b2dnbGUgYnV0dG9ucyBpbiBIeWJyaWQoaG9yaXpvbnRhbCArIHZlcnRpY2FsKSBPcmdDaGFydFxuICAgIHRvZ2dsZVZOb2RlczogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJHRvZ2dsZUJ0biA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgIHZhciAkZGVzY1dyYXBwZXIgPSAkdG9nZ2xlQnRuLnBhcmVudCgpLm5leHQoKTtcbiAgICAgIHZhciAkZGVzY2VuZGFudHMgPSAkZGVzY1dyYXBwZXIuZmluZCgnLm5vZGUnKTtcbiAgICAgIHZhciAkY2hpbGRyZW4gPSAkZGVzY1dyYXBwZXIuY2hpbGRyZW4oKS5jaGlsZHJlbignLm5vZGUnKTtcbiAgICAgIGlmICgkY2hpbGRyZW4uaXMoJy5zbGlkaW5nJykpIHsgcmV0dXJuOyB9XG4gICAgICAkdG9nZ2xlQnRuLnRvZ2dsZUNsYXNzKCdmYS1wbHVzLXNxdWFyZSBmYS1taW51cy1zcXVhcmUnKTtcbiAgICAgIGlmICgkZGVzY2VuZGFudHMuZXEoMCkuaXMoJy5zbGlkZS11cCcpKSB7XG4gICAgICAgICRkZXNjV3JhcHBlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMucmVwYWludCgkY2hpbGRyZW4uZ2V0KDApKTtcbiAgICAgICAgJGNoaWxkcmVuLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAndk5vZGVzJzogJGNoaWxkcmVuIH0sIHRoaXMuZXhwYW5kVk5vZGVzRW5kKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRkZXNjZW5kYW50cy5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3ZOb2Rlcyc6ICRkZXNjZW5kYW50cyB9LCB0aGlzLmNvbGxhcHNlVk5vZGVzRW5kKTtcbiAgICAgICAgJGRlc2NlbmRhbnRzLmZpbmQoJy50b2dnbGVCdG4nKS5yZW1vdmVDbGFzcygnZmEtbWludXMtc3F1YXJlJykuYWRkQ2xhc3MoJ2ZhLXBsdXMtc3F1YXJlJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGNyZWF0ZUdob3N0Tm9kZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGVEaXYgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgIHZhciBvcmlnRXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xuICAgICAgdmFyIGlzRmlyZWZveCA9IC9maXJlZm94Ly50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKGlzRmlyZWZveCkge1xuICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvaHRtbCcsICdoYWNrIGZvciBmaXJlZm94Jyk7XG4gICAgICB9XG4gICAgICB2YXIgZ2hvc3ROb2RlLCBub2RlQ292ZXI7XG4gICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5naG9zdC1ub2RlJykpIHtcbiAgICAgICAgZ2hvc3ROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gICAgICAgIGdob3N0Tm9kZS5jbGFzc0xpc3QuYWRkKCdnaG9zdC1ub2RlJyk7XG4gICAgICAgIG5vZGVDb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7XG4gICAgICAgIGdob3N0Tm9kZS5hcHBlbmRDaGlsZChub2RlQ292ZXIpO1xuICAgICAgICAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5hcHBlbmQoZ2hvc3ROb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdob3N0Tm9kZSA9ICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNoaWxkcmVuKCcuZ2hvc3Qtbm9kZScpLmdldCgwKTtcbiAgICAgICAgbm9kZUNvdmVyID0gJChnaG9zdE5vZGUpLmNoaWxkcmVuKCkuZ2V0KDApO1xuICAgICAgfVxuICAgICAgdmFyIHRyYW5zVmFsdWVzID0gJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY3NzKCd0cmFuc2Zvcm0nKS5zcGxpdCgnLCcpO1xuICAgICAgdmFyIHNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQoKG9wdHMuZGlyZWN0aW9uID09PSAndDJiJyB8fCBvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpID8gdHJhbnNWYWx1ZXNbMF0uc2xpY2UodHJhbnNWYWx1ZXNbMF0uaW5kZXhPZignKCcpICsgMSkgOiB0cmFuc1ZhbHVlc1sxXSkpO1xuICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSk7XG4gICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAkbm9kZURpdi5vdXRlckhlaWdodChmYWxzZSkpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneCcsNSAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3knLDUgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd3aWR0aCcsIDEyMCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDQwICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncngnLCA0ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncnknLCA0ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgMSAqIHNjYWxlKTtcbiAgICAgIHZhciB4T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgIHZhciB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2wycicpIHtcbiAgICAgICAgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ3IybCcpIHtcbiAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0Jykge1xuICAgICAgICB4T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICB5T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJIZWlnaHQoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0ZpcmVmb3gpIHsgLy8gaGFjayBmb3Igb2xkIHZlcnNpb24gb2YgRmlyZWZveCg8IDQ4LjApXG4gICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XG4gICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdyZ2IoMTkxLCAwLCAwKScpO1xuICAgICAgICB2YXIgZ2hvc3ROb2RlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBnaG9zdE5vZGVXcmFwcGVyLnNyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwnICsgKG5ldyBYTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKGdob3N0Tm9kZSk7XG4gICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZVdyYXBwZXIsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgZmlsdGVyQWxsb3dlZERyb3BOb2RlczogZnVuY3Rpb24gKCRkcmFnZ2VkKSB7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgIHZhciAkZHJhZ1pvbmUgPSAkZHJhZ2dlZC5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLmVxKDApLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICB2YXIgJGRyYWdIaWVyID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5maW5kKCcubm9kZScpO1xuICAgICAgdGhpcy4kY2hhcnQuZGF0YSgnZHJhZ2dlZCcsICRkcmFnZ2VkKVxuICAgICAgICAuZmluZCgnLm5vZGUnKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgbm9kZSkge1xuICAgICAgICAgIGlmICgkZHJhZ0hpZXIuaW5kZXgobm9kZSkgPT09IC0xKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKCRkcmFnZ2VkLCAkZHJhZ1pvbmUsICQobm9kZSkpKSB7XG4gICAgICAgICAgICAgICAgJChub2RlKS5hZGRDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgJChub2RlKS5hZGRDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICBkcmFnc3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIC8vIGlmIHVzZXJzIGVuYWJsZSB6b29tIG9yIGRpcmVjdGlvbiBvcHRpb25zXG4gICAgICBpZiAodGhpcy4kY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKSAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlR2hvc3ROb2RlKGV2ZW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZmlsdGVyQWxsb3dlZERyb3BOb2RlcygkKGV2ZW50LnRhcmdldCkpO1xuICAgIH0sXG4gICAgLy9cbiAgICBkcmFnb3ZlckhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghJChldmVudC5kZWxlZ2F0ZVRhcmdldCkuaXMoJy5hbGxvd2VkRHJvcCcpKSB7XG4gICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGRyYWdlbmRIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGNoYXJ0LmZpbmQoJy5hbGxvd2VkRHJvcCcpLnJlbW92ZUNsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgIH0sXG4gICAgLy9cbiAgICBkcm9wSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJGRyb3Bab25lID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICB2YXIgJGRyYWdnZWQgPSB0aGlzLiRjaGFydC5kYXRhKCdkcmFnZ2VkJyk7XG4gICAgICB2YXIgJGRyYWdab25lID0gJGRyYWdnZWQuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5lcSgwKS5jaGlsZHJlbigpO1xuICAgICAgdmFyIGRyb3BFdmVudCA9ICQuRXZlbnQoJ25vZGVkcm9wLm9yZ2NoYXJ0Jyk7XG4gICAgICB0aGlzLiRjaGFydC50cmlnZ2VyKGRyb3BFdmVudCwgeyAnZHJhZ2dlZE5vZGUnOiAkZHJhZ2dlZCwgJ2RyYWdab25lJzogJGRyYWdab25lLmNoaWxkcmVuKCksICdkcm9wWm9uZSc6ICRkcm9wWm9uZSB9KTtcbiAgICAgIGlmIChkcm9wRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gZmlyc3RseSwgZGVhbCB3aXRoIHRoZSBoaWVyYXJjaHkgb2YgZHJvcCB6b25lXG4gICAgICBpZiAoISRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkubGVuZ3RoKSB7IC8vIGlmIHRoZSBkcm9wIHpvbmUgaXMgYSBsZWFmIG5vZGVcbiAgICAgICAgJGRyb3Bab25lLmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXG4gICAgICAgICAgLnBhcmVudCgpLmF0dHIoJ2NvbHNwYW4nLCAyKVxuICAgICAgICAgIC5wYXJlbnQoKS5hZnRlcignPHRyIGNsYXNzPVwibGluZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+J1xuICAgICAgICAgICsgJzx0ciBjbGFzcz1cImxpbmVzXCI+PHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPjwvdGQ+PC90cj4nXG4gICAgICAgICAgKyAnPHRyIGNsYXNzPVwibm9kZXNcIj48L3RyPicpXG4gICAgICAgICAgLnNpYmxpbmdzKCc6bGFzdCcpLmFwcGVuZCgkZHJhZ2dlZC5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5yZW1vdmUoKS5lbmQoKS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBkcm9wQ29sc3BhbiA9IHBhcnNlSW50KCRkcm9wWm9uZS5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJykpICsgMjtcbiAgICAgICAgdmFyIGhvcml6b250YWxFZGdlcyA9ICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nO1xuICAgICAgICAkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5uZXh0KCkuYWRkQmFjaygpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyb3BDb2xzcGFuKTtcbiAgICAgICAgaWYgKCEkZHJhZ2dlZC5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAkZHJhZ2dlZC5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcbiAgICAgICAgfVxuICAgICAgICAkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmVxKDEpLmNoaWxkcmVuKCc6bGFzdCcpLmJlZm9yZSgnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj48L3RkPicpXG4gICAgICAgICAgLmVuZCgpLm5leHQoKS5hcHBlbmQoJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKSk7XG4gICAgICAgIHZhciAkZHJvcFNpYnMgPSAkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgaWYgKCRkcm9wU2licy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAkZHJvcFNpYnMuYXBwZW5kKGhvcml6b250YWxFZGdlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIHNlY29uZGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcmFnZ2VkIG5vZGVcbiAgICAgIHZhciBkcmFnQ29sc3BhbiA9IHBhcnNlSW50KCRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJykpO1xuICAgICAgaWYgKGRyYWdDb2xzcGFuID4gMikge1xuICAgICAgICAkZHJhZ1pvbmUuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcbiAgICAgICAgICAucGFyZW50KCkubmV4dCgpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcbiAgICAgICAgICAuZW5kKCkubmV4dCgpLmNoaWxkcmVuKCkuc2xpY2UoMSwgMykucmVtb3ZlKCk7XG4gICAgICAgIHZhciAkZHJhZ1NpYnMgPSAkZHJhZ1pvbmUucGFyZW50KCkuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgaWYgKCRkcmFnU2licy5sZW5ndGggPT09MSkge1xuICAgICAgICAgICRkcmFnU2licy5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGRyYWdab25lLnJlbW92ZUF0dHIoJ2NvbHNwYW4nKVxuICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXG4gICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBjcmVhdGUgbm9kZVxuICAgIGNyZWF0ZU5vZGU6IGZ1bmN0aW9uIChub2RlRGF0YSwgbGV2ZWwsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGlmICghbm9kZURhdGEuY2hpbGRyZW4pIHsgbm9kZURhdGEuY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgJC5lYWNoKG5vZGVEYXRhLmNoaWxkcmVuLCBmdW5jdGlvbiAoaW5kZXgsIGNoaWxkKSB7XG4gICAgICAgIGNoaWxkLnBhcmVudElkID0gbm9kZURhdGEuaWQ7XG4gICAgICB9KTtcbiAgICAgIHZhciBkdGQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAvLyBjb25zdHJ1Y3QgdGhlIGNvbnRlbnQgb2Ygbm9kZVxuICAgICAgdmFyICRub2RlRGl2ID0gJCgnPGRpdicgKyAob3B0cy5kcmFnZ2FibGUgPyAnIGRyYWdnYWJsZT1cInRydWVcIicgOiAnJykgKyAobm9kZURhdGFbb3B0cy5ub2RlSWRdID8gJyBpZD1cIicgKyBub2RlRGF0YVtvcHRzLm5vZGVJZF0gKyAnXCInIDogJycpICsgKG5vZGVEYXRhLnBhcmVudElkID8gJyBkYXRhLXBhcmVudD1cIicgKyBub2RlRGF0YS5wYXJlbnRJZCArICdcIicgOiAnJykgKyAnPicpXG4gICAgICAgIC5hZGRDbGFzcygnbm9kZSAnICsgKG5vZGVEYXRhLmNsYXNzTmFtZSB8fCAnJykgKyAgKGxldmVsID49IG9wdHMuZGVwdGggPyAnIHNsaWRlLXVwJyA6ICcnKSk7XG4gICAgICBpZiAob3B0cy5ub2RlVGVtcGxhdGUpIHtcbiAgICAgICAgJG5vZGVEaXYuYXBwZW5kKG9wdHMubm9kZVRlbXBsYXRlKG5vZGVEYXRhKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ0aXRsZVwiPicgKyBub2RlRGF0YVtvcHRzLm5vZGVUaXRsZV0gKyAnPC9kaXY+JylcbiAgICAgICAgICAuYXBwZW5kKHR5cGVvZiBvcHRzLm5vZGVDb250ZW50ICE9PSAndW5kZWZpbmVkJyA/ICc8ZGl2IGNsYXNzPVwiY29udGVudFwiPicgKyAobm9kZURhdGFbb3B0cy5ub2RlQ29udGVudF0gfHwgJycpICsgJzwvZGl2PicgOiAnJyk7XG4gICAgICB9XG4gICAgICAvLyBhcHBlbmQgNCBkaXJlY3Rpb24gYXJyb3dzIG9yIGV4cGFuZC9jb2xsYXBzZSBidXR0b25zXG4gICAgICB2YXIgZmxhZ3MgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJyc7XG4gICAgICBpZiAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID4gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgIGlmICgobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xuICAgICAgICAgIHZhciBpY29uID0gbGV2ZWwgKyAxICA+PSBvcHRzLmRlcHRoID8gJ3BsdXMnIDogJ21pbnVzJztcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwidG9nZ2xlQnRuIGZhIGZhLScgKyBpY29uICsgJy1zcXVhcmVcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChOdW1iZXIoZmxhZ3Muc3Vic3RyKDAsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoTnVtYmVyKGZsYWdzLnN1YnN0cigxLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT4nICtcbiAgICAgICAgICAgICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJy50aXRsZScpLnByZXBlbmQoJzxpIGNsYXNzPVwiZmEgJysgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2xcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJG5vZGVEaXYub24oJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScsIHRoaXMubm9kZUVudGVyTGVhdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgdGhpcy5ub2RlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy50b3BFZGdlJywgeyAnbm9kZURhdGEnOiBub2RlRGF0YSB9LCB0aGlzLnRvcEVkZ2VDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLmJvdHRvbUVkZ2UnLCB7ICdub2RlRGF0YSc6IG5vZGVEYXRhIH0sIHRoaXMuYm90dG9tRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcubGVmdEVkZ2UsIC5yaWdodEVkZ2UnLCB7ICdub2RlRGF0YSc6IG5vZGVEYXRhIH0sIHRoaXMuaEVkZ2VDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvZ2dsZUJ0bicsIHRoaXMudG9nZ2xlVk5vZGVzLmJpbmQodGhpcykpO1xuXG4gICAgICBpZiAob3B0cy5kcmFnZ2FibGUpIHtcbiAgICAgICAgJG5vZGVEaXYub24oJ2RyYWdzdGFydCcsIHRoaXMuZHJhZ3N0YXJ0SGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAub24oJ2RyYWdvdmVyJywgdGhpcy5kcmFnb3ZlckhhbmRsZXIuYmluZCh0aGlzKSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgdGhpcy5kcmFnZW5kSGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAub24oJ2Ryb3AnLCB0aGlzLmRyb3BIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgfVxuICAgICAgLy8gYWxsb3cgdXNlciB0byBhcHBlbmQgZG9tIG1vZGlmaWNhdGlvbiBhZnRlciBmaW5pc2hpbmcgbm9kZSBjcmVhdGUgb2Ygb3JnY2hhcnRcbiAgICAgIGlmIChvcHRzLmNyZWF0ZU5vZGUpIHtcbiAgICAgICAgb3B0cy5jcmVhdGVOb2RlKCRub2RlRGl2LCBub2RlRGF0YSk7XG4gICAgICB9XG4gICAgICBkdGQucmVzb2x2ZSgkbm9kZURpdik7XG4gICAgICByZXR1cm4gZHRkLnByb21pc2UoKTtcbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGJ1aWxkIHRoZSB0cmVlXG4gICAgYnVpbGRIaWVyYXJjaHk6IGZ1bmN0aW9uICgkYXBwZW5kVG8sIG5vZGVEYXRhLCBsZXZlbCwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbm9kZVdyYXBwZXI7XG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIG5vZGVcbiAgICAgIHZhciAkY2hpbGROb2RlcyA9IG5vZGVEYXRhLmNoaWxkcmVuO1xuICAgICAgdmFyIGhhc0NoaWxkcmVuID0gJGNoaWxkTm9kZXMgPyAkY2hpbGROb2Rlcy5sZW5ndGggOiBmYWxzZTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsTm9kZSA9IChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID4gMSkgeyAvLyBpZiBub2RlRGF0YSBoYXMgbmVzdGVkIHN0cnVjdHVyZVxuICAgICAgICAkbm9kZVdyYXBwZXIgPSBpc1ZlcnRpY2FsTm9kZSA/ICRhcHBlbmRUbyA6ICQoJzx0YWJsZT4nKTtcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgICRhcHBlbmRUby5hcHBlbmQoJG5vZGVXcmFwcGVyKTtcbiAgICAgICAgfVxuICAgICAgICAkLndoZW4odGhpcy5jcmVhdGVOb2RlKG5vZGVEYXRhLCBsZXZlbCwgb3B0cykpXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCRub2RlRGl2KSB7XG4gICAgICAgICAgaWYgKGlzVmVydGljYWxOb2RlKSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlRGl2KTtcbiAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCQoJzx0ci8+JykuYXBwZW5kKCQoJzx0ZCcgKyAoaGFzQ2hpbGRyZW4gPyAnIGNvbHNwYW49XCInICsgJGNoaWxkTm9kZXMubGVuZ3RoICogMiArICdcIicgOiAnJykgKyAnPjwvdGQ+JykuYXBwZW5kKCRub2RlRGl2KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0IG5vZGUnKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5mZXJpb3Igbm9kZXMgYW5kIGNvbm5lY3Rpb25nIGxpbmVzXG4gICAgICBpZiAoaGFzQ2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPT09IDEpIHsgLy8gaWYgbm9kZURhdGEgaXMganVzdCBhbiBhcnJheVxuICAgICAgICAgICRub2RlV3JhcHBlciA9ICRhcHBlbmRUbztcbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNIaWRkZW4gPSAobGV2ZWwgKyAxID49IG9wdHMuZGVwdGggfHwgbm9kZURhdGEuY29sbGFwc2VkKSA/ICcgaGlkZGVuJyA6ICcnO1xuICAgICAgICB2YXIgaXNWZXJ0aWNhbExheWVyID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIC8vIGRyYXcgdGhlIGxpbmUgY2xvc2UgdG8gcGFyZW50IG5vZGVcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lcyBjbG9zZSB0byBjaGlsZHJlbiBub2Rlc1xuICAgICAgICB2YXIgbGluZUxheWVyID0gJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPjwvdGQ+JztcbiAgICAgICAgZm9yICh2YXIgaT0xOyBpPCRjaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPjwvdGQ+JztcbiAgICAgICAgfVxuICAgICAgICBsaW5lTGF5ZXIgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+PC90ZD48L3RyPic7XG4gICAgICAgIHZhciAkbm9kZUxheWVyO1xuICAgICAgICBpZiAoaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgICAgJG5vZGVMYXllciA9ICQoJzx1bD4nKTtcbiAgICAgICAgICBpZiAoaXNIaWRkZW4gJiYgb3B0cy5kZXB0aCArIDEgIT09IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICAgICAgJG5vZGVMYXllci5hZGRDbGFzcyhpc0hpZGRlbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChsZXZlbCArIDIgPT09IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgnPHRyIGNsYXNzPVwidmVydGljYWxOb2RlcycgKyBpc0hpZGRlbiArICdcIj48dGQ+PC90ZD48L3RyPicpXG4gICAgICAgICAgICAgIC5maW5kKCcudmVydGljYWxOb2RlcycpLmNoaWxkcmVuKCkuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZUxheWVyID0gJCgnPHRyIGNsYXNzPVwibm9kZXMnICsgaXNIaWRkZW4gKyAnXCI+Jyk7XG4gICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZChsaW5lTGF5ZXIpLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWN1cnNlIHRocm91Z2ggY2hpbGRyZW4gbm9kZXNcbiAgICAgICAgJC5lYWNoKCRjaGlsZE5vZGVzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgJG5vZGVDZWxsID0gaXNWZXJ0aWNhbExheWVyID8gJCgnPGxpPicpIDogJCgnPHRkIGNvbHNwYW49XCIyXCI+Jyk7XG4gICAgICAgICAgJG5vZGVMYXllci5hcHBlbmQoJG5vZGVDZWxsKTtcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRub2RlQ2VsbCwgdGhpcywgbGV2ZWwgKyAxLCBvcHRzLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIGNoaWxkIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZENoaWxkTm9kZTogZnVuY3Rpb24gKCRhcHBlbmRUbywgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJGFwcGVuZFRvLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBkYXRhID0gbm9kZURhdGEuY2hpbGRyZW4gfHwgbm9kZURhdGEuc2libGluZ3M7XG4gICAgICAkYXBwZW5kVG8uZmluZCgndGQ6Zmlyc3QnKS5hdHRyKCdjb2xzcGFuJywgZGF0YS5sZW5ndGggKiAyKTtcbiAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGFwcGVuZFRvLCB7ICdjaGlsZHJlbic6IGRhdGEgfSwgMCwgb3B0cywgY2FsbGJhY2spO1xuICAgIH0sXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcbiAgICBhZGRDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlLCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgrK2NvdW50ID09PSBkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgIGlmICghJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkbm9kZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEkbm9kZS5maW5kKCcuc3ltYm9sJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhhdC5zaG93Q2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBwYXJlbnQgbm9kZSBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRQYXJlbnROb2RlOiBmdW5jdGlvbiAoJGN1cnJlbnRSb290LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkdGFibGUgPSAkKCc8dGFibGU+Jyk7XG4gICAgICBub2RlRGF0YS5yZWxhdGlvbnNoaXAgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJzAwMSc7XG4gICAgICAkLndoZW4odGhpcy5jcmVhdGVOb2RlKG5vZGVEYXRhLCAwLCBvcHRzIHx8ICRjdXJyZW50Um9vdC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJykpKVxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJCgnPHRyIGNsYXNzPVwiaGlkZGVuXCI+JykuYXBwZW5kKCQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpLmFwcGVuZCgkbm9kZURpdi5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpKSkpO1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzIGhpZGRlblwiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgICAgICAgICB2YXIgbGluZXNSb3cgPSAnPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPjwvdGQ+JztcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj4nICsgbGluZXNSb3cgKyAnPC90cj4nKTtcbiAgICAgICAgICB2YXIgJGNoYXJ0ID0gdGhhdC4kY2hhcnQ7XG4gICAgICAgICAgJGNoYXJ0LnByZXBlbmQoJHRhYmxlKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0YWJsZTpmaXJzdCcpLmFwcGVuZCgnPHRyIGNsYXNzPVwibm9kZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48L3RkPjwvdHI+JylcbiAgICAgICAgICAgIC5jaGlsZHJlbigndHI6bGFzdCcpLmNoaWxkcmVuKCkuYXBwZW5kKCRjaGFydC5jaGlsZHJlbigndGFibGUnKS5sYXN0KCkpO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY3JlYXRlIHBhcmVudCBub2RlJyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcbiAgICBhZGRQYXJlbnQ6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMuYnVpbGRQYXJlbnROb2RlKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudG9wRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICRjdXJyZW50Um9vdC5jaGlsZHJlbignLnRpdGxlJykuYWZ0ZXIoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNob3dQYXJlbnQoJGN1cnJlbnRSb290KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc3Vic2VxdWVudCBwcm9jZXNzaW5nIG9mIGJ1aWxkIHNpYmxpbmcgbm9kZXNcbiAgICBjb21wbGVtZW50TGluZTogZnVuY3Rpb24gKCRvbmVTaWJsaW5nLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpIHtcbiAgICAgIHZhciBsaW5lcyA9ICcnO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGlzdGluZ1NpYmxpZ0NvdW50OyBpKyspIHtcbiAgICAgICAgbGluZXMgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj48L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+PC90ZD4nO1xuICAgICAgfVxuICAgICAgJG9uZVNpYmxpbmcucGFyZW50KCkucHJldkFsbCgndHI6Z3QoMCknKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKVxuICAgICAgICAuZW5kKCkubmV4dCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5hZnRlcihsaW5lcyk7XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRTaWJsaW5nTm9kZTogZnVuY3Rpb24gKCRub2RlQ2hhcnQsIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIG5ld1NpYmxpbmdDb3VudCA9IG5vZGVEYXRhLnNpYmxpbmdzID8gbm9kZURhdGEuc2libGluZ3MubGVuZ3RoIDogbm9kZURhdGEuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgdmFyIGV4aXN0aW5nU2libGlnQ291bnQgPSAkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpID8gJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLmNoaWxkcmVuKCkubGVuZ3RoIDogMTtcbiAgICAgIHZhciBzaWJsaW5nQ291bnQgPSBleGlzdGluZ1NpYmxpZ0NvdW50ICsgbmV3U2libGluZ0NvdW50O1xuICAgICAgdmFyIGluc2VydFBvc3Rpb24gPSAoc2libGluZ0NvdW50ID4gMSkgPyBNYXRoLmZsb29yKHNpYmxpbmdDb3VudC8yIC0gMSkgOiAwO1xuICAgICAgLy8ganVzdCBidWlsZCB0aGUgc2libGluZyBub2RlcyBmb3IgdGhlIHNwZWNpZmljIG5vZGVcbiAgICAgIGlmICgkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpKSB7XG4gICAgICAgIHZhciAkcGFyZW50ID0gJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnByZXZBbGwoJ3RyOmxhc3QnKTtcbiAgICAgICAgJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnByZXZBbGwoJ3RyOmx0KDIpJykucmVtb3ZlKCk7XG4gICAgICAgIHZhciBjaGlsZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5idWlsZENoaWxkTm9kZSgkbm9kZUNoYXJ0LnBhcmVudCgpLmNsb3Nlc3QoJ3RhYmxlJyksIG5vZGVEYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoKytjaGlsZENvdW50ID09PSBuZXdTaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICAgIHZhciAkc2libGluZ1RkcyA9ICRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKS5jaGlsZHJlbigndHI6bGFzdCcpLmNoaWxkcmVuKCd0ZCcpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2libGlnQ291bnQgPiAxKSB7XG4gICAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJHNpYmxpbmdUZHMuZXEoMCkuYmVmb3JlKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS5zaWJsaW5ncygpLmFkZEJhY2soKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCk7XG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgMSk7XG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLm5vdCgnOmVxKCcgKyBpbnNlcnRQb3N0aW9uICsgMSArICcpJykuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLXJpZ2h0JylcbiAgICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHsgLy8gYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgYW5kIHBhcmVudCBub2RlIGZvciB0aGUgc3BlY2lmaWMgbmRvZVxuICAgICAgICB2YXIgbm9kZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJy5vcmdjaGFydCcpLCBub2RlRGF0YSwgMCwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrbm9kZUNvdW50ID09PSBzaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJG5vZGVDaGFydC5uZXh0KCkuY2hpbGRyZW4oJ3RyOmxhc3QnKVxuICAgICAgICAgICAgICAuY2hpbGRyZW4oKS5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKVxuICAgICAgICAgICAgICAuYXBwZW5kKCRub2RlQ2hhcnQpKSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmVxKDApLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1kb3duJyk7XG4gICAgICAgICAgICAkbm9kZUNoYXJ0LnBhcmVudCgpLnNpYmxpbmdzKCkuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgICAgIC5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1yaWdodCcpXG4gICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zbGljZShpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGFkZFNpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMuYnVpbGRTaWJsaW5nTm9kZSgkbm9kZS5jbG9zZXN0KCd0YWJsZScpLCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnLCB0cnVlKTtcbiAgICAgICAgaWYgKCEkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykuYWZ0ZXIoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICByZW1vdmVOb2RlczogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgJHBhcmVudCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XG4gICAgICB2YXIgJHNpYnMgPSAkcGFyZW50LnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoJHBhcmVudC5pcygndGQnKSkge1xuICAgICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLmV4aXN0KSB7XG4gICAgICAgICAgJHNpYnMuZXEoMikuY2hpbGRyZW4oJy50b3BMaW5lOmx0KDIpJykucmVtb3ZlKCk7XG4gICAgICAgICAgJHNpYnMuc2xpY2UoMCwgMikuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgJHNpYnMuZXEoMikuY2hpbGRyZW4oKS5sZW5ndGgpO1xuICAgICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHNpYnMuZXEoMCkuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcbiAgICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXG4gICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2libGluZ3MoKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHBhcmVudC5hZGQoJHBhcmVudC5zaWJsaW5ncygpKS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgZXhwb3J0OiBmdW5jdGlvbiAoZXhwb3J0RmlsZW5hbWUsIGV4cG9ydEZpbGVleHRlbnNpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGV4cG9ydEZpbGVuYW1lID0gKHR5cGVvZiBleHBvcnRGaWxlbmFtZSAhPT0gJ3VuZGVmaW5lZCcpID8gIGV4cG9ydEZpbGVuYW1lIDogdGhpcy5vcHRpb25zLmV4cG9ydEZpbGVuYW1lO1xuICAgICAgZXhwb3J0RmlsZWV4dGVuc2lvbiA9ICh0eXBlb2YgZXhwb3J0RmlsZWV4dGVuc2lvbiAhPT0gJ3VuZGVmaW5lZCcpID8gIGV4cG9ydEZpbGVleHRlbnNpb24gOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZWV4dGVuc2lvbjtcbiAgICAgIGlmICgkKHRoaXMpLmNoaWxkcmVuKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgJGNoYXJ0Q29udGFpbmVyID0gdGhpcy4kY2hhcnRDb250YWluZXI7XG4gICAgICB2YXIgJG1hc2sgPSAkY2hhcnRDb250YWluZXIuZmluZCgnLm1hc2snKTtcbiAgICAgIGlmICghJG1hc2subGVuZ3RoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtYXNrXCI+PGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+PC9kaXY+Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbWFzay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICB2YXIgc291cmNlQ2hhcnQgPSAkY2hhcnRDb250YWluZXIuYWRkQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpLmZpbmQoJy5vcmdjaGFydDpub3QoXCIuaGlkZGVuXCIpJykuZ2V0KDApO1xuICAgICAgdmFyIGZsYWcgPSB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAnbDJyJyB8fCB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAncjJsJztcbiAgICAgIGh0bWwyY2FudmFzKHNvdXJjZUNoYXJ0LCB7XG4gICAgICAgICd3aWR0aCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQgOiBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCxcbiAgICAgICAgJ2hlaWdodCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCA6IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCxcbiAgICAgICAgJ29uY2xvbmUnOiBmdW5jdGlvbiAoY2xvbmVEb2MpIHtcbiAgICAgICAgICAkKGNsb25lRG9jKS5maW5kKCcuY2FudmFzQ29udGFpbmVyJykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJylcbiAgICAgICAgICAgIC5maW5kKCcub3JnY2hhcnQ6bm90KFwiLmhpZGRlblwiKTpmaXJzdCcpLmNzcygndHJhbnNmb3JtJywgJycpO1xuICAgICAgICB9LFxuICAgICAgICAnb25yZW5kZXJlZCc6IGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAkY2hhcnRDb250YWluZXIuZmluZCgnLm1hc2snKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgaWYgKGV4cG9ydEZpbGVleHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ3BkZicpIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB7fTtcbiAgICAgICAgICAgIHZhciBkb2NXaWR0aCA9IE1hdGguZmxvb3IoY2FudmFzLndpZHRoICogMC4yNjQ2KTtcbiAgICAgICAgICAgIHZhciBkb2NIZWlnaHQgPSBNYXRoLmZsb29yKGNhbnZhcy5oZWlnaHQgKiAwLjI2NDYpO1xuICAgICAgICAgICAgaWYgKGRvY1dpZHRoID4gZG9jSGVpZ2h0KSB7XG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERignbCcsICdtbScsIFtkb2NXaWR0aCwgZG9jSGVpZ2h0XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkb2MgPSBuZXcganNQREYoJ3AnLCAnbW0nLCBbZG9jSGVpZ2h0LCBkb2NXaWR0aF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jLmFkZEltYWdlKGNhbnZhcy50b0RhdGFVUkwoKSwgJ3BuZycsIDAsIDApO1xuICAgICAgICAgICAgZG9jLnNhdmUoZXhwb3J0RmlsZW5hbWUgKyAnLnBkZicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgaXNXZWJraXQgPSAnV2Via2l0QXBwZWFyYW5jZScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1xuICAgICAgICAgICAgdmFyIGlzRmYgPSAhIXdpbmRvdy5zaWRlYmFyO1xuICAgICAgICAgICAgdmFyIGlzRWRnZSA9IG5hdmlnYXRvci5hcHBOYW1lID09PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJyB8fCAobmF2aWdhdG9yLmFwcE5hbWUgPT09IFwiTmV0c2NhcGVcIiAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdFZGdlJykgPiAtMSk7XG5cbiAgICAgICAgICAgIGlmICgoIWlzV2Via2l0ICYmICFpc0ZmKSB8fCBpc0VkZ2UpIHtcbiAgICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvci5tc1NhdmVCbG9iKGNhbnZhcy5tc1RvQmxvYigpLCBleHBvcnRGaWxlbmFtZSArICcucG5nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAnLm9jLWRvd25sb2FkLWJ0bicgKyAodGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgdGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJyk7XG4gICAgICAgICAgICAgIGlmICghJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxhIGNsYXNzPVwib2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICdcIidcbiAgICAgICAgICAgICAgICAgICsgJyBkb3dubG9hZD1cIicgKyBleHBvcnRGaWxlbmFtZSArICcucG5nXCI+PC9hPicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5hdHRyKCdocmVmJywgY2FudmFzLnRvRGF0YVVSTCgpKVswXS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAkLmZuLm9yZ2NoYXJ0ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICByZXR1cm4gbmV3IE9yZ0NoYXJ0KHRoaXMsIG9wdHMpLmluaXQoKTtcbiAgfTtcblxufSkpO1xuIl19
