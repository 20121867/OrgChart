"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});if("undefined"!=typeof MutationObserver){var o=new MutationObserver(function(e){o.disconnect();e:for(var t=0;t<e.length;t++)for(var n=0;n<e[t].addedNodes.length;n++)if(e[t].addedNodes[n].classList.contains("orgchart")&&i.options.initCompleted&&"function"==typeof i.options.initCompleted){i.options.initCompleted(a),a.triggerHandler({type:"init.orgchart"});break e}});o.observe(n[0],{childList:!0})}if("object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length){var r=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),i.export()}});n.append(r)}return this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var o=a.split(",");-1===a.indexOf("3d")?(n=parseInt(o[4]),s=parseInt(o[5])):(n=parseInt(o[12]),s=parseInt(o[13]))}var r=0,d=0;if(t.targetTouches){if(1===t.targetTouches.length)r=t.targetTouches[0].pageX-n,d=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else r=t.pageX-n,d=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-r,n=e.targetTouches[0].pageY-d;else if(e.targetTouches.length>1)return}else t=e.pageX-r,n=e.pageY-d;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",o=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(o=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(o=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t[0].id&&(n.id=t[0].id),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){return void 0===this.$chart?"Error: orgchart does not exist":this.$chart.find(".node").length?this.$chart.find(".node")[0].id?this.loopChart(this.$chart):"Error: Nodes of orghcart to be exported must have id attribute!":"Error: nodes do not exist"},getNodeState:function(e,t){var i={};if("parent"===t){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(".nodes")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t&&(i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParent:function(e){var t=e.closest("table").closest("tr").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e);var i=t.slice(1);i.css("visibility","hidden");var n=t.eq(0).find(".node"),s=this.getNodeState(n,"parent").visible;n.length&&n.is(":visible")&&n.addClass("slide slide-down").one("transitionend",function(){n.removeClass("slide"),i.removeAttr("style"),t.addClass("hidden")}),n.length&&s&&this.hideParent(n)},showParent:function(t){var i=this,n=t.closest("table").closest("tr").siblings().removeClass("hidden");n.eq(2).children().slice(1,-1).addClass("hidden");var s=n.eq(0).find(".node")[0];this.repaint(s),e(s).addClass("slide").removeClass("slide-down").one("transitionend",function(){e(s).removeClass("slide"),i.isInAction(t)&&i.switchVerticalArrow(t.children(".topEdge"))})},hideChildren:function(e){var t=this,i=e.closest("tr").siblings();i.last().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1);var n=i.last().find(".node:visible"),s=!!i.last().is(".verticalNodes");if(!s)var a=n.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden");n.addClass("slide slide-up").eq(0).one("transitionend",function(){n.removeClass("slide"),s?i.addClass("hidden"):(a.removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),i.last().find(".verticalNodes").addClass("hidden")),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},showChildren:function(e){var t=this,i=e.closest("tr").siblings(),n=!!i.is(".verticalNodes")?i.removeClass("hidden").find(".node:visible"):i.removeClass("hidden").eq(2).children().find(".node:first");this.repaint(n.get(0)),n.addClass("slide").removeClass("slide-up").eq(0).one("transitionend",function(){n.removeClass("slide"),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},hideSiblings:function(e,t){var i=this,n=e.closest("table").parent();n.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?n.prevAll().find(".node:visible").addClass("slide slide-right"):n.nextAll().find(".node:visible").addClass("slide slide-left"):(n.prevAll().find(".node:visible").addClass("slide slide-right"),n.nextAll().find(".node:visible").addClass("slide slide-left"));var s=n.siblings().find(".slide"),a=s.closest(".nodes").prevAll(".lines").css("visibility","hidden");s.eq(0).one("transitionend",function(){a.removeAttr("style");var o=t?"left"===t?n.prevAll(":not(.hidden)"):n.nextAll(":not(.hidden)"):n.siblings();n.closest(".nodes").prev().children(":not(.hidden)").slice(1,t?2*o.length+1:-1).addClass("hidden"),s.removeClass("slide"),o.find(".node:visible:gt(0)").removeClass("slide-left slide-right").addClass("slide-up").end().find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),i.isInAction(e)&&i.switchHorizontalArrow(e)})},showSiblings:function(t,i){var n=this,s=e();s=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var a=t.closest("table").closest("tr").siblings();if(i?a.eq(2).children(".hidden").slice(0,2*s.length).removeClass("hidden"):a.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){a.removeClass("hidden");var o=a.find(".node")[0];this.repaint(o),e(o).addClass("slide").removeClass("slide-down").one("transitionend",function(){e(this).removeClass("slide")})}s.find(".node:visible").addClass("slide").removeClass("slide-left slide-right").eq(-1).one("transitionend",function(){s.find(".node:visible").removeClass("slide"),n.isInAction(t)&&(n.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})},startLoading:function(t,i,n){var s=i.closest(".orgchart");return(void 0===s.data("inAjax")||!0!==s.data("inAjax"))&&(t.addClass("hidden"),i.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),i.children().not(".spinner").css("opacity",.2),s.data("inAjax",!0),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t,i,n){var s=i.closest("div.orgchart");t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),s.data("inAjax",!1),e(".oc-export-btn"+(""!==n.chartClass?"."+n.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},createNode:function(n,s,a){var o=this;n.children||(n.children=[]),e.each(n.children,function(e,t){t.parentId=n.id});var r=e.Deferred(),d=e("<div"+(a.draggable?' draggable="true"':"")+(n[a.nodeId]?' id="'+n[a.nodeId]+'"':"")+(n.parentId?' data-parent="'+n.parentId+'"':"")+">").addClass("node "+(n.className||"")+(s>=a.depth?" slide-up":""));a.nodeTemplate?d.append(a.nodeTemplate(n)):d.append('<div class="title">'+n[a.nodeTitle]+"</div>").append(void 0!==a.nodeContent?'<div class="content">'+(n[a.nodeContent]||"")+"</div>":"");var l=n.relationship||"";if(a.verticalDepth&&s+2>a.verticalDepth){if(s+1>=a.verticalDepth&&Number(l.substr(2,1))){var c=s+1>=a.depth?"plus":"minus";d.append('<i class="toggleBtn fa fa-'+c+'-square"></i>')}}else Number(l.substr(0,1))&&d.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(l.substr(1,1))&&d.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(l.substr(2,1))&&d.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+a.parentNodeSymbol+' symbol"></i>');return d.on("mouseenter mouseleave",function(t){var i=e(this),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),r=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=o.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=o.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),r.length&&o.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")}),d.on("click",function(t){e(this).closest(".orgchart").find(".focused").removeClass("focused"),e(this).addClass("focused")}),d.on("click",".topEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),r=o.getNodeState(s,"parent");if(r.exist){var d=s.closest("table").closest("tr").siblings(":first").find(".node");if(d.is(".slide"))return;r.visible?(o.hideParent(s),d.one("transitionend",function(){o.isInAction(s)&&(o.switchVerticalArrow(i),o.switchHorizontalArrow(s))})):o.showParent(s)}else{var l=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.parent)?a.ajaxURL.parent(n):a.ajaxURL.parent+l,dataType:"json"}).done(function(t){s.closest(".orgchart").data("inAjax")&&(e.isEmptyObject(t)||o.addParent(s,t,a))}).fail(function(){console.log("Failed to get parent node data")}).always(function(){o.endLoading(i,s,a)})}}),d.on("click",".bottomEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),r=o.getNodeState(s,"children");if(r.exist){if(s.closest("tr").siblings(":last").find(".node:visible").is(".slide"))return;r.visible?o.hideChildren(s):o.showChildren(s)}else{var d=i.parent()[0].id;o.startLoading(i,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(n):a.ajaxURL.children+d,dataType:"json"}).done(function(t,i,n){s.closest(".orgchart").data("inAjax")&&t.children.length&&o.addChildren(s,t,e.extend({},a,{depth:0}))}).fail(function(e,t,i){console.log("Failed to get children nodes data")}).always(function(){o.endLoading(i,s,a)})}}),d.on("click",".toggleBtn",function(t){var i=e(this),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".slide")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),o.repaint(a.get(0)),a.addClass("slide").removeClass("slide-up").eq(0).one("transitionend",function(){a.removeClass("slide")})):(s.addClass("slide slide-up").eq(0).one("transitionend",function(){s.removeClass("slide"),s.closest("ul").addClass("hidden")}),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))}),d.on("click",".leftEdge, .rightEdge",function(t){t.stopPropagation();var i=e(this),s=i.parent(),r=o.getNodeState(s,"siblings");if(r.exist){if(s.closest("table").parent().siblings().find(".node:visible").is(".slide"))return;if(a.toggleSiblingsResp){var d=s.closest("table").parent().prev(),l=s.closest("table").parent().next();i.is(".leftEdge")?d.is(".hidden")?o.showSiblings(s,"left"):o.hideSiblings(s,"left"):l.is(".hidden")?o.showSiblings(s,"right"):o.hideSiblings(s,"right")}else r.visible?o.hideSiblings(s):o.showSiblings(s)}else{var c=i.parent()[0].id,h=o.getNodeState(s,"parent").exist?e.isFunction(a.ajaxURL.siblings)?a.ajaxURL.siblings(n):a.ajaxURL.siblings+c:e.isFunction(a.ajaxURL.families)?a.ajaxURL.families(n):a.ajaxURL.families+c;o.startLoading(i,s,a)&&e.ajax({url:h,dataType:"json"}).done(function(e,t,i){s.closest(".orgchart").data("inAjax")&&(e.siblings||e.children)&&o.addSiblings(s,e,a)}).fail(function(e,t,i){console.log("Failed to get sibling nodes data")}).always(function(){o.endLoading(i,s,a)})}}),a.draggable&&d.on("dragstart",function(n){var s=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());if(o&&s.dataTransfer.setData("text/html","hack for firefox"),"none"!==d.closest(".orgchart").css("transform")){var r,l;i.querySelector(".ghost-node")?(r=d.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),d.closest(".orgchart").append(r));var c=d.closest(".orgchart").css("transform").split(","),h=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?c[0].slice(c[0].indexOf("(")+1):c[1]));r.setAttribute("width",d.outerWidth(!1)),r.setAttribute("height",d.outerHeight(!1)),l.setAttribute("x",5*h),l.setAttribute("y",5*h),l.setAttribute("width",120*h),l.setAttribute("height",40*h),l.setAttribute("rx",4*h),l.setAttribute("ry",4*h),l.setAttribute("stroke-width",1*h);var p=s.offsetX*h,f=s.offsetY*h;if("l2r"===a.direction?(p=s.offsetY*h,f=s.offsetX*h):"r2l"===a.direction?(p=d.outerWidth(!1)-s.offsetY*h,f=s.offsetX*h):"b2t"===a.direction&&(p=d.outerWidth(!1)-s.offsetX*h,f=d.outerHeight(!1)-s.offsetY*h),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var g=i.createElement("img");g.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),s.dataTransfer.setDragImage(g,p,f)}else s.dataTransfer.setDragImage(r,p,f)}var v=e(this),u=v.closest(".nodes").siblings().eq(0).find(".node:first"),b=v.closest("table").find(".node");v.closest(".orgchart").data("dragged",v).find(".node").each(function(t,i){-1===b.index(i)&&(a.dropCriteria?a.dropCriteria(v,u,e(i))&&e(i).addClass("allowedDrop"):e(i).addClass("allowedDrop"))})}).on("dragover",function(t){t.preventDefault(),e(this).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")}).on("dragend",function(t){e(this).closest(".orgchart").find(".allowedDrop").removeClass("allowedDrop")}).on("drop",function(t){var i=e(this),n=i.closest(".orgchart"),s=n.data("dragged");n.find(".allowedDrop").removeClass("allowedDrop");var a=s.closest(".nodes").siblings().eq(0).children();if(i.closest("tr").siblings().length){var o=parseInt(i.parent().attr("colspan"))+2,r='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",o),s.find(".horizontalEdge").length||s.append(r),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>').end().next().append(s.closest("table").parent());var d=s.closest("table").parent().siblings().find(".node:first");1===d.length&&d.append(r)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr><tr class="nodes"></tr>').siblings(":last").append(s.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(a.attr("colspan"));if(l>2){a.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var c=a.parent().siblings(".nodes").children().find(".node:first");1===c.length&&c.find(".horizontalEdge").remove()}else a.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove();n.triggerHandler({type:"nodedropped.orgchart",draggedNode:s,dragZone:a.children(),dropZone:i})}),a.createNode&&a.createNode(d,n),r.resolve(d),r.promise()},buildHierarchy:function(t,i,n,s,a){var o,r=this,d=i.children,l=!!d&&d.length,c=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(o=c?t:e("<table>"),c||t.append(o),e.when(this.createNode(i,n,s)).done(function(e){c?o.append(e):o.append(e.wrap("<tr><td"+(l?' colspan="'+2*d.length+'"':"")+"></td></tr>").closest("tr")),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(o=t);var h=n+1>=s.depth||i.collapsed?" hidden":"",p=!!(s.verticalDepth&&n+2>=s.verticalDepth);p||o.append('<tr class="lines'+h+'"><td colspan="'+2*d.length+'"><div class="downLine"></div></td></tr>');for(var f='<tr class="lines'+h+'"><td class="rightLine">&nbsp;</td>',g=1;g<d.length;g++)f+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';f+='<td class="leftLine">&nbsp;</td></tr>';var v;p?(v=e("<ul>"),h&&v.addClass(h),n+2===s.verticalDepth?o.append('<tr class="verticalNodes'+h+'"><td></td></tr>').find(".verticalNodes").children().append(v):o.append(v)):(v=e('<tr class="nodes'+h+'">'),o.append(f).append(v)),e.each(d,function(){var t=e(p?"<li>":'<td colspan="2">');v.append(t),r.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,o=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(e){o.append(e.removeClass("slide-up").addClass("slide-down").wrap('<tr class="hidden"><td colspan="2"></td></tr>').closest("tr")),o.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');o.append('<tr class="lines hidden"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr>');var t=a.$chart;t.prepend(o).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(t.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),o=i.siblings?i.siblings.length:i.children.length,r=t.parent().is("td")?t.closest("tr").children().length:1,d=r+o,l=d>1?Math.floor(d/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var c=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++c===o){var e=t.parent().closest("table").children("tr:last").children("td");r>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),d,r),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),d,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var h=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++h===d&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),d,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var o=this.$chartContainer,r=o.find(".mask");r.length?r.removeClass("hidden"):o.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var d=o.addClass("canvasContainer").find(".orgchart:visible").get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(d,{width:l?d.clientHeight:d.clientWidth,height:l?d.clientWidth:d.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find(".orgchart:visible:first").css("transform","")},onrendered:function(e){if(o.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var r={},d=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(r=d>l?new jsPDF("l","mm",[d,l]):new jsPDF("p","mm",[l,d])).addImage(e.toDataURL(),"png",0,0),r.save(n+".pdf")}else{var c="WebkitAppearance"in i.documentElement.style,h=!!t.sidebar,p="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!c&&!h||p)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var f=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");o.find(f).length||o.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),o.find(f).attr("href",e.toDataURL())[0].click()}}}}).then(function(){o.removeClass("canvasContainer")},function(){o.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2pxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsIm1vIiwibXV0YXRpb25zIiwiZGlzY29ubmVjdCIsImluaXRUaW1lIiwiaSIsImoiLCJhZGRlZE5vZGVzIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbml0Q29tcGxldGVkIiwidHJpZ2dlckhhbmRsZXIiLCJ0eXBlIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsImJ1aWxkSGllcmFyY2h5IiwiYnVpbGRKc29uRFMiLCJjaGlsZHJlbiIsImFqYXhVUkwiLCJhdHRhY2hSZWwiLCJhcHBlbmQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkb25lIiwidGV4dFN0YXR1cyIsImpxWEhSIiwiZmFpbCIsImVycm9yVGhyb3duIiwiY29uc29sZSIsImxvZyIsImFsd2F5cyIsIiRleHBvcnRCdG4iLCJ0ZXh0IiwiZSIsInByZXZlbnREZWZhdWx0IiwiZXhwb3J0IiwiYmluZFBhbiIsImJpbmRab29tIiwic2V0T3B0aW9ucyIsInZhbCIsInVuYmluZFBhbiIsInVuYmluZFpvb20iLCJwYW5TdGFydEhhbmRsZXIiLCJkZWxlZ2F0ZVRhcmdldCIsInRvdWNoZXMiLCJjc3MiLCJsYXN0WCIsImxhc3RZIiwibGFzdFRmIiwidGVtcCIsInNwbGl0IiwiaW5kZXhPZiIsInBhcnNlSW50Iiwic3RhcnRYIiwic3RhcnRZIiwidGFyZ2V0VG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJvbiIsIm5ld1giLCJuZXdZIiwibWF0cml4Iiwiam9pbiIsInBhbkVuZEhhbmRsZXIiLCJjaGFydCIsIm9mZiIsInpvb21XaGVlbEhhbmRsZXIiLCJvYyIsIm5ld1NjYWxlIiwib3JpZ2luYWxFdmVudCIsImRlbHRhWSIsInNldENoYXJ0U2NhbGUiLCJ6b29tU3RhcnRIYW5kbGVyIiwiZGlzdCIsImdldFBpbmNoRGlzdCIsInpvb21pbmdIYW5kbGVyIiwiem9vbUVuZEhhbmRsZXIiLCJkaWZmIiwiTWF0aCIsInNxcnQiLCJjbGllbnRYIiwiY2xpZW50WSIsInRhcmdldFNjYWxlIiwiYWJzIiwicGFyc2VGbG9hdCIsIiRsaSIsInN1Yk9iaiIsIm5hbWUiLCJjb250ZW50cyIsImVxIiwidHJpbSIsInJlbGF0aW9uc2hpcCIsInBhcmVudCIsImlzIiwic2libGluZ3MiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsImdldE5vZGVTdGF0ZSIsIiRub2RlIiwicmVsYXRpb24iLCIkdGFyZ2V0IiwiZXhpc3QiLCJ2aXNpYmxlIiwiZ2V0UmVsYXRlZE5vZGVzIiwiaGlkZVBhcmVudCIsIiR0ZW1wIiwiaGlkZVNpYmxpbmdzIiwiJGxpbmVzIiwic2xpY2UiLCIkcGFyZW50IiwiZ3JhbmRmYXRoZXJWaXNpYmxlIiwiYWRkQ2xhc3MiLCJvbmUiLCJyZW1vdmVBdHRyIiwic2hvd1BhcmVudCIsInJlcGFpbnQiLCJpc0luQWN0aW9uIiwic3dpdGNoVmVydGljYWxBcnJvdyIsImhpZGVDaGlsZHJlbiIsImxhc3QiLCIkdmlzaWJsZU5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJwcmV2QWxsIiwic2hvd0NoaWxkcmVuIiwiJGxldmVscyIsIiRkZXNjZW5kYW50cyIsImdldCIsIiRub2RlQ29udGFpbmVyIiwibmV4dEFsbCIsIiRhbmltYXRlZE5vZGVzIiwiJHNpYmxpbmdzIiwicHJldiIsImVuZCIsInN3aXRjaEhvcml6b250YWxBcnJvdyIsInNob3dTaWJsaW5ncyIsIiR1cHBlckxldmVsIiwic3RhcnRMb2FkaW5nIiwiJGFycm93Iiwibm90IiwicHJvcCIsImVuZExvYWRpbmciLCJhdHRyIiwidG9nZ2xlQ2xhc3MiLCIkcHJldlNpYiIsIiRuZXh0U2liIiwibmV4dCIsIiRzaWJzIiwic2lic1Zpc2libGUiLCJub2RlIiwic3R5bGUiLCJvZmZzZXRXaWR0aCIsImNyZWF0ZU5vZGUiLCJub2RlRGF0YSIsImxldmVsIiwiaW5kZXgiLCJjaGlsZCIsInBhcmVudElkIiwiZHRkIiwiRGVmZXJyZWQiLCIkbm9kZURpdiIsImNsYXNzTmFtZSIsIm5vZGVUZW1wbGF0ZSIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsImljb24iLCJwcmVwZW5kIiwiZmxhZyIsIiR0b3BFZGdlIiwiJGJvdHRvbUVkZ2UiLCIkbGVmdEVkZ2UiLCJzdG9wUHJvcGFnYXRpb24iLCIkdGhhdCIsInBhcmVudFN0YXRlIiwiaXNGdW5jdGlvbiIsImlzRW1wdHlPYmplY3QiLCJhZGRQYXJlbnQiLCJjaGlsZHJlblN0YXRlIiwiYWRkQ2hpbGRyZW4iLCIkdGhpcyIsIiRkZXNjV3JhcHBlciIsIiRjaGlsZHJlbiIsInNpYmxpbmdzU3RhdGUiLCJmYW1pbGllcyIsImFkZFNpYmxpbmdzIiwib3JpZ0V2ZW50IiwiaXNGaXJlZm94IiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImdob3N0Tm9kZSIsIm5vZGVDb3ZlciIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50TlMiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInRyYW5zVmFsdWVzIiwic2NhbGUiLCJzZXRBdHRyaWJ1dGUiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJ4T2Zmc2V0Iiwib2Zmc2V0WCIsInlPZmZzZXQiLCJvZmZzZXRZIiwiZ2hvc3ROb2RlV3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJzZXREcmFnSW1hZ2UiLCIkZHJhZ2dlZCIsIiRkcmFnWm9uZSIsIiRkcmFnSGllciIsImRyb3BDcml0ZXJpYSIsImRyb3BFZmZlY3QiLCIkZHJvcFpvbmUiLCIkb3JnY2hhcnQiLCJkcm9wQ29sc3BhbiIsImhvcml6b250YWxFZGdlcyIsImFkZEJhY2siLCJiZWZvcmUiLCIkZHJvcFNpYnMiLCJhZnRlciIsImRyYWdDb2xzcGFuIiwiJGRyYWdTaWJzIiwiZHJhZ2dlZE5vZGUiLCJkcmFnWm9uZSIsImRyb3Bab25lIiwicmVzb2x2ZSIsInByb21pc2UiLCIkYXBwZW5kVG8iLCJjYWxsYmFjayIsIiRub2RlV3JhcHBlciIsIiRjaGlsZE5vZGVzIiwiaGFzQ2hpbGRyZW4iLCJpc1ZlcnRpY2FsTm9kZSIsIk9iamVjdCIsImtleXMiLCJ3aGVuIiwid3JhcCIsImlzSGlkZGVuIiwiY29sbGFwc2VkIiwiaXNWZXJ0aWNhbExheWVyIiwibGluZUxheWVyIiwiJG5vZGVMYXllciIsIiRub2RlQ2VsbCIsImJ1aWxkQ2hpbGROb2RlIiwiY291bnQiLCJidWlsZFBhcmVudE5vZGUiLCIkY3VycmVudFJvb3QiLCIkdGFibGUiLCJjb21wbGVtZW50TGluZSIsIiRvbmVTaWJsaW5nIiwic2libGluZ0NvdW50IiwiZXhpc3RpbmdTaWJsaWdDb3VudCIsImxpbmVzIiwiYnVpbGRTaWJsaW5nTm9kZSIsIiRub2RlQ2hhcnQiLCJuZXdTaWJsaW5nQ291bnQiLCJpbnNlcnRQb3N0aW9uIiwiZmxvb3IiLCJjaGlsZENvdW50IiwiJHNpYmxpbmdUZHMiLCJ1bndyYXAiLCJub2RlQ291bnQiLCJyZW1vdmVOb2RlcyIsIiRtYXNrIiwic291cmNlQ2hhcnQiLCJodG1sMmNhbnZhcyIsIndpZHRoIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJvbnJlbmRlcmVkIiwiY2FudmFzIiwiZG9jIiwiZG9jV2lkdGgiLCJkb2NIZWlnaHQiLCJqc1BERiIsImFkZEltYWdlIiwidG9EYXRhVVJMIiwic2F2ZSIsImlzV2Via2l0IiwiZG9jdW1lbnRFbGVtZW50IiwiaXNGZiIsInNpZGViYXIiLCJpc0VkZ2UiLCJhcHBOYW1lIiwiYXBwVmVyc2lvbiIsIm1zU2F2ZUJsb2IiLCJtc1RvQmxvYiIsInNlbGVjdG9yIiwidGhlbiIsImZuIiwib3JnY2hhcnQiXSwibWFwcGluZ3MiOiJBQVVBLGNBRUMsU0FBVUEsR0FDYSxpQkFBWEMsUUFBaUQsaUJBQW5CQSxPQUFPQyxRQUM5Q0YsRUFBUUcsUUFBUSxVQUFXQyxPQUFRQyxVQUVuQ0wsRUFBUU0sT0FBUUYsT0FBUUMsVUFKNUIsQ0FNRSxTQUFVRSxFQUFHSCxFQUFRQyxFQUFVRyxHQUMvQixJQUFJQyxFQUFXLFNBQVVDLEVBQU1DLEdBQzdCQyxLQUFLQyxnQkFBa0JOLEVBQUVHLEdBQ3pCRSxLQUFLRCxLQUFPQSxFQUNaQyxLQUFLRSxnQkFDSEMsVUFBYSxPQUNiQyxPQUFVLEtBQ1ZDLG9CQUFzQixFQUN0QkMsTUFBUyxJQUNUQyxXQUFjLEdBQ2RDLGNBQWdCLEVBQ2hCQyxlQUFrQixXQUNsQkMsb0JBQXVCLE1BQ3ZCQyxpQkFBb0IsV0FDcEJDLFdBQWEsRUFDYkMsVUFBYSxNQUNiQyxLQUFPLEVBQ1BDLE1BQVEsRUFDUkMsWUFBZSxFQUNmQyxhQUFnQixLQUlwQnBCLEVB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LElBQ2pHTixFQUFnQitCLEtBQUtvVCxHQUFVclQsUUFDbEM5QixFQUFnQnFELE9BQU8sNkJBQTJELEtBQTVCbEMsRUFBS0MsUUFBUWQsV0FBb0IsSUFBTWEsRUFBS0MsUUFBUWQsV0FBYSxJQUFNLGVBQ3pHRSxFQUFpQixjQUV2Q1IsRUFBZ0IrQixLQUFLb1QsR0FBVTdKLEtBQUssT0FBUTRJLEVBQU9NLGFBQWEsR0FBRzlTLGFBSzFFMFQsS0FBSyxXQUNKcFYsRUFBZ0JnQyxZQUFZLG9CQUMzQixXQUNEaEMsRUFBZ0JnQyxZQUFZLHVCQUtsQ3RDLEVBQUUyVixHQUFHQyxTQUFXLFNBQVV4VixHQUN4QixPQUFPLElBQUlGLEVBQVNHLEtBQU1ELEdBQU1vQiIsImZpbGUiOiJqcXVlcnkub3JnY2hhcnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIGpRdWVyeSBPcmdDaGFydCBQbHVnaW5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWJlbmcvT3JnQ2hhcnRcbiAqXG4gKiBDb3B5cmlnaHQgMjAxNiwgZGFiZW5nXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFiZW5nXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLCB3aW5kb3csIGRvY3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBmYWN0b3J5KGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG4gIH1cbn0oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuICB2YXIgT3JnQ2hhcnQgPSBmdW5jdGlvbiAoZWxlbSwgb3B0cykge1xuICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyID0gJChlbGVtKTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAnbm9kZVRpdGxlJzogJ25hbWUnLFxuICAgICAgJ25vZGVJZCc6ICdpZCcsXG4gICAgICAndG9nZ2xlU2libGluZ3NSZXNwJzogZmFsc2UsXG4gICAgICAnZGVwdGgnOiA5OTksXG4gICAgICAnY2hhcnRDbGFzcyc6ICcnLFxuICAgICAgJ2V4cG9ydEJ1dHRvbic6IGZhbHNlLFxuICAgICAgJ2V4cG9ydEZpbGVuYW1lJzogJ09yZ0NoYXJ0JyxcbiAgICAgICdleHBvcnRGaWxlZXh0ZW5zaW9uJzogJ3BuZycsXG4gICAgICAncGFyZW50Tm9kZVN5bWJvbCc6ICdmYS11c2VycycsXG4gICAgICAnZHJhZ2dhYmxlJzogZmFsc2UsXG4gICAgICAnZGlyZWN0aW9uJzogJ3QyYicsXG4gICAgICAncGFuJzogZmFsc2UsXG4gICAgICAnem9vbSc6IGZhbHNlLFxuICAgICAgJ3pvb21pbkxpbWl0JzogNyxcbiAgICAgICd6b29tb3V0TGltaXQnOiAwLjVcbiAgICB9O1xuICB9O1xuICAvL1xuICBPcmdDaGFydC5wcm90b3R5cGUgPSB7XG4gICAgLy9cbiAgICBpbml0OiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMuZGVmYXVsdE9wdGlvbnMsIHRoaXMub3B0cywgb3B0cyk7XG4gICAgICAvLyBidWlsZCB0aGUgb3JnLWNoYXJ0XG4gICAgICB2YXIgJGNoYXJ0Q29udGFpbmVyID0gdGhpcy4kY2hhcnRDb250YWluZXI7XG4gICAgICBpZiAodGhpcy4kY2hhcnQpIHtcbiAgICAgICAgdGhpcy4kY2hhcnQucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICB2YXIgZGF0YSA9IHRoaXMub3B0aW9ucy5kYXRhO1xuICAgICAgdmFyICRjaGFydCA9IHRoaXMuJGNoYXJ0ID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICdkYXRhJzogeyAnb3B0aW9ucyc6IHRoaXMub3B0aW9ucyB9LFxuICAgICAgICAnY2xhc3MnOiAnb3JnY2hhcnQnICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gIT09ICd0MmInID8gJyAnICsgdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA6ICcnKSxcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoISQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgJGNoYXJ0LmZpbmQoJy5ub2RlLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcbiAgICAgICAgICBtby5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgaW5pdFRpbWU6XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXV0YXRpb25zW2ldLmFkZGVkTm9kZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgaWYgKG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzW2pdLmNsYXNzTGlzdC5jb250YWlucygnb3JnY2hhcnQnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCAmJiB0eXBlb2YgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkKCRjaGFydCk7XG4gICAgICAgICAgICAgICAgICAkY2hhcnQudHJpZ2dlckhhbmRsZXIoeyAndHlwZSc6ICdpbml0Lm9yZ2NoYXJ0JyB9KTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrIGluaXRUaW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICBtby5vYnNlcnZlKCRjaGFydENvbnRhaW5lclswXSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICBpZiAoJC50eXBlKGRhdGEpID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mICQpIHsgLy8gdWwgZGF0YXNvdXJjZVxuICAgICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGlzLmJ1aWxkSnNvbkRTKGRhdGEuY2hpbGRyZW4oKSksIDAsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGxvY2FsIGpzb24gZGF0YXNvdXJjZVxuICAgICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGlzLm9wdGlvbnMuYWpheFVSTCA/IGRhdGEgOiB0aGlzLmF0dGFjaFJlbChkYXRhLCAnMDAnKSwgMCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGNoYXJ0LmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+Jyk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgJ3VybCc6IGRhdGEsXG4gICAgICAgICAgJ2RhdGFUeXBlJzogJ2pzb24nXG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoYXQub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoYXQuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGF0Lm9wdGlvbnMpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG4gICAgICAgIH0pXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJGNoYXJ0LmNoaWxkcmVuKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJGNoYXJ0KTtcblxuICAgICAgLy8gYXBwZW5kIHRoZSBleHBvcnQgYnV0dG9uXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4cG9ydEJ1dHRvbiAmJiAhJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5vYy1leHBvcnQtYnRuJykubGVuZ3RoKSB7XG4gICAgICAgIHZhciAkZXhwb3J0QnRuID0gJCgnPGJ1dHRvbj4nLCB7XG4gICAgICAgICAgJ2NsYXNzJzogJ29jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpLFxuICAgICAgICAgICd0ZXh0JzogJ0V4cG9ydCcsXG4gICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhhdC5leHBvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCRleHBvcnRCdG4pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnBhbikge1xuICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tKSB7XG4gICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvL1xuICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIChvcHRzLCB2YWwpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09ICdwYW4nKSB7XG4gICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzID09PSAnem9vbScpIHtcbiAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAob3B0cy5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5pbml0KG9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy5wYW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5wYW4pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuem9vbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnpvb20pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy9cbiAgICBwYW5TdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gJChlLmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCB8fCAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSkge1xuICAgICAgICAkY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGNoYXJ0LmNzcygnY3Vyc29yJywgJ21vdmUnKS5kYXRhKCdwYW5uaW5nJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICB2YXIgbGFzdFggPSAwO1xuICAgICAgdmFyIGxhc3RZID0gMDtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIGlmIChsYXN0VGYgIT09ICdub25lJykge1xuICAgICAgICB2YXIgdGVtcCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzRdKTtcbiAgICAgICAgICBsYXN0WSA9IHBhcnNlSW50KHRlbXBbNV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RYID0gcGFyc2VJbnQodGVtcFsxMl0pO1xuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFsxM10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc3RhcnRYID0gMDtcbiAgICAgIHZhciBzdGFydFkgPSAwO1xuICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgIHN0YXJ0WCA9IGUucGFnZVggLSBsYXN0WDtcbiAgICAgICAgc3RhcnRZID0gZS5wYWdlWSAtIGxhc3RZO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXG4gICAgICAgIHN0YXJ0WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIGxhc3RYO1xuICAgICAgICBzdGFydFkgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBsYXN0WTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Lm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJyxmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghJGNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3WCA9IDA7XG4gICAgICAgIHZhciBuZXdZID0gMDtcbiAgICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgICAgbmV3WCA9IGUucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUucGFnZVkgLSBzdGFydFk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgICAgIG5ld1ggPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIHN0YXJ0WTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcpJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgzZCgxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJywgMCwgMSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIG1hdHJpeFs0XSA9ICcgJyArIG5ld1g7XG4gICAgICAgICAgICBtYXRyaXhbNV0gPSAnICcgKyBuZXdZICsgJyknO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRyaXhbMTJdID0gJyAnICsgbmV3WDtcbiAgICAgICAgICAgIG1hdHJpeFsxM10gPSAnICcgKyBuZXdZO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBtYXRyaXguam9pbignLCcpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHBhbkVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5kYXRhLmNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICBlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKS5jc3MoJ2N1cnNvcicsICdkZWZhdWx0Jykub2ZmKCdtb3VzZW1vdmUnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYmluZFBhbjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMuJGNoYXJ0Lm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgeyAnY2hhcnQnOiB0aGlzLiRjaGFydCB9LCB0aGlzLnBhbkVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICB1bmJpbmRQYW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xuICAgICAgdGhpcy4kY2hhcnQub2ZmKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZignbW91c2V1cCB0b3VjaGVuZCcsIHRoaXMucGFuRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIHpvb21XaGVlbEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgbmV3U2NhbGUgID0gMSArIChlLm9yaWdpbmFsRXZlbnQuZGVsdGFZID4gMCA/IC0wLjIgOiAwLjIpO1xuICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIG5ld1NjYWxlKTtcbiAgICB9LFxuICAgIC8vXG4gICAgem9vbVN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgdHJ1ZSk7XG4gICAgICAgIHZhciBkaXN0ID0gb2MuZ2V0UGluY2hEaXN0KGUpO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21pbmdIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21FbmRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgZmFsc2UpO1xuICAgICAgICB2YXIgZGlmZiA9IG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnKSAtIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcpO1xuICAgICAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgMS4yKTtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAwLjgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJpbmRab29tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbignd2hlZWwnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd0b3VjaHN0YXJ0JywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNoZW5kJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgdW5iaW5kWm9vbTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd3aGVlbCcsIHRoaXMuem9vbVdoZWVsSGFuZGxlcik7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3RvdWNoc3RhcnQnLCB0aGlzLnpvb21TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUnLCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2hlbmQnLCB0aGlzLnpvb21FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0UGluY2hEaXN0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIE1hdGguc3FydCgoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgKiAoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgK1xuICAgICAgKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpICogKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc2V0Q2hhcnRTY2FsZTogZnVuY3Rpb24gKCRjaGFydCwgbmV3U2NhbGUpIHtcbiAgICAgIHZhciBvcHRzID0gJGNoYXJ0LmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIHZhciBtYXRyaXggPSAnJztcbiAgICAgIHZhciB0YXJnZXRTY2FsZSA9IDE7XG4gICAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ3NjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbM10pICogbmV3U2NhbGUpO1xuICAgICAgICAgIGlmICh0YXJnZXRTY2FsZSA+IG9wdHMuem9vbW91dExpbWl0ICYmIHRhcmdldFNjYWxlIDwgb3B0cy56b29taW5MaW1pdCkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQobWF0cml4WzFdKSAqIG5ld1NjYWxlKTtcbiAgICAgICAgICBpZiAodGFyZ2V0U2NhbGUgPiBvcHRzLnpvb21vdXRMaW1pdCAmJiB0YXJnZXRTY2FsZSA8IG9wdHMuem9vbWluTGltaXQpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIGxhc3RUZiArICcgc2NhbGUzZCgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcsIDEpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJ1aWxkSnNvbkRTOiBmdW5jdGlvbiAoJGxpKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgc3ViT2JqID0ge1xuICAgICAgICAnbmFtZSc6ICRsaS5jb250ZW50cygpLmVxKDApLnRleHQoKS50cmltKCksXG4gICAgICAgICdyZWxhdGlvbnNoaXAnOiAoJGxpLnBhcmVudCgpLnBhcmVudCgpLmlzKCdsaScpID8gJzEnOiAnMCcpICsgKCRsaS5zaWJsaW5ncygnbGknKS5sZW5ndGggPyAxOiAwKSArICgkbGkuY2hpbGRyZW4oJ3VsJykubGVuZ3RoID8gMSA6IDApXG4gICAgICB9O1xuICAgICAgaWYgKCRsaVswXS5pZCkge1xuICAgICAgICBzdWJPYmouaWQgPSAkbGlbMF0uaWQ7XG4gICAgICB9XG4gICAgICAkbGkuY2hpbGRyZW4oJ3VsJykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXN1Yk9iai5jaGlsZHJlbikgeyBzdWJPYmouY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgICBzdWJPYmouY2hpbGRyZW4ucHVzaCh0aGF0LmJ1aWxkSnNvbkRTKCQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Yk9iajtcbiAgICB9LFxuICAgIC8vXG4gICAgYXR0YWNoUmVsOiBmdW5jdGlvbiAoZGF0YSwgZmxhZ3MpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGRhdGEucmVsYXRpb25zaGlwID0gZmxhZ3MgKyAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyAxIDogMCk7XG4gICAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xuICAgICAgICBkYXRhLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIHRoYXQuYXR0YWNoUmVsKGl0ZW0sICcxJyArIChkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDEgPyAxIDogMCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLy9cbiAgICBsb29wQ2hhcnQ6IGZ1bmN0aW9uICgkY2hhcnQpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkdHIgPSAkY2hhcnQuZmluZCgndHI6Zmlyc3QnKTtcbiAgICAgIHZhciBzdWJPYmogPSB7ICdpZCc6ICR0ci5maW5kKCcubm9kZScpWzBdLmlkIH07XG4gICAgICAkdHIuc2libGluZ3MoJzpsYXN0JykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXN1Yk9iai5jaGlsZHJlbikgeyBzdWJPYmouY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgICBzdWJPYmouY2hpbGRyZW4ucHVzaCh0aGF0Lmxvb3BDaGFydCgkKHRoaXMpKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdWJPYmo7XG4gICAgfSxcbiAgICAvL1xuICAgIGdldEhpZXJhcmNoeTogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLiRjaGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuICdFcnJvcjogb3JnY2hhcnQgZG9lcyBub3QgZXhpc3QnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuJGNoYXJ0LmZpbmQoJy5ub2RlJykubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuICdFcnJvcjogbm9kZXMgZG8gbm90IGV4aXN0J1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKVswXS5pZCkge1xuICAgICAgICAgICAgcmV0dXJuICdFcnJvcjogTm9kZXMgb2Ygb3JnaGNhcnQgdG8gYmUgZXhwb3J0ZWQgbXVzdCBoYXZlIGlkIGF0dHJpYnV0ZSEnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubG9vcENoYXJ0KHRoaXMuJGNoYXJ0KTtcbiAgICB9LFxuICAgIC8vIGRldGVjdCB0aGUgZXhpc3QvZGlzcGxheSBzdGF0ZSBvZiByZWxhdGVkIG5vZGVcbiAgICBnZXROb2RlU3RhdGU6IGZ1bmN0aW9uICgkbm9kZSwgcmVsYXRpb24pIHtcbiAgICAgIHZhciAkdGFyZ2V0ID0ge307XG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygnOmZpcnN0Jyk7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKCcuaGlkZGVuJykgfHwgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykgJiYgJHRhcmdldC5jbG9zZXN0KCcubm9kZXMnKS5pcygnLmhpZGRlbicpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnLm5vZGVzJyk7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICghJHRhcmdldC5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnc2libGluZ3MnKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICghJHRhcmdldC5pcygnLmhpZGRlbicpICYmICEkdGFyZ2V0LnBhcmVudCgpLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgfSxcbiAgICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXG4gICAgZ2V0UmVsYXRlZE5vZGVzOiBmdW5jdGlvbiAoJG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgICBpZiAoISRub2RlIHx8ICEoJG5vZGUgaW5zdGFuY2VvZiAkKSB8fCAhJG5vZGUuaXMoJy5ub2RlJykpIHtcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnBhcmVudCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgYW5jZXN0b3Igbm9kZSBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBoaWRlUGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciAkdGVtcCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKCR0ZW1wLmVxKDApLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXNcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJykudmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSk7XG4gICAgICB9XG4gICAgICAvLyBoaWRlIHRoZSBsaW5lc1xuICAgICAgdmFyICRsaW5lcyA9ICR0ZW1wLnNsaWNlKDEpO1xuICAgICAgJGxpbmVzLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIC8vIGhpZGUgdGhlIHN1cGVyaW9yIG5vZGVzIHdpdGggdHJhbnNpdGlvblxuICAgICAgdmFyICRwYXJlbnQgPSAkdGVtcC5lcSgwKS5maW5kKCcubm9kZScpO1xuICAgICAgdmFyIGdyYW5kZmF0aGVyVmlzaWJsZSA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRwYXJlbnQsICdwYXJlbnQnKS52aXNpYmxlO1xuICAgICAgaWYgKCRwYXJlbnQubGVuZ3RoICYmICRwYXJlbnQuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgJHBhcmVudC5hZGRDbGFzcygnc2xpZGUgc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgICAgJGxpbmVzLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgJHRlbXAuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIHRoZSBjdXJyZW50IG5vZGUgaGFzIHRoZSBwYXJlbnQgbm9kZSwgaGlkZSBpdCByZWN1cnNpdmVseVxuICAgICAgaWYgKCRwYXJlbnQubGVuZ3RoICYmIGdyYW5kZmF0aGVyVmlzaWJsZSkge1xuICAgICAgICB0aGlzLmhpZGVQYXJlbnQoJHBhcmVudCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93UGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBzdXBlcmlvciBsZXZlbFxuICAgICAgdmFyICR0ZW1wID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgLy8ganVzdCBzaG93IG9ubHkgb25lIGxpbmVcbiAgICAgICR0ZW1wLmVxKDIpLmNoaWxkcmVuKCkuc2xpY2UoMSwgLTEpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIC8vIHNob3cgcGFyZW50IG5vZGUgd2l0aCBhbmltYXRpb25cbiAgICAgIHZhciBwYXJlbnQgPSAkdGVtcC5lcSgwKS5maW5kKCcubm9kZScpWzBdO1xuICAgICAgdGhpcy5yZXBhaW50KHBhcmVudCk7XG4gICAgICAkKHBhcmVudCkuYWRkQ2xhc3MoJ3NsaWRlJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJChwYXJlbnQpLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgIHRoYXQuc3dpdGNoVmVydGljYWxBcnJvdygkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBoaWRlQ2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0ZW1wID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKCR0ZW1wLmxhc3QoKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICB2YXIgJHZpc2libGVOb2RlcyA9ICR0ZW1wLmxhc3QoKS5maW5kKCcubm9kZTp2aXNpYmxlJyk7XG4gICAgICB2YXIgaXNWZXJ0aWNhbERlc2MgPSAkdGVtcC5sYXN0KCkuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoIWlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgIHZhciAkbGluZXMgPSAkdmlzaWJsZU5vZGVzLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICAkdmlzaWJsZU5vZGVzLmFkZENsYXNzKCdzbGlkZSBzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkdmlzaWJsZU5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICBpZiAoaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgICAgICAkdGVtcC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGxpbmVzLnJlbW92ZUF0dHIoJ3N0eWxlJykuYWRkQ2xhc3MoJ2hpZGRlbicpLnNpYmxpbmdzKCcubm9kZXMnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgJHRlbXAubGFzdCgpLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgdGhhdC5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93Q2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRsZXZlbHMgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICB2YXIgaXNWZXJ0aWNhbERlc2MgPSAkbGV2ZWxzLmlzKCcudmVydGljYWxOb2RlcycpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgdmFyICRkZXNjZW5kYW50cyA9IGlzVmVydGljYWxEZXNjXG4gICAgICAgID8gJGxldmVscy5yZW1vdmVDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGU6dmlzaWJsZScpXG4gICAgICAgIDogJGxldmVscy5yZW1vdmVDbGFzcygnaGlkZGVuJykuZXEoMikuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgLy8gdGhlIHR3byBmb2xsb3dpbmcgc3RhdGVtZW50cyBhcmUgdXNlZCB0byBlbmZvcmNlIGJyb3dzZXIgdG8gcmVwYWludFxuICAgICAgdGhpcy5yZXBhaW50KCRkZXNjZW5kYW50cy5nZXQoMCkpO1xuICAgICAgJGRlc2NlbmRhbnRzLmFkZENsYXNzKCdzbGlkZScpLnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkZGVzY2VuZGFudHMucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgdGhhdC5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbm9kZUNvbnRhaW5lciA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XG4gICAgICBpZiAoJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRub2RlQ29udGFpbmVyLnByZXZBbGwoKS5maW5kKCcubm9kZTp2aXNpYmxlJykuYWRkQ2xhc3MoJ3NsaWRlIHNsaWRlLXJpZ2h0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJG5vZGVDb250YWluZXIubmV4dEFsbCgpLmZpbmQoJy5ub2RlOnZpc2libGUnKS5hZGRDbGFzcygnc2xpZGUgc2xpZGUtbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCkuZmluZCgnLm5vZGU6dmlzaWJsZScpLmFkZENsYXNzKCdzbGlkZSBzbGlkZS1yaWdodCcpO1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGU6dmlzaWJsZScpLmFkZENsYXNzKCdzbGlkZSBzbGlkZS1sZWZ0Jyk7XG4gICAgICB9XG4gICAgICB2YXIgJGFuaW1hdGVkTm9kZXMgPSAkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpLmZpbmQoJy5zbGlkZScpO1xuICAgICAgdmFyICRsaW5lcyA9ICRhbmltYXRlZE5vZGVzLmNsb3Nlc3QoJy5ub2RlcycpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICRhbmltYXRlZE5vZGVzLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkbGluZXMucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgdmFyICRzaWJsaW5ncyA9IGRpcmVjdGlvbiA/IChkaXJlY3Rpb24gPT09ICdsZWZ0JyA/ICRub2RlQ29udGFpbmVyLnByZXZBbGwoJzpub3QoLmhpZGRlbiknKSA6ICRub2RlQ29udGFpbmVyLm5leHRBbGwoJzpub3QoLmhpZGRlbiknKSkgOiAkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpO1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5jbG9zZXN0KCcubm9kZXMnKS5wcmV2KCkuY2hpbGRyZW4oJzpub3QoLmhpZGRlbiknKVxuICAgICAgICAgIC5zbGljZSgxLCBkaXJlY3Rpb24gPyAkc2libGluZ3MubGVuZ3RoICogMiArIDEgOiAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkYW5pbWF0ZWROb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgJHNpYmxpbmdzLmZpbmQoJy5ub2RlOnZpc2libGU6Z3QoMCknKS5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpLmFkZENsYXNzKCdzbGlkZS11cCcpXG4gICAgICAgICAgLmVuZCgpLmZpbmQoJy5saW5lcywgLm5vZGVzLCAudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgIC5lbmQoKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICB0aGF0LnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93U2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAvLyBmaXJzdGx5LCBzaG93IHRoZSBzaWJsaW5nIHRkIHRhZ3NcbiAgICAgIHZhciAkc2libGluZ3MgPSAkKCk7XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldkFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHRBbGwoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICAvLyBzZWNvbmRseSwgc2hvdyB0aGUgbGluZXNcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnNsaWNlKDAsICRzaWJsaW5ncy5sZW5ndGggKiAyKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXJkbHksIGRvIHNvbWUgY2xlYW5pbmcgc3R1ZmZcbiAgICAgIGlmICghdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlKSB7XG4gICAgICAgICR1cHBlckxldmVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgdmFyIHBhcmVudCA9ICR1cHBlckxldmVsLmZpbmQoJy5ub2RlJylbMF07XG4gICAgICAgIHRoaXMucmVwYWludChwYXJlbnQpO1xuICAgICAgICAkKHBhcmVudCkuYWRkQ2xhc3MoJ3NsaWRlJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGxhc3RseSwgc2hvdyB0aGUgc2libGluZyBub2RlcyB3aXRoIGFuaW1hdGlvblxuICAgICAgJHNpYmxpbmdzLmZpbmQoJy5ub2RlOnZpc2libGUnKS5hZGRDbGFzcygnc2xpZGUnKS5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpLmVxKC0xKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNpYmxpbmdzLmZpbmQoJy5ub2RlOnZpc2libGUnKS5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICB0aGF0LnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gICAgc3RhcnRMb2FkaW5nOiBmdW5jdGlvbiAoJGFycm93LCAkbm9kZSwgb3B0aW9ucykge1xuICAgICAgdmFyICRjaGFydCA9ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpO1xuICAgICAgaWYgKHR5cGVvZiAkY2hhcnQuZGF0YSgnaW5BamF4JykgIT09ICd1bmRlZmluZWQnICYmICRjaGFydC5kYXRhKCdpbkFqYXgnKSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgICRhcnJvdy5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkbm9kZS5hcHBlbmQoJzxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPicpO1xuICAgICAgJG5vZGUuY2hpbGRyZW4oKS5ub3QoJy5zcGlubmVyJykuY3NzKCdvcGFjaXR5JywgMC4yKTtcbiAgICAgICRjaGFydC5kYXRhKCdpbkFqYXgnLCB0cnVlKTtcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArIChvcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgb3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICAvLyB0ZXJtaW5hdGUgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gICAgZW5kTG9hZGluZzogZnVuY3Rpb24gKCRhcnJvdywgJG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciAkY2hhcnQgPSAkbm9kZS5jbG9zZXN0KCdkaXYub3JnY2hhcnQnKTtcbiAgICAgICRhcnJvdy5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkbm9kZS5maW5kKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgJG5vZGUuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgJGNoYXJ0LmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArIChvcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgb3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9LFxuICAgIC8vIHdoZXRoZXIgdGhlIGN1cnNvciBpcyBob3ZlcmluZyBvdmVyIHRoZSBub2RlXG4gICAgaXNJbkFjdGlvbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICByZXR1cm4gJG5vZGUuY2hpbGRyZW4oJy5lZGdlJykuYXR0cignY2xhc3MnKS5pbmRleE9mKCdmYS0nKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0sXG4gICAgLy9cbiAgICBzd2l0Y2hWZXJ0aWNhbEFycm93OiBmdW5jdGlvbiAoJGFycm93KSB7XG4gICAgICAkYXJyb3cudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgfSxcbiAgICAvL1xuICAgIHN3aXRjaEhvcml6b250YWxBcnJvdzogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgb3B0cyA9ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCAmJiAodHlwZW9mIG9wdHMuYWpheFVSTCA9PT0gJ3VuZGVmaW5lZCcgfHwgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnKSkpIHtcbiAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XG4gICAgICAgIGlmICgkcHJldlNpYi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICBpZiAoJG5leHRTaWIubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgJHNpYnMgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgIHZhciBzaWJzVmlzaWJsZSA9ICRzaWJzLmxlbmd0aCA/ICEkc2licy5pcygnLmhpZGRlbicpIDogZmFsc2U7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcsIHNpYnNWaXNpYmxlKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgcmVwYWludDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIG5vZGUuc3R5bGUub2Zmc2V0V2lkdGggPSBub2RlLm9mZnNldFdpZHRoO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gY3JlYXRlIG5vZGVcbiAgICBjcmVhdGVOb2RlOiBmdW5jdGlvbiAobm9kZURhdGEsIGxldmVsLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBpZiAoIW5vZGVEYXRhLmNoaWxkcmVuKSB7IG5vZGVEYXRhLmNoaWxkcmVuID0gW107IH1cbiAgICAgICQuZWFjaChub2RlRGF0YS5jaGlsZHJlbiwgZnVuY3Rpb24gKGluZGV4LCBjaGlsZCkge1xuICAgICAgICBjaGlsZC5wYXJlbnRJZCA9IG5vZGVEYXRhLmlkO1xuICAgICAgfSk7XG4gICAgICB2YXIgZHRkID0gJC5EZWZlcnJlZCgpO1xuICAgICAgLy8gY29uc3RydWN0IHRoZSBjb250ZW50IG9mIG5vZGVcbiAgICAgIHZhciAkbm9kZURpdiA9ICQoJzxkaXYnICsgKG9wdHMuZHJhZ2dhYmxlID8gJyBkcmFnZ2FibGU9XCJ0cnVlXCInIDogJycpICsgKG5vZGVEYXRhW29wdHMubm9kZUlkXSA/ICcgaWQ9XCInICsgbm9kZURhdGFbb3B0cy5ub2RlSWRdICsgJ1wiJyA6ICcnKSArIChub2RlRGF0YS5wYXJlbnRJZCA/ICcgZGF0YS1wYXJlbnQ9XCInICsgbm9kZURhdGEucGFyZW50SWQgKyAnXCInIDogJycpICsgJz4nKVxuICAgICAgICAuYWRkQ2xhc3MoJ25vZGUgJyArIChub2RlRGF0YS5jbGFzc05hbWUgfHwgJycpICsgIChsZXZlbCA+PSBvcHRzLmRlcHRoID8gJyBzbGlkZS11cCcgOiAnJykpO1xuICAgICAgaWYgKG9wdHMubm9kZVRlbXBsYXRlKSB7XG4gICAgICAgICRub2RlRGl2LmFwcGVuZChvcHRzLm5vZGVUZW1wbGF0ZShub2RlRGF0YSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8ZGl2IGNsYXNzPVwidGl0bGVcIj4nICsgbm9kZURhdGFbb3B0cy5ub2RlVGl0bGVdICsgJzwvZGl2PicpXG4gICAgICAgICAgLmFwcGVuZCh0eXBlb2Ygb3B0cy5ub2RlQ29udGVudCAhPT0gJ3VuZGVmaW5lZCcgPyAnPGRpdiBjbGFzcz1cImNvbnRlbnRcIj4nICsgKG5vZGVEYXRhW29wdHMubm9kZUNvbnRlbnRdIHx8ICcnKSArICc8L2Rpdj4nIDogJycpO1xuICAgICAgfVxuICAgICAgLy8gYXBwZW5kIDQgZGlyZWN0aW9uIGFycm93cyBvciBleHBhbmQvY29sbGFwc2UgYnV0dG9uc1xuICAgICAgdmFyIGZsYWdzID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcnO1xuICAgICAgaWYgKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICBpZiAoKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcbiAgICAgICAgICB2YXIgaWNvbiA9IGxldmVsICsgMSAgPj0gb3B0cy5kZXB0aCA/ICdwbHVzJyA6ICdtaW51cyc7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cInRvZ2dsZUJ0biBmYSBmYS0nICsgaWNvbiArICctc3F1YXJlXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigwLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMSwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+JyArXG4gICAgICAgICAgICAnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCcudGl0bGUnKS5wcmVwZW5kKCc8aSBjbGFzcz1cImZhICcrIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRub2RlRGl2Lm9uKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgJG5vZGUgPSAkKHRoaXMpLCBmbGFnID0gZmFsc2U7XG4gICAgICAgIHZhciAkdG9wRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpO1xuICAgICAgICB2YXIgJHJpZ2h0RWRnZSA9ICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJyk7XG4gICAgICAgIHZhciAkYm90dG9tRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpO1xuICAgICAgICB2YXIgJGxlZnRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpO1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInKSB7XG4gICAgICAgICAgaWYgKCR0b3BFZGdlLmxlbmd0aCkge1xuICAgICAgICAgICAgZmxhZyA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykudmlzaWJsZTtcbiAgICAgICAgICAgICR0b3BFZGdlLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nLCBmbGFnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCRib3R0b21FZGdlLmxlbmd0aCkge1xuICAgICAgICAgICAgZmxhZyA9IHRoYXQuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKS52aXNpYmxlO1xuICAgICAgICAgICAgJGJvdHRvbUVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsICFmbGFnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcsIGZsYWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoJGxlZnRFZGdlLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhhdC5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCBmYS1jaGV2cm9uLWRvd24gZmEtY2hldnJvbi1yaWdodCBmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGRlZmluZSBjbGljayBldmVudCBoYW5kbGVyXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmZpbmQoJy5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGRlZmluZSBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgdG9wIGVkZ2VcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9wRWRnZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgJG5vZGUgPSAkdGhhdC5wYXJlbnQoKTtcbiAgICAgICAgdmFyIHBhcmVudFN0YXRlID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKTtcbiAgICAgICAgaWYgKHBhcmVudFN0YXRlLmV4aXN0KSB7XG4gICAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpmaXJzdCcpLmZpbmQoJy5ub2RlJyk7XG4gICAgICAgICAgaWYgKCRwYXJlbnQuaXMoJy5zbGlkZScpKSB7IHJldHVybjsgfVxuICAgICAgICAgIC8vIGhpZGUgdGhlIGFuY2VzdG9yIG5vZGVzIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgICAgIGlmIChwYXJlbnRTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGF0LmhpZGVQYXJlbnQoJG5vZGUpO1xuICAgICAgICAgICAgJHBhcmVudC5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnN3aXRjaFZlcnRpY2FsQXJyb3coJHRoYXQpO1xuICAgICAgICAgICAgICAgIHRoYXQuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHsgLy8gc2hvdyB0aGUgYW5jZXN0b3JzIGFuZCBzaWJsaW5nc1xuICAgICAgICAgICAgdGhhdC5zaG93UGFyZW50KCRub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gbG9hZCB0aGUgbmV3IHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJHRoYXQucGFyZW50KClbMF0uaWQ7XG4gICAgICAgICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXNcbiAgICAgICAgICBpZiAodGhhdC5zdGFydExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKSkge1xuICAgICAgICAgIC8vIGxvYWQgbmV3IG5vZGVzXG4gICAgICAgICAgICAkLmFqYXgoeyAndXJsJzogJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5wYXJlbnQpID8gb3B0cy5hamF4VVJMLnBhcmVudChub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwucGFyZW50ICsgbm9kZUlkLCAnZGF0YVR5cGUnOiAnanNvbicgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgaWYgKCRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgIHRoYXQuYWRkUGFyZW50KCRub2RlLCBkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmFpbChmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBnZXQgcGFyZW50IG5vZGUgZGF0YScpOyB9KVxuICAgICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHsgdGhhdC5lbmRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cyk7IH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGJpbmQgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGJvdHRvbSBlZGdlXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLmJvdHRvbUVkZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyICR0aGF0ID0gJCh0aGlzKTtcbiAgICAgICAgdmFyICRub2RlID0gJHRoYXQucGFyZW50KCk7XG4gICAgICAgIHZhciBjaGlsZHJlblN0YXRlID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdjaGlsZHJlbicpO1xuICAgICAgICBpZiAoY2hpbGRyZW5TdGF0ZS5leGlzdCkge1xuICAgICAgICAgIHZhciAkY2hpbGRyZW4gPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICAgIGlmICgkY2hpbGRyZW4uZmluZCgnLm5vZGU6dmlzaWJsZScpLmlzKCcuc2xpZGUnKSkgeyByZXR1cm47IH1cbiAgICAgICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgICAgIGlmIChjaGlsZHJlblN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoYXQuaGlkZUNoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xuICAgICAgICAgICAgdGhhdC5zaG93Q2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJHRoYXQucGFyZW50KClbMF0uaWQ7XG4gICAgICAgICAgaWYgKHRoYXQuc3RhcnRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cykpIHtcbiAgICAgICAgICAgICQuYWpheCh7ICd1cmwnOiAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmNoaWxkcmVuKSA/IG9wdHMuYWpheFVSTC5jaGlsZHJlbihub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuY2hpbGRyZW4gKyBub2RlSWQsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgICAgaWYgKCRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0LmFkZENoaWxkcmVuKCRub2RlLCBkYXRhLCAkLmV4dGVuZCh7fSwgb3B0cywgeyBkZXB0aDogMCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0IGNoaWxkcmVuIG5vZGVzIGRhdGEnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0aGF0LmVuZExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGV2ZW50IGhhbmRsZXIgZm9yIHRvZ2dsZSBidXR0b25zIGluIEh5YnJpZChob3Jpem9udGFsICsgdmVydGljYWwpIE9yZ0NoYXJ0XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvZ2dsZUJ0bicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkZGVzY1dyYXBwZXIgPSAkdGhpcy5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgIHZhciAkZGVzY2VuZGFudHMgPSAkZGVzY1dyYXBwZXIuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRkZXNjV3JhcHBlci5jaGlsZHJlbigpLmNoaWxkcmVuKCcubm9kZScpO1xuICAgICAgICBpZiAoJGNoaWxkcmVuLmlzKCcuc2xpZGUnKSkgeyByZXR1cm47IH1cbiAgICAgICAgJHRoaXMudG9nZ2xlQ2xhc3MoJ2ZhLXBsdXMtc3F1YXJlIGZhLW1pbnVzLXNxdWFyZScpO1xuICAgICAgICBpZiAoJGRlc2NlbmRhbnRzLmVxKDApLmlzKCcuc2xpZGUtdXAnKSkge1xuICAgICAgICAgICRkZXNjV3JhcHBlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgdGhhdC5yZXBhaW50KCRjaGlsZHJlbi5nZXQoMCkpO1xuICAgICAgICAgICRjaGlsZHJlbi5hZGRDbGFzcygnc2xpZGUnKS5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRjaGlsZHJlbi5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkZGVzY2VuZGFudHMuYWRkQ2xhc3MoJ3NsaWRlIHNsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkZGVzY2VuZGFudHMucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgICAgICAvLyAkZGVzY1dyYXBwZXIuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgJGRlc2NlbmRhbnRzLmNsb3Nlc3QoJ3VsJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgICRkZXNjZW5kYW50cy5maW5kKCcudG9nZ2xlQnRuJykucmVtb3ZlQ2xhc3MoJ2ZhLW1pbnVzLXNxdWFyZScpLmFkZENsYXNzKCdmYS1wbHVzLXNxdWFyZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gYmluZCBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgbGVmdCBhbmQgcmlnaHQgZWRnZXNcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcubGVmdEVkZ2UsIC5yaWdodEVkZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyICR0aGF0ID0gJCh0aGlzKTtcbiAgICAgICAgdmFyICRub2RlID0gJHRoYXQucGFyZW50KCk7XG4gICAgICAgIHZhciBzaWJsaW5nc1N0YXRlID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpO1xuICAgICAgICBpZiAoc2libGluZ3NTdGF0ZS5leGlzdCkge1xuICAgICAgICAgIHZhciAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICAgICAgaWYgKCRzaWJsaW5ncy5maW5kKCcubm9kZTp2aXNpYmxlJykuaXMoJy5zbGlkZScpKSB7IHJldHVybjsgfVxuICAgICAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCkge1xuICAgICAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XG4gICAgICAgICAgICB2YXIgJG5leHRTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHQoKTtcbiAgICAgICAgICAgIGlmICgkdGhhdC5pcygnLmxlZnRFZGdlJykpIHtcbiAgICAgICAgICAgICAgaWYgKCRwcmV2U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LmhpZGVTaWJsaW5ncygkbm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhhdC5oaWRlU2libGluZ3MoJG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzaWJsaW5nc1N0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgdGhhdC5oaWRlU2libGluZ3MoJG5vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBsb2FkIHRoZSBuZXcgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgICAgdmFyIG5vZGVJZCA9ICR0aGF0LnBhcmVudCgpWzBdLmlkO1xuICAgICAgICAgIHZhciB1cmwgPSAodGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS5leGlzdCkgP1xuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuc2libGluZ3MpID8gb3B0cy5hamF4VVJMLnNpYmxpbmdzKG5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5zaWJsaW5ncyArIG5vZGVJZCkgOlxuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuZmFtaWxpZXMpID8gb3B0cy5hamF4VVJMLmZhbWlsaWVzKG5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5mYW1pbGllcyArIG5vZGVJZCk7XG4gICAgICAgICAgaWYgKHRoYXQuc3RhcnRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cykpIHtcbiAgICAgICAgICAgICQuYWpheCh7ICd1cmwnOiB1cmwsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgICAgaWYgKCRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2libGluZ3MgfHwgZGF0YS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgdGhhdC5hZGRTaWJsaW5ncygkbm9kZSwgZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0IHNpYmxpbmcgbm9kZXMgZGF0YScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRoYXQuZW5kTG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChvcHRzLmRyYWdnYWJsZSkge1xuICAgICAgICAkbm9kZURpdi5vbignZHJhZ3N0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB2YXIgb3JpZ0V2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICB2YXIgaXNGaXJlZm94ID0gL2ZpcmVmb3gvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgaWYgKGlzRmlyZWZveCkge1xuICAgICAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L2h0bWwnLCAnaGFjayBmb3IgZmlyZWZveCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBpZiB1c2VycyBlbmFibGUgem9vbSBvciBkaXJlY3Rpb24gb3B0aW9uc1xuICAgICAgICAgIGlmICgkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jc3MoJ3RyYW5zZm9ybScpICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHZhciBnaG9zdE5vZGUsIG5vZGVDb3ZlcjtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdob3N0LW5vZGUnKSkge1xuICAgICAgICAgICAgICBnaG9zdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlLmNsYXNzTGlzdC5hZGQoJ2dob3N0LW5vZGUnKTtcbiAgICAgICAgICAgICAgbm9kZUNvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsJ3JlY3QnKTtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlLmFwcGVuZENoaWxkKG5vZGVDb3Zlcik7XG4gICAgICAgICAgICAgICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmFwcGVuZChnaG9zdE5vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlID0gJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY2hpbGRyZW4oJy5naG9zdC1ub2RlJykuZ2V0KDApO1xuICAgICAgICAgICAgICBub2RlQ292ZXIgPSAkKGdob3N0Tm9kZSkuY2hpbGRyZW4oKS5nZXQoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNWYWx1ZXMgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jc3MoJ3RyYW5zZm9ybScpLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdCgob3B0cy5kaXJlY3Rpb24gPT09ICd0MmInIHx8IG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0JykgPyB0cmFuc1ZhbHVlc1swXS5zbGljZSh0cmFuc1ZhbHVlc1swXS5pbmRleE9mKCcoJykgKyAxKSA6IHRyYW5zVmFsdWVzWzFdKSk7XG4gICAgICAgICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpKTtcbiAgICAgICAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd4Jyw1ICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneScsNSAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMTIwICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgNDAgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeCcsIDQgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeScsIDQgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAxICogc2NhbGUpO1xuICAgICAgICAgICAgdmFyIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICAgICAgdmFyIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnbDJyJykge1xuICAgICAgICAgICAgICB4T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgICAgICAgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAncjJsJykge1xuICAgICAgICAgICAgICB4T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICAgIHlPZmZzZXQgPSAkbm9kZURpdi5vdXRlckhlaWdodChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRmlyZWZveCkgeyAvLyBoYWNrIGZvciBvbGQgdmVyc2lvbiBvZiBGaXJlZm94KDwgNDguMClcbiAgICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcbiAgICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ3JnYigxOTEsIDAsIDApJyk7XG4gICAgICAgICAgICAgIHZhciBnaG9zdE5vZGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZVdyYXBwZXIuc3JjID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCcgKyAobmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoZ2hvc3ROb2RlKTtcbiAgICAgICAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlV3JhcHBlciwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGUsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgJGRyYWdnZWQgPSAkKHRoaXMpO1xuICAgICAgICAgIHZhciAkZHJhZ1pvbmUgPSAkZHJhZ2dlZC5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLmVxKDApLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAgICAgdmFyICRkcmFnSGllciA9ICRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgICAkZHJhZ2dlZC5jbG9zZXN0KCcub3JnY2hhcnQnKVxuICAgICAgICAgICAgLmRhdGEoJ2RyYWdnZWQnLCAkZHJhZ2dlZClcbiAgICAgICAgICAgIC5maW5kKCcubm9kZScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIG5vZGUpIHtcbiAgICAgICAgICAgICAgaWYgKCRkcmFnSGllci5pbmRleChub2RlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSgkZHJhZ2dlZCwgJGRyYWdab25lLCAkKG5vZGUpKSkge1xuICAgICAgICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgaWYgKCEkKHRoaXMpLmlzKCcuYWxsb3dlZERyb3AnKSkge1xuICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignZHJhZ2VuZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcub3JnY2hhcnQnKS5maW5kKCcuYWxsb3dlZERyb3AnKS5yZW1vdmVDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcm9wJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB2YXIgJGRyb3Bab25lID0gJCh0aGlzKTtcbiAgICAgICAgICB2YXIgJG9yZ2NoYXJ0ID0gJGRyb3Bab25lLmNsb3Nlc3QoJy5vcmdjaGFydCcpO1xuICAgICAgICAgIHZhciAkZHJhZ2dlZCA9ICRvcmdjaGFydC5kYXRhKCdkcmFnZ2VkJyk7XG4gICAgICAgICAgJG9yZ2NoYXJ0LmZpbmQoJy5hbGxvd2VkRHJvcCcpLnJlbW92ZUNsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgIHZhciAkZHJhZ1pvbmUgPSAkZHJhZ2dlZC5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLmVxKDApLmNoaWxkcmVuKCk7XG4gICAgICAgICAgLy8gZmlyc3RseSwgZGVhbCB3aXRoIHRoZSBoaWVyYXJjaHkgb2YgZHJvcCB6b25lXG4gICAgICAgICAgaWYgKCEkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmxlbmd0aCkgeyAvLyBpZiB0aGUgZHJvcCB6b25lIGlzIGEgbGVhZiBub2RlXG4gICAgICAgICAgICAkZHJvcFpvbmUuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+JylcbiAgICAgICAgICAgICAgLnBhcmVudCgpLmF0dHIoJ2NvbHNwYW4nLCAyKVxuICAgICAgICAgICAgICAucGFyZW50KCkuYWZ0ZXIoJzx0ciBjbGFzcz1cImxpbmVzXCI+PHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPidcbiAgICAgICAgICAgICAgKyAnPHRyIGNsYXNzPVwibGluZXNcIj48dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD48L3RyPidcbiAgICAgICAgICAgICAgKyAnPHRyIGNsYXNzPVwibm9kZXNcIj48L3RyPicpXG4gICAgICAgICAgICAgIC5zaWJsaW5ncygnOmxhc3QnKS5hcHBlbmQoJGRyYWdnZWQuZmluZCgnLmhvcml6b250YWxFZGdlJykucmVtb3ZlKCkuZW5kKCkuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkcm9wQ29sc3BhbiA9IHBhcnNlSW50KCRkcm9wWm9uZS5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJykpICsgMjtcbiAgICAgICAgICAgIHZhciBob3Jpem9udGFsRWRnZXMgPSAnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT48aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+JztcbiAgICAgICAgICAgICRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLm5leHQoKS5hZGRCYWNrKCkuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgZHJvcENvbHNwYW4pO1xuICAgICAgICAgICAgaWYgKCEkZHJhZ2dlZC5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJGRyYWdnZWQuYXBwZW5kKGhvcml6b250YWxFZGdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmVxKDEpLmNoaWxkcmVuKCc6bGFzdCcpLmJlZm9yZSgnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPicpXG4gICAgICAgICAgICAgIC5lbmQoKS5uZXh0KCkuYXBwZW5kKCRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkpO1xuICAgICAgICAgICAgdmFyICRkcm9wU2licyA9ICRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgICAgICAgaWYgKCRkcm9wU2licy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgJGRyb3BTaWJzLmFwcGVuZChob3Jpem9udGFsRWRnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBzZWNvbmRseSwgZGVhbCB3aXRoIHRoZSBoaWVyYXJjaHkgb2YgZHJhZ2dlZCBub2RlXG4gICAgICAgICAgdmFyIGRyYWdDb2xzcGFuID0gcGFyc2VJbnQoJGRyYWdab25lLmF0dHIoJ2NvbHNwYW4nKSk7XG4gICAgICAgICAgaWYgKGRyYWdDb2xzcGFuID4gMikge1xuICAgICAgICAgICAgJGRyYWdab25lLmF0dHIoJ2NvbHNwYW4nLCBkcmFnQ29sc3BhbiAtIDIpXG4gICAgICAgICAgICAgIC5wYXJlbnQoKS5uZXh0KCkuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxuICAgICAgICAgICAgICAuZW5kKCkubmV4dCgpLmNoaWxkcmVuKCkuc2xpY2UoMSwgMykucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgJGRyYWdTaWJzID0gJGRyYWdab25lLnBhcmVudCgpLnNpYmxpbmdzKCcubm9kZXMnKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAgICAgICBpZiAoJGRyYWdTaWJzLmxlbmd0aCA9PT0xKSB7XG4gICAgICAgICAgICAgICRkcmFnU2licy5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGRyYWdab25lLnJlbW92ZUF0dHIoJ2NvbHNwYW4nKVxuICAgICAgICAgICAgICAuZmluZCgnLmJvdHRvbUVkZ2UnKS5yZW1vdmUoKVxuICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2libGluZ3MoKS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJG9yZ2NoYXJ0LnRyaWdnZXJIYW5kbGVyKHsgJ3R5cGUnOiAnbm9kZWRyb3BwZWQub3JnY2hhcnQnLCAnZHJhZ2dlZE5vZGUnOiAkZHJhZ2dlZCwgJ2RyYWdab25lJzogJGRyYWdab25lLmNoaWxkcmVuKCksICdkcm9wWm9uZSc6ICRkcm9wWm9uZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBhbGxvdyB1c2VyIHRvIGFwcGVuZCBkb20gbW9kaWZpY2F0aW9uIGFmdGVyIGZpbmlzaGluZyBub2RlIGNyZWF0ZSBvZiBvcmdjaGFydFxuICAgICAgaWYgKG9wdHMuY3JlYXRlTm9kZSkge1xuICAgICAgICBvcHRzLmNyZWF0ZU5vZGUoJG5vZGVEaXYsIG5vZGVEYXRhKTtcbiAgICAgIH1cbiAgICAgIGR0ZC5yZXNvbHZlKCRub2RlRGl2KTtcbiAgICAgIHJldHVybiBkdGQucHJvbWlzZSgpO1xuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgYnVpbGQgdGhlIHRyZWVcbiAgICBidWlsZEhpZXJhcmNoeTogZnVuY3Rpb24gKCRhcHBlbmRUbywgbm9kZURhdGEsIGxldmVsLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRub2RlV3JhcHBlcjtcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgbm9kZVxuICAgICAgdmFyICRjaGlsZE5vZGVzID0gbm9kZURhdGEuY2hpbGRyZW47XG4gICAgICB2YXIgaGFzQ2hpbGRyZW4gPSAkY2hpbGROb2RlcyA/ICRjaGlsZE5vZGVzLmxlbmd0aCA6IGZhbHNlO1xuICAgICAgdmFyIGlzVmVydGljYWxOb2RlID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPiAxKSB7IC8vIGlmIG5vZGVEYXRhIGhhcyBuZXN0ZWQgc3RydWN0dXJlXG4gICAgICAgICRub2RlV3JhcHBlciA9IGlzVmVydGljYWxOb2RlID8gJGFwcGVuZFRvIDogJCgnPHRhYmxlPicpO1xuICAgICAgICBpZiAoIWlzVmVydGljYWxOb2RlKSB7XG4gICAgICAgICAgJGFwcGVuZFRvLmFwcGVuZCgkbm9kZVdyYXBwZXIpO1xuICAgICAgICB9XG4gICAgICAgICQud2hlbih0aGlzLmNyZWF0ZU5vZGUobm9kZURhdGEsIGxldmVsLCBvcHRzKSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcbiAgICAgICAgICBpZiAoaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVEaXYpO1xuICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVEaXYud3JhcCgnPHRyPjx0ZCcgKyAoaGFzQ2hpbGRyZW4gPyAnIGNvbHNwYW49XCInICsgJGNoaWxkTm9kZXMubGVuZ3RoICogMiArICdcIicgOiAnJykgKyAnPjwvdGQ+PC90cj4nKS5jbG9zZXN0KCd0cicpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdCBub2RlJylcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIGluZmVyaW9yIG5vZGVzIGFuZCBjb25uZWN0aW9uZyBsaW5lc1xuICAgICAgaWYgKGhhc0NoaWxkcmVuKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID09PSAxKSB7IC8vIGlmIG5vZGVEYXRhIGlzIGp1c3QgYW4gYXJyYXlcbiAgICAgICAgICAkbm9kZVdyYXBwZXIgPSAkYXBwZW5kVG87XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzSGlkZGVuID0gKGxldmVsICsgMSA+PSBvcHRzLmRlcHRoIHx8IG5vZGVEYXRhLmNvbGxhcHNlZCkgPyAnIGhpZGRlbicgOiAnJztcbiAgICAgICAgdmFyIGlzVmVydGljYWxMYXllciA9IChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPj0gb3B0cy52ZXJ0aWNhbERlcHRoKSA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lIGNsb3NlIHRvIHBhcmVudCBub2RlXG4gICAgICAgIGlmICghaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkIGNvbHNwYW49XCInICsgJGNoaWxkTm9kZXMubGVuZ3RoICogMiArICdcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZHJhdyB0aGUgbGluZXMgY2xvc2UgdG8gY2hpbGRyZW4gbm9kZXNcbiAgICAgICAgdmFyIGxpbmVMYXllciA9ICc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY2xhc3M9XCJyaWdodExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICAgIGZvciAodmFyIGk9MTsgaTwkY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpbmVMYXllciArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICAgIH1cbiAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+PC90cj4nO1xuICAgICAgICB2YXIgJG5vZGVMYXllcjtcbiAgICAgICAgaWYgKGlzVmVydGljYWxMYXllcikge1xuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dWw+Jyk7XG4gICAgICAgICAgaWYgKGlzSGlkZGVuKSB7XG4gICAgICAgICAgICAkbm9kZUxheWVyLmFkZENsYXNzKGlzSGlkZGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxldmVsICsgMiA9PT0gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJ2ZXJ0aWNhbE5vZGVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZD48L3RkPjwvdHI+JylcbiAgICAgICAgICAgICAgLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuY2hpbGRyZW4oKS5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dHIgY2xhc3M9XCJub2RlcycgKyBpc0hpZGRlbiArICdcIj4nKTtcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKGxpbmVMYXllcikuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlY3Vyc2UgdGhyb3VnaCBjaGlsZHJlbiBub2Rlc1xuICAgICAgICAkLmVhY2goJGNoaWxkTm9kZXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciAkbm9kZUNlbGwgPSBpc1ZlcnRpY2FsTGF5ZXIgPyAkKCc8bGk+JykgOiAkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKTtcbiAgICAgICAgICAkbm9kZUxheWVyLmFwcGVuZCgkbm9kZUNlbGwpO1xuICAgICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoJG5vZGVDZWxsLCB0aGlzLCBsZXZlbCArIDEsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgY2hpbGQgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkQ2hpbGROb2RlOiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkYXBwZW5kVG8uY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGRhdGEgPSBub2RlRGF0YS5jaGlsZHJlbiB8fCBub2RlRGF0YS5zaWJsaW5ncztcbiAgICAgICRhcHBlbmRUby5maW5kKCd0ZDpmaXJzdCcpLmF0dHIoJ2NvbHNwYW4nLCBkYXRhLmxlbmd0aCAqIDIpO1xuICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkYXBwZW5kVG8sIHsgJ2NoaWxkcmVuJzogZGF0YSB9LCAwLCBvcHRzLCBjYWxsYmFjayk7XG4gICAgfSxcbiAgICAvLyBleHBvc2VkIG1ldGhvZFxuICAgIGFkZENoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgdGhpcy5idWlsZENoaWxkTm9kZSgkbm9kZS5jbG9zZXN0KCd0YWJsZScpLCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCsrY291bnQgPT09IGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRub2RlLmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoISRub2RlLmZpbmQoJy5zeW1ib2wnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudGl0bGUnKS5wcmVwZW5kKCc8aSBjbGFzcz1cImZhICcrIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sXCI+PC9pPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGF0LnNob3dDaGlsZHJlbigkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIHBhcmVudCBub2RlIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZFBhcmVudE5vZGU6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0YWJsZSA9ICQoJzx0YWJsZT4nKTtcbiAgICAgIG5vZGVEYXRhLnJlbGF0aW9uc2hpcCA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnMDAxJztcbiAgICAgICQud2hlbih0aGlzLmNyZWF0ZU5vZGUobm9kZURhdGEsIDAsIG9wdHMgfHwgJGN1cnJlbnRSb290LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKSkpXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCRub2RlRGl2KSB7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgkbm9kZURpdi5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpLndyYXAoJzx0ciBjbGFzcz1cImhpZGRlblwiPjx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+PC90cj4nKS5jbG9zZXN0KCd0cicpKTtcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+Jyk7XG4gICAgICAgICAgdmFyIGxpbmVzUm93ID0gJzx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPic7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMgaGlkZGVuXCI+JyArIGxpbmVzUm93ICsgJzwvdHI+Jyk7XG4gICAgICAgICAgdmFyICRjaGFydCA9IHRoYXQuJGNoYXJ0O1xuICAgICAgICAgICRjaGFydC5wcmVwZW5kKCR0YWJsZSlcbiAgICAgICAgICAgIC5jaGlsZHJlbigndGFibGU6Zmlyc3QnKS5hcHBlbmQoJzx0ciBjbGFzcz1cIm5vZGVzXCI+PHRkIGNvbHNwYW49XCIyXCI+PC90ZD48L3RyPicpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RyOmxhc3QnKS5jaGlsZHJlbigpLmFwcGVuZCgkY2hhcnQuY2hpbGRyZW4oJ3RhYmxlJykubGFzdCgpKTtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0ZSBwYXJlbnQgbm9kZScpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGV4cG9zZWQgbWV0aG9kXG4gICAgYWRkUGFyZW50OiBmdW5jdGlvbiAoJGN1cnJlbnRSb290LCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLmJ1aWxkUGFyZW50Tm9kZSgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoISRjdXJyZW50Um9vdC5jaGlsZHJlbignLnRvcEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50aXRsZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93UGFyZW50KCRjdXJyZW50Um9vdCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIHN1YnNlcXVlbnQgcHJvY2Vzc2luZyBvZiBidWlsZCBzaWJsaW5nIG5vZGVzXG4gICAgY29tcGxlbWVudExpbmU6IGZ1bmN0aW9uICgkb25lU2libGluZywgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KSB7XG4gICAgICB2YXIgbGluZXMgPSAnJztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhpc3RpbmdTaWJsaWdDb3VudDsgaSsrKSB7XG4gICAgICAgIGxpbmVzICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgIH1cbiAgICAgICRvbmVTaWJsaW5nLnBhcmVudCgpLnByZXZBbGwoJ3RyOmd0KDApJykuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgc2libGluZ0NvdW50ICogMilcbiAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbignOmZpcnN0JykuYWZ0ZXIobGluZXMpO1xuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkU2libGluZ05vZGU6IGZ1bmN0aW9uICgkbm9kZUNoYXJ0LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkbm9kZUNoYXJ0LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBuZXdTaWJsaW5nQ291bnQgPSBub2RlRGF0YS5zaWJsaW5ncyA/IG5vZGVEYXRhLnNpYmxpbmdzLmxlbmd0aCA6IG5vZGVEYXRhLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBleGlzdGluZ1NpYmxpZ0NvdW50ID0gJG5vZGVDaGFydC5wYXJlbnQoKS5pcygndGQnKSA/ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5jaGlsZHJlbigpLmxlbmd0aCA6IDE7XG4gICAgICB2YXIgc2libGluZ0NvdW50ID0gZXhpc3RpbmdTaWJsaWdDb3VudCArIG5ld1NpYmxpbmdDb3VudDtcbiAgICAgIHZhciBpbnNlcnRQb3N0aW9uID0gKHNpYmxpbmdDb3VudCA+IDEpID8gTWF0aC5mbG9vcihzaWJsaW5nQ291bnQvMiAtIDEpIDogMDtcbiAgICAgIC8vIGp1c3QgYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgZm9yIHRoZSBzcGVjaWZpYyBub2RlXG4gICAgICBpZiAoJG5vZGVDaGFydC5wYXJlbnQoKS5pcygndGQnKSkge1xuICAgICAgICB2YXIgJHBhcmVudCA9ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsYXN0Jyk7XG4gICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsdCgyKScpLnJlbW92ZSgpO1xuICAgICAgICB2YXIgY2hpbGRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLCBub2RlRGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrY2hpbGRDb3VudCA9PT0gbmV3U2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICB2YXIgJHNpYmxpbmdUZHMgPSAkbm9kZUNoYXJ0LnBhcmVudCgpLmNsb3Nlc3QoJ3RhYmxlJykuY2hpbGRyZW4oJ3RyOmxhc3QnKS5jaGlsZHJlbigndGQnKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NpYmxpZ0NvdW50ID4gMSkge1xuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKDApLmJlZm9yZSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykuc2libGluZ3MoKS5hZGRCYWNrKCkudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpO1xuICAgICAgICAgICAgICAkc2libGluZ1Rkcy5hZGRDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkc2libGluZ1Rkcy5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgICAkc2libGluZ1Rkcy5ub3QoJzplcSgnICsgaW5zZXJ0UG9zdGlvbiArIDEgKyAnKScpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1yaWdodCcpXG4gICAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNsaWNlKGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7IC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGFuZCBwYXJlbnQgbm9kZSBmb3IgdGhlIHNwZWNpZmljIG5kb2VcbiAgICAgICAgdmFyIG5vZGVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJG5vZGVDaGFydC5jbG9zZXN0KCcub3JnY2hhcnQnKSwgbm9kZURhdGEsIDAsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgrK25vZGVDb3VudCA9PT0gc2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRub2RlQ2hhcnQubmV4dCgpLmNoaWxkcmVuKCd0cjpsYXN0JylcbiAgICAgICAgICAgICAgLmNoaWxkcmVuKCkuZXEoaW5zZXJ0UG9zdGlvbikuYWZ0ZXIoJCgnPHRkIGNvbHNwYW49XCIyXCI+JylcbiAgICAgICAgICAgICAgLmFwcGVuZCgkbm9kZUNoYXJ0KSksIHNpYmxpbmdDb3VudCwgMSk7XG4gICAgICAgICAgICAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgwKS5hZGRDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpO1xuICAgICAgICAgICAgJG5vZGVDaGFydC5wYXJlbnQoKS5zaWJsaW5ncygpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxuICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBhZGRTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLmJ1aWxkU2libGluZ05vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLmRhdGEoJ3NpYmxpbmdzTG9hZGVkJywgdHJ1ZSk7XG4gICAgICAgIGlmICghJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgcmVtb3ZlTm9kZXM6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpO1xuICAgICAgdmFyICRzaWJzID0gJHBhcmVudC5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKCRwYXJlbnQuaXMoJ3RkJykpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKS5leGlzdCkge1xuICAgICAgICAgICRzaWJzLmVxKDIpLmNoaWxkcmVuKCcudG9wTGluZTpsdCgyKScpLnJlbW92ZSgpO1xuICAgICAgICAgICRzaWJzLnNsaWNlKDAsIDIpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsICRzaWJzLmVxKDIpLmNoaWxkcmVuKCkubGVuZ3RoKTtcbiAgICAgICAgICAkcGFyZW50LnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzaWJzLmVxKDApLmNoaWxkcmVuKCkucmVtb3ZlQXR0cignY29sc3BhbicpXG4gICAgICAgICAgICAuZmluZCgnLmJvdHRvbUVkZ2UnKS5yZW1vdmUoKVxuICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRwYXJlbnQuYWRkKCRwYXJlbnQuc2libGluZ3MoKSkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGV4cG9ydDogZnVuY3Rpb24gKGV4cG9ydEZpbGVuYW1lLCBleHBvcnRGaWxlZXh0ZW5zaW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBleHBvcnRGaWxlbmFtZSA9ICh0eXBlb2YgZXhwb3J0RmlsZW5hbWUgIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlbmFtZSA6IHRoaXMub3B0aW9ucy5leHBvcnRGaWxlbmFtZTtcbiAgICAgIGV4cG9ydEZpbGVleHRlbnNpb24gPSAodHlwZW9mIGV4cG9ydEZpbGVleHRlbnNpb24gIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlZXh0ZW5zaW9uIDogdGhpcy5vcHRpb25zLmV4cG9ydEZpbGVleHRlbnNpb247XG4gICAgICBpZiAoJCh0aGlzKS5jaGlsZHJlbignLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyICRjaGFydENvbnRhaW5lciA9IHRoaXMuJGNoYXJ0Q29udGFpbmVyO1xuICAgICAgdmFyICRtYXNrID0gJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJyk7XG4gICAgICBpZiAoISRtYXNrLmxlbmd0aCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibWFza1wiPjxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPjwvZGl2PicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG1hc2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgdmFyIHNvdXJjZUNoYXJ0ID0gJGNoYXJ0Q29udGFpbmVyLmFkZENsYXNzKCdjYW52YXNDb250YWluZXInKS5maW5kKCcub3JnY2hhcnQ6dmlzaWJsZScpLmdldCgwKTtcbiAgICAgIHZhciBmbGFnID0gdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2wycicgfHwgdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3IybCc7XG4gICAgICBodG1sMmNhbnZhcyhzb3VyY2VDaGFydCwge1xuICAgICAgICAnd2lkdGgnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0IDogc291cmNlQ2hhcnQuY2xpZW50V2lkdGgsXG4gICAgICAgICdoZWlnaHQnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50V2lkdGggOiBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQsXG4gICAgICAgICdvbmNsb25lJzogZnVuY3Rpb24gKGNsb25lRG9jKSB7XG4gICAgICAgICAgJChjbG9uZURvYykuZmluZCgnLmNhbnZhc0NvbnRhaW5lcicpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpXG4gICAgICAgICAgICAuZmluZCgnLm9yZ2NoYXJ0OnZpc2libGU6Zmlyc3QnKS5jc3MoJ3RyYW5zZm9ybScsICcnKTtcbiAgICAgICAgfSxcbiAgICAgICAgJ29ucmVuZGVyZWQnOiBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIGlmIChleHBvcnRGaWxlZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdwZGYnKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0ge307XG4gICAgICAgICAgICB2YXIgZG9jV2lkdGggPSBNYXRoLmZsb29yKGNhbnZhcy53aWR0aCAqIDAuMjY0Nik7XG4gICAgICAgICAgICB2YXIgZG9jSGVpZ2h0ID0gTWF0aC5mbG9vcihjYW52YXMuaGVpZ2h0ICogMC4yNjQ2KTtcbiAgICAgICAgICAgIGlmIChkb2NXaWR0aCA+IGRvY0hlaWdodCkge1xuICAgICAgICAgICAgICBkb2MgPSBuZXcganNQREYoJ2wnLCAnbW0nLCBbZG9jV2lkdGgsIGRvY0hlaWdodF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZG9jID0gbmV3IGpzUERGKCdwJywgJ21tJywgW2RvY0hlaWdodCwgZG9jV2lkdGhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvYy5hZGRJbWFnZShjYW52YXMudG9EYXRhVVJMKCksICdwbmcnLCAwLCAwKTtcbiAgICAgICAgICAgIGRvYy5zYXZlKGV4cG9ydEZpbGVuYW1lICsgJy5wZGYnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGlzV2Via2l0ID0gJ1dlYmtpdEFwcGVhcmFuY2UnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcbiAgICAgICAgICAgIHZhciBpc0ZmID0gISF3aW5kb3cuc2lkZWJhcjtcbiAgICAgICAgICAgIHZhciBpc0VkZ2UgPSBuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicgfHwgKG5hdmlnYXRvci5hcHBOYW1lID09PSBcIk5ldHNjYXBlXCIgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignRWRnZScpID4gLTEpO1xuXG4gICAgICAgICAgICBpZiAoKCFpc1dlYmtpdCAmJiAhaXNGZikgfHwgaXNFZGdlKSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlQmxvYihjYW52YXMubXNUb0Jsb2IoKSwgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJy5vYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpO1xuICAgICAgICAgICAgICBpZiAoISRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCc8YSBjbGFzcz1cIm9jLWRvd25sb2FkLWJ0bicgKyAodGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykgKyAnXCInXG4gICAgICAgICAgICAgICAgICArICcgZG93bmxvYWQ9XCInICsgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZ1wiPjwvYT4nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkY2hhcnRDb250YWluZXIuZmluZChzZWxlY3RvcikuYXR0cignaHJlZicsIGNhbnZhcy50b0RhdGFVUkwoKSlbMF0uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5yZW1vdmVDbGFzcygnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5yZW1vdmVDbGFzcygnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJC5mbi5vcmdjaGFydCA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgcmV0dXJuIG5ldyBPcmdDaGFydCh0aGlzLCBvcHRzKS5pbml0KCk7XG4gIH07XG5cbn0pKTtcbiJdfQ==
